2026-02-05 21:26:29,821 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:26:29,821 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-05 21:26:29,821 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:26:29,821 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:26:29,831 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:26:30,420 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:26:30,443 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:31:48,732 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:31:48,732 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-05 21:31:48,732 - __main__ - INFO - Anthropic API key configured: No
2026-02-05 21:31:48,732 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:31:48,742 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:31:49,286 - __main__ - INFO - ============================================================
2026-02-05 21:31:49,286 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:31:49,286 - __main__ - INFO - ============================================================
2026-02-05 21:31:49,343 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-05 21:31:49,343 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-05 21:31:49,355 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:31:50,167 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:31:50,167 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:31:50,167 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:31:50,170 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:31:50,170 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:31:50,765 - __main__ - INFO - ============================================================
2026-02-05 21:31:50,765 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:31:50,765 - __main__ - INFO - ============================================================
2026-02-05 21:31:50,795 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:31:50,805 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:32:40,171 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-05 21:32:40,172 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-05 21:32:40,173 - __main__ - INFO - Document info: {'title': 'demo', 'version': '1.0'}
2026-02-05 21:32:40,173 - __main__ - DEBUG - PDF base64 length: 94
2026-02-05 21:32:40,173 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-05 21:32:40,173 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-05 21:32:40,174 - __main__ - DEBUG - PDF base64 length: 94 characters
2026-02-05 21:32:40,174 - __main__ - INFO - Calling Claude API...
2026-02-05 21:32:40,174 - __main__ - DEBUG - Model: claude-3-5-sonnet-20241022, Max tokens: 4096
2026-02-05 21:32:40,182 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 4096, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': ' "name": "bc_building_code_demo_rules_table_and_text-49b4c9ef-8ea3-4e05-b772-b5013d61b304.pdf"'}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract all building rules.\n        \nFor each rule, extract:\n- Rule title and description\n- Building types it applies to (residential, commercial, industrial, accessory, mixed)\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n- Any specific restrictions\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Full description",\n      "category": "dimensional|material|occupancy|safety|accessibility|structural|energy|fire",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nBe precise with numeric values and units. Extract all rules from the document.'}]}], 'model': 'claude-3-5-sonnet-20241022'}}
2026-02-05 21:32:40,384 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-05 21:32:40,385 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-05 21:32:40,409 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000204B1A2D8B0>
2026-02-05 21:32:40,410 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000204B1931AD0> server_hostname='api.anthropic.com' timeout=600
2026-02-05 21:32:40,440 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000204B19FB650>
2026-02-05 21:32:40,440 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-05 21:32:40,441 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-05 21:32:40,442 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-05 21:32:40,442 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-05 21:32:40,442 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-05 21:32:40,578 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Date', b'Fri, 06 Feb 2026 05:32:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'178'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'false'), (b'request-id', b'req_011CXrGYVURUQCQjcSBhejka'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'55'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'CF-RAY', b'9c9844b17813c5d5-YVR')])
2026-02-05 21:32:40,580 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 400 Bad Request"
2026-02-05 21:32:40,580 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-05 21:32:40,580 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-05 21:32:40,581 - httpcore.http11 - DEBUG - response_closed.started
2026-02-05 21:32:40,581 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-05 21:32:40,582 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "400 Bad Request" Headers({'date': 'Fri, 06 Feb 2026 05:32:40 GMT', 'content-type': 'application/json', 'content-length': '178', 'connection': 'keep-alive', 'x-should-retry': 'false', 'request-id': 'req_011CXrGYVURUQCQjcSBhejka', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '55', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'cf-ray': '9c9844b17813c5d5-YVR'})
2026-02-05 21:32:40,582 - anthropic._base_client - DEBUG - request_id: req_011CXrGYVURUQCQjcSBhejka
2026-02-05 21:32:40,583 - anthropic._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 1037, in _request
    response.raise_for_status()
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\httpx\_models.py", line 761, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2026-02-05 21:32:40,587 - anthropic._base_client - DEBUG - Not retrying as header `x-should-retry` is set to `false`
2026-02-05 21:32:40,588 - anthropic._base_client - DEBUG - Re-raising status error
2026-02-05 21:32:40,588 - __main__ - ERROR - Claude API error: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages.0.content.0.document.source.base64: Invalid base64 data'}, 'request_id': 'req_011CXrGYVURUQCQjcSBhejka'}
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 145, in extract_text_from_pdf_with_claude
    message = client.messages.create(
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\resources\messages.py", line 888, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 1277, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 954, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 1058, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages.0.content.0.document.source.base64: Invalid base64 data'}, 'request_id': 'req_011CXrGYVURUQCQjcSBhejka'}
2026-02-05 21:32:40,593 - __main__ - ERROR - Error in extract_rules: Claude API error: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages.0.content.0.document.source.base64: Invalid base64 data'}, 'request_id': 'req_011CXrGYVURUQCQjcSBhejka'}
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 145, in extract_text_from_pdf_with_claude
    message = client.messages.create(
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\resources\messages.py", line 888, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 1277, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 954, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 1058, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages.0.content.0.document.source.base64: Invalid base64 data'}, 'request_id': 'req_011CXrGYVURUQCQjcSBhejka'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 248, in extract_rules
    extracted_data = extract_text_from_pdf_with_claude(pdf_base64, 'rules')
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 193, in extract_text_from_pdf_with_claude
    raise Exception(f"Claude API error: {str(e)}")
Exception: Claude API error: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages.0.content.0.document.source.base64: Invalid base64 data'}, 'request_id': 'req_011CXrGYVURUQCQjcSBhejka'}
2026-02-05 21:32:40,598 - werkzeug - INFO - 127.0.0.1 - - [05/Feb/2026 21:32:40] "[35m[1mPOST /extract-rules HTTP/1.1[0m" 500 -
2026-02-05 21:33:48,722 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-05 21:33:48,950 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:33:50,515 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:33:50,523 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:33:50,523 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:33:50,523 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:33:50,533 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:33:51,345 - __main__ - INFO - ============================================================
2026-02-05 21:33:51,345 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:33:51,346 - __main__ - INFO - ============================================================
2026-02-05 21:33:51,411 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:33:51,431 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:34:00,659 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-05 21:34:00,859 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:34:02,354 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:34:02,354 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:34:02,354 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:34:02,354 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:34:02,363 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:34:02,907 - __main__ - INFO - ============================================================
2026-02-05 21:34:02,908 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:34:02,908 - __main__ - INFO - ============================================================
2026-02-05 21:34:02,932 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:34:02,941 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:35:39,904 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:35:39,904 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-05 21:35:39,904 - __main__ - INFO - Anthropic API key configured: No
2026-02-05 21:35:39,904 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:35:39,904 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:35:40,421 - __main__ - INFO - ============================================================
2026-02-05 21:35:40,421 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:35:40,421 - __main__ - INFO - ============================================================
2026-02-05 21:35:40,463 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-05 21:35:40,463 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-05 21:35:40,465 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:35:41,242 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:35:41,242 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:35:41,242 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:35:41,243 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:35:41,246 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:35:41,782 - __main__ - INFO - ============================================================
2026-02-05 21:35:41,782 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:35:41,782 - __main__ - INFO - ============================================================
2026-02-05 21:35:41,810 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:35:41,820 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:38:43,699 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-05 21:38:43,705 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-05 21:38:43,705 - __main__ - INFO - Document info: {'title': 'dewbb', 'version': '1.0'}
2026-02-05 21:38:43,705 - __main__ - DEBUG - PDF base64 length: 14530
2026-02-05 21:38:43,705 - __main__ - DEBUG - PDF base64 first 200 chars:  "name": "bc_building_code_demo_rules_table_and_text-68ebdf57-5d33-464a-9838-a9896c06b7da.pdf", "url": "data:application/pdf;base64,JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0
2026-02-05 21:38:43,705 - __main__ - ERROR - Invalid base64 encoding: Invalid base64-encoded string: number of data characters (77) cannot be 1 more than a multiple of 4
2026-02-05 21:38:43,709 - werkzeug - INFO - 127.0.0.1 - - [05/Feb/2026 21:38:43] "[31m[1mPOST /extract-rules HTTP/1.1[0m" 400 -
2026-02-05 21:39:49,007 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-05 21:39:49,656 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:39:51,619 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:39:51,620 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:39:51,621 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:39:51,622 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:39:51,656 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:39:52,518 - __main__ - INFO - ============================================================
2026-02-05 21:39:52,518 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:39:52,518 - __main__ - INFO - ============================================================
2026-02-05 21:39:52,573 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:39:52,594 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:40:06,682 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:40:06,683 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-05 21:40:06,683 - __main__ - INFO - Anthropic API key configured: No
2026-02-05 21:40:06,684 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:40:06,686 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:40:07,215 - __main__ - INFO - ============================================================
2026-02-05 21:40:07,215 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:40:07,216 - __main__ - INFO - ============================================================
2026-02-05 21:40:07,270 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-05 21:40:07,270 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-05 21:40:07,278 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:40:08,131 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:40:08,131 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:40:08,131 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:40:08,131 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:40:08,135 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:40:08,680 - __main__ - INFO - ============================================================
2026-02-05 21:40:08,680 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:40:08,680 - __main__ - INFO - ============================================================
2026-02-05 21:40:08,702 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:40:08,714 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:40:25,300 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-05 21:40:25,300 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-05 21:40:25,301 - __main__ - INFO - Document info: {'title': 'demo', 'version': '1.0'}
2026-02-05 21:40:25,301 - __main__ - DEBUG - PDF base64 length: 14530
2026-02-05 21:40:25,301 - __main__ - DEBUG - PDF base64 first 200 chars:  "name": "bc_building_code_demo_rules_table_and_text-badb1115-7f3e-4a95-a02b-d21009d4a15b.pdf", "url": "data:application/pdf;base64,JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0
2026-02-05 21:40:25,302 - __main__ - WARNING - PDF base64 appears to be JSON string, attempting to parse...
2026-02-05 21:40:25,302 - __main__ - WARNING - Failed to parse as JSON, treating as raw base64
2026-02-05 21:40:25,302 - __main__ - ERROR - Invalid base64 encoding: Invalid base64-encoded string: number of data characters (77) cannot be 1 more than a multiple of 4
2026-02-05 21:40:25,304 - werkzeug - INFO - 127.0.0.1 - - [05/Feb/2026 21:40:25] "[31m[1mPOST /extract-rules HTTP/1.1[0m" 400 -
2026-02-05 21:46:23,210 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:46:23,210 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-05 21:46:23,210 - __main__ - INFO - Anthropic API key configured: No
2026-02-05 21:46:23,210 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:46:23,226 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:46:23,754 - __main__ - INFO - ============================================================
2026-02-05 21:46:23,754 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:46:23,754 - __main__ - INFO - ============================================================
2026-02-05 21:46:23,858 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-05 21:46:23,858 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-05 21:46:23,861 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:46:24,758 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:46:24,758 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:46:24,758 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:46:24,759 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:46:24,762 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:46:25,266 - __main__ - INFO - ============================================================
2026-02-05 21:46:25,266 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:46:25,266 - __main__ - INFO - ============================================================
2026-02-05 21:46:25,289 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:46:25,301 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:46:28,927 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-05 21:46:28,929 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-05 21:46:28,929 - __main__ - INFO - Document info: {'title': 'ddewe', 'version': '1.0'}
2026-02-05 21:46:28,929 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-05 21:46:28,929 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-05 21:46:28,930 - __main__ - INFO - Base64 validation passed
2026-02-05 21:46:28,930 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-05 21:46:28,930 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-05 21:46:28,930 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-05 21:46:28,930 - __main__ - INFO - Calling Claude API...
2026-02-05 21:46:28,931 - __main__ - DEBUG - Model: claude-3-5-sonnet-20241022, Max tokens: 4096
2026-02-05 21:46:28,939 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 4096, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract all building rules.\n        \nFor each rule, extract:\n- Rule title and description\n- Building types it applies to (residential, commercial, industrial, accessory, mixed)\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n- Any specific restrictions\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Full description",\n      "category": "dimensional|material|occupancy|safety|accessibility|structural|energy|fire",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nBe precise with numeric values and units. Extract all rules from the document.'}]}], 'model': 'claude-3-5-sonnet-20241022'}}
2026-02-05 21:46:29,176 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-05 21:46:29,176 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-05 21:46:29,202 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000293D64D0620>
2026-02-05 21:46:29,203 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000293D6A69AD0> server_hostname='api.anthropic.com' timeout=600
2026-02-05 21:46:29,232 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000293D6AB3F50>
2026-02-05 21:46:29,233 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-05 21:46:29,234 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-05 21:46:29,234 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-05 21:46:29,235 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-05 21:46:29,235 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-05 21:46:29,384 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 06 Feb 2026 05:46:29 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'false'), (b'request-id', b'req_011CXrHbazG4gxnsWtzPRBXQ'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'64'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9858ed7d171c74-YVR')])
2026-02-05 21:46:29,384 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 404 Not Found"
2026-02-05 21:46:29,384 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-05 21:46:29,393 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-05 21:46:29,393 - httpcore.http11 - DEBUG - response_closed.started
2026-02-05 21:46:29,393 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-05 21:46:29,393 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "404 Not Found" Headers({'date': 'Fri, 06 Feb 2026 05:46:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'x-should-retry': 'false', 'request-id': 'req_011CXrHbazG4gxnsWtzPRBXQ', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '64', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9858ed7d171c74-YVR'})
2026-02-05 21:46:29,393 - anthropic._base_client - DEBUG - request_id: req_011CXrHbazG4gxnsWtzPRBXQ
2026-02-05 21:46:29,395 - anthropic._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 1037, in _request
    response.raise_for_status()
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\httpx\_models.py", line 761, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '404 Not Found' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2026-02-05 21:46:29,400 - anthropic._base_client - DEBUG - Not retrying as header `x-should-retry` is set to `false`
2026-02-05 21:46:29,401 - anthropic._base_client - DEBUG - Re-raising status error
2026-02-05 21:46:29,401 - __main__ - ERROR - Claude API error: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-3-5-sonnet-20241022'}, 'request_id': 'req_011CXrHbazG4gxnsWtzPRBXQ'}
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 145, in extract_text_from_pdf_with_claude
    message = client.messages.create(
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\resources\messages.py", line 888, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 1277, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 954, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 1058, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.NotFoundError: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-3-5-sonnet-20241022'}, 'request_id': 'req_011CXrHbazG4gxnsWtzPRBXQ'}
2026-02-05 21:46:29,406 - __main__ - ERROR - Error in extract_rules: Claude API error: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-3-5-sonnet-20241022'}, 'request_id': 'req_011CXrHbazG4gxnsWtzPRBXQ'}
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 145, in extract_text_from_pdf_with_claude
    message = client.messages.create(
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\resources\messages.py", line 888, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 1277, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 954, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\.venv\Lib\site-packages\anthropic\_base_client.py", line 1058, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.NotFoundError: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-3-5-sonnet-20241022'}, 'request_id': 'req_011CXrHbazG4gxnsWtzPRBXQ'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 316, in extract_rules
    extracted_data = extract_text_from_pdf_with_claude(pdf_base64, 'rules')
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 193, in extract_text_from_pdf_with_claude
    raise Exception(f"Claude API error: {str(e)}")
Exception: Claude API error: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-3-5-sonnet-20241022'}, 'request_id': 'req_011CXrHbazG4gxnsWtzPRBXQ'}
2026-02-05 21:46:29,409 - werkzeug - INFO - 127.0.0.1 - - [05/Feb/2026 21:46:29] "[35m[1mPOST /extract-rules HTTP/1.1[0m" 500 -
2026-02-05 21:47:27,457 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-05 21:47:27,672 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:47:28,938 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:47:28,939 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:47:28,939 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:47:28,940 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:47:28,942 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:47:29,625 - __main__ - INFO - ============================================================
2026-02-05 21:47:29,626 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:47:29,626 - __main__ - INFO - ============================================================
2026-02-05 21:47:29,659 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:47:29,671 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:47:37,847 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-05 21:47:37,990 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:47:39,136 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:47:39,140 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:47:39,141 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:47:39,142 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:47:39,142 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:47:39,850 - __main__ - INFO - ============================================================
2026-02-05 21:47:39,850 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:47:39,850 - __main__ - INFO - ============================================================
2026-02-05 21:47:39,882 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:47:39,897 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:48:04,249 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-05 21:48:04,358 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:48:05,424 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:48:05,425 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:48:05,425 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:48:05,425 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:48:05,425 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:48:05,970 - __main__ - INFO - ============================================================
2026-02-05 21:48:05,970 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:48:05,970 - __main__ - INFO - ============================================================
2026-02-05 21:48:05,995 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:48:06,006 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:48:12,542 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:48:12,542 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-05 21:48:12,542 - __main__ - INFO - Anthropic API key configured: No
2026-02-05 21:48:12,542 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:48:12,552 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:48:13,158 - __main__ - INFO - ============================================================
2026-02-05 21:48:13,158 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:48:13,158 - __main__ - INFO - ============================================================
2026-02-05 21:48:13,206 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-05 21:48:13,207 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-05 21:48:13,209 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:48:14,174 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:48:14,175 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:48:14,175 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:48:14,176 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:48:14,178 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:48:14,707 - __main__ - INFO - ============================================================
2026-02-05 21:48:14,707 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:48:14,707 - __main__ - INFO - ============================================================
2026-02-05 21:48:14,730 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:48:14,739 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:48:30,161 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-05 21:48:30,161 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-05 21:48:30,162 - __main__ - INFO - Document info: {'title': 'Deo', 'version': '1.0'}
2026-02-05 21:48:30,162 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-05 21:48:30,162 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-05 21:48:30,163 - __main__ - INFO - Base64 validation passed
2026-02-05 21:48:30,163 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-05 21:48:30,163 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-05 21:48:30,163 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-05 21:48:30,164 - __main__ - INFO - Calling Claude API...
2026-02-05 21:48:30,164 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 4096
2026-02-05 21:48:30,169 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 4096, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract all building rules.\n        \nFor each rule, extract:\n- Rule title and description\n- Building types it applies to (residential, commercial, industrial, accessory, mixed)\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n- Any specific restrictions\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Full description",\n      "category": "dimensional|material|occupancy|safety|accessibility|structural|energy|fire",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nBe precise with numeric values and units. Extract all rules from the document.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-05 21:48:30,314 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-05 21:48:30,315 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-05 21:48:30,333 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000023EE03C8650>
2026-02-05 21:48:30,334 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000023EE02C9AD0> server_hostname='api.anthropic.com' timeout=600
2026-02-05 21:48:30,361 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000023EDFFD5940>
2026-02-05 21:48:30,362 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-05 21:48:30,363 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-05 21:48:30,364 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-05 21:48:30,364 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-05 21:48:30,364 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-05 21:49:13,780 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 05:49:13 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T05:48:53Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T05:49:21Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T05:48:31Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'27000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T05:48:53Z'), (b'request-id', b'req_011CXrHkWtTCQmRURCH2RXou'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'43339'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c985be29d2afe54-YVR')])
2026-02-05 21:49:13,780 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-05 21:49:13,790 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-05 21:49:13,790 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-05 21:49:13,790 - httpcore.http11 - DEBUG - response_closed.started
2026-02-05 21:49:13,790 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-05 21:49:13,790 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 05:49:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T05:48:53Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T05:49:21Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T05:48:31Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '27000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T05:48:53Z', 'request-id': 'req_011CXrHkWtTCQmRURCH2RXou', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '43339', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c985be29d2afe54-YVR'})
2026-02-05 21:49:13,790 - anthropic._base_client - DEBUG - request_id: req_011CXrHkWtTCQmRURCH2RXou
2026-02-05 21:49:13,801 - __main__ - INFO - Claude API call successful
2026-02-05 21:49:13,801 - __main__ - DEBUG - Response usage - Input tokens: 11375, Output tokens: 4096
2026-02-05 21:49:13,802 - __main__ - DEBUG - Claude response length: 15354 characters
2026-02-05 21:49:13,803 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building Height Limit",
      "description": "A single-storey residential building shall not exceed a building heig...
2026-02-05 21:49:13,803 - __main__ - DEBUG - Extracted JSON string length: 15252 characters
2026-02-05 21:49:13,803 - __main__ - ERROR - Claude API error: Expecting ',' delimiter: line 392 column 6 (char 15252)
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 184, in extract_text_from_pdf_with_claude
    result = json.loads(json_str)
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 392 column 6 (char 15252)
2026-02-05 21:49:13,881 - __main__ - ERROR - Error in extract_rules: Claude API error: Expecting ',' delimiter: line 392 column 6 (char 15252)
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 184, in extract_text_from_pdf_with_claude
    result = json.loads(json_str)
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 392 column 6 (char 15252)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 316, in extract_rules
    extracted_data = extract_text_from_pdf_with_claude(pdf_base64, 'rules')
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 193, in extract_text_from_pdf_with_claude
    raise Exception(f"Claude API error: {str(e)}")
Exception: Claude API error: Expecting ',' delimiter: line 392 column 6 (char 15252)
2026-02-05 21:49:13,881 - werkzeug - INFO - 127.0.0.1 - - [05/Feb/2026 21:49:13] "[35m[1mPOST /extract-rules HTTP/1.1[0m" 500 -
2026-02-05 21:49:48,185 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-05 21:49:48,324 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:49:49,364 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:49:49,364 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:49:49,364 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:49:49,367 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:49:49,367 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:49:49,917 - __main__ - INFO - ============================================================
2026-02-05 21:49:49,917 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:49:49,917 - __main__ - INFO - ============================================================
2026-02-05 21:49:49,948 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:49:49,956 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:50:04,065 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:50:04,065 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-05 21:50:04,065 - __main__ - INFO - Anthropic API key configured: No
2026-02-05 21:50:04,066 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:50:04,069 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:50:04,566 - __main__ - INFO - ============================================================
2026-02-05 21:50:04,568 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:50:04,568 - __main__ - INFO - ============================================================
2026-02-05 21:50:04,604 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-05 21:50:04,604 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-05 21:50:04,607 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:50:05,411 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:50:05,411 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:50:05,411 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:50:05,412 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:50:05,414 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:50:05,903 - __main__ - INFO - ============================================================
2026-02-05 21:50:05,903 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:50:05,904 - __main__ - INFO - ============================================================
2026-02-05 21:50:05,926 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:50:05,934 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:50:16,936 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-05 21:50:16,937 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-05 21:50:16,937 - __main__ - INFO - Document info: {'title': 'demo', 'version': '1.0'}
2026-02-05 21:50:16,937 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-05 21:50:16,937 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-05 21:50:16,938 - __main__ - INFO - Base64 validation passed
2026-02-05 21:50:16,938 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-05 21:50:16,938 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-05 21:50:16,938 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-05 21:50:16,939 - __main__ - INFO - Calling Claude API...
2026-02-05 21:50:16,939 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 4096
2026-02-05 21:50:16,946 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 4096, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract all building rules.\n        \nFor each rule, extract:\n- Rule title and description\n- Building types it applies to (residential, commercial, industrial, accessory, mixed)\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n- Any specific restrictions\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Full description",\n      "category": "dimensional|material|occupancy|safety|accessibility|structural|energy|fire",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nBe precise with numeric values and units. Extract all rules from the document.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-05 21:50:17,078 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-05 21:50:17,078 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-05 21:50:17,135 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000137208F1460>
2026-02-05 21:50:17,136 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000137207F9A50> server_hostname='api.anthropic.com' timeout=600
2026-02-05 21:50:17,146 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001371F0F5430>
2026-02-05 21:50:17,146 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-05 21:50:17,146 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-05 21:50:17,146 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-05 21:50:17,146 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-05 21:50:17,152 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-05 21:51:00,754 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 05:51:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'21000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T05:50:40Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T05:51:08Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T05:50:18Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T05:50:40Z'), (b'request-id', b'req_011CXrHtPShgLfjrbb3Vb7vV'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'43507'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c985e7df9cb6951-YVR')])
2026-02-05 21:51:00,767 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-05 21:51:00,767 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-05 21:51:00,806 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-05 21:51:00,806 - httpcore.http11 - DEBUG - response_closed.started
2026-02-05 21:51:00,806 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-05 21:51:00,806 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 05:51:00 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '21000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T05:50:40Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T05:51:08Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T05:50:18Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T05:50:40Z', 'request-id': 'req_011CXrHtPShgLfjrbb3Vb7vV', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '43507', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c985e7df9cb6951-YVR'})
2026-02-05 21:51:00,806 - anthropic._base_client - DEBUG - request_id: req_011CXrHtPShgLfjrbb3Vb7vV
2026-02-05 21:51:00,830 - __main__ - INFO - Claude API call successful
2026-02-05 21:51:00,830 - __main__ - DEBUG - Response usage - Input tokens: 11375, Output tokens: 4095
2026-02-05 21:51:00,830 - __main__ - DEBUG - Claude response length: 15324 characters
2026-02-05 21:51:00,830 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building Height Limit",
      "description": "A single-storey residential building shall not exceed a building heig...
2026-02-05 21:51:00,833 - __main__ - INFO - Removing markdown code blocks from response
2026-02-05 21:51:00,834 - __main__ - DEBUG - Extracted JSON string length: 15006 characters
2026-02-05 21:51:00,834 - __main__ - ERROR - JSON parse error: Expecting ',' delimiter: line 380 column 6 (char 15006)
2026-02-05 21:51:00,834 - __main__ - ERROR - JSON string around error position: 7.5 m"
        }
      ],
      "tags": ["residential", "height", "two-storey", "BC-DEMO-004"]
    }
2026-02-05 21:51:00,835 - __main__ - INFO - Attempting to fix JSON...
2026-02-05 21:51:00,835 - __main__ - ERROR - Still failed after fix: Expecting ',' delimiter: line 380 column 6 (char 15006)
2026-02-05 21:51:00,835 - __main__ - ERROR - Claude API error: Invalid JSON from Claude: Expecting ',' delimiter: line 380 column 6 (char 15006)
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 193, in extract_text_from_pdf_with_claude
    result = json.loads(json_str)
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 380 column 6 (char 15006)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 207, in extract_text_from_pdf_with_claude
    result = json.loads(json_str_fixed)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 380 column 6 (char 15006)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 212, in extract_text_from_pdf_with_claude
    raise ValueError(f"Invalid JSON from Claude: {str(e)}")
ValueError: Invalid JSON from Claude: Expecting ',' delimiter: line 380 column 6 (char 15006)
2026-02-05 21:51:00,846 - __main__ - ERROR - Error in extract_rules: Claude API error: Invalid JSON from Claude: Expecting ',' delimiter: line 380 column 6 (char 15006)
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 193, in extract_text_from_pdf_with_claude
    result = json.loads(json_str)
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 380 column 6 (char 15006)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 207, in extract_text_from_pdf_with_claude
    result = json.loads(json_str_fixed)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 380 column 6 (char 15006)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 212, in extract_text_from_pdf_with_claude
    raise ValueError(f"Invalid JSON from Claude: {str(e)}")
ValueError: Invalid JSON from Claude: Expecting ',' delimiter: line 380 column 6 (char 15006)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 342, in extract_rules
    extracted_data = extract_text_from_pdf_with_claude(pdf_base64, 'rules')
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 219, in extract_text_from_pdf_with_claude
    raise Exception(f"Claude API error: {str(e)}")
Exception: Claude API error: Invalid JSON from Claude: Expecting ',' delimiter: line 380 column 6 (char 15006)
2026-02-05 21:51:00,853 - werkzeug - INFO - 127.0.0.1 - - [05/Feb/2026 21:51:00] "[35m[1mPOST /extract-rules HTTP/1.1[0m" 500 -
2026-02-05 21:51:36,595 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-05 21:51:36,874 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:51:38,271 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:51:38,271 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:51:38,278 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:51:38,278 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:51:38,281 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:51:38,961 - __main__ - INFO - ============================================================
2026-02-05 21:51:38,961 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:51:38,961 - __main__ - INFO - ============================================================
2026-02-05 21:51:38,991 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:51:39,008 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:51:43,123 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-05 21:51:43,242 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:51:44,375 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:51:44,375 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:51:44,375 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:51:44,376 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:51:44,379 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:51:44,949 - __main__ - INFO - ============================================================
2026-02-05 21:51:44,949 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:51:44,949 - __main__ - INFO - ============================================================
2026-02-05 21:51:44,990 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:51:45,004 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:51:55,183 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:51:55,183 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-05 21:51:55,183 - __main__ - INFO - Anthropic API key configured: No
2026-02-05 21:51:55,185 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:51:55,187 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:51:55,752 - __main__ - INFO - ============================================================
2026-02-05 21:51:55,753 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:51:55,753 - __main__ - INFO - ============================================================
2026-02-05 21:51:55,806 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-05 21:51:55,806 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-05 21:51:55,808 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:51:57,081 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:51:57,081 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:51:57,081 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:51:57,081 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:51:57,091 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:51:57,625 - __main__ - INFO - ============================================================
2026-02-05 21:51:57,627 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:51:57,627 - __main__ - INFO - ============================================================
2026-02-05 21:51:57,649 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:51:57,661 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:52:02,141 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-05 21:52:02,142 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-05 21:52:02,142 - __main__ - INFO - Document info: {'title': 'dasd', 'version': '1.0'}
2026-02-05 21:52:02,142 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-05 21:52:02,143 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-05 21:52:02,143 - __main__ - INFO - Base64 validation passed
2026-02-05 21:52:02,143 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-05 21:52:02,144 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-05 21:52:02,144 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-05 21:52:02,144 - __main__ - INFO - Calling Claude API...
2026-02-05 21:52:02,144 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-05 21:52:02,154 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-05 21:52:02,363 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-05 21:52:02,363 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-05 21:52:02,395 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022DEC881340>
2026-02-05 21:52:02,395 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000022DEC789A50> server_hostname='api.anthropic.com' timeout=600
2026-02-05 21:52:02,427 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022DEB3867B0>
2026-02-05 21:52:02,428 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-05 21:52:02,429 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-05 21:52:02,429 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-05 21:52:02,430 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-05 21:52:02,431 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-05 21:52:19,507 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 05:52:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'21000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T05:52:25Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T05:52:26Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T05:52:03Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T05:52:25Z'), (b'request-id', b'req_011CXrJ29byi5B7JWS86CJdj'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'16950'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c98610ffb6a4ad5-YVR')])
2026-02-05 21:52:19,511 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-05 21:52:19,511 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-05 21:52:19,511 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-05 21:52:19,511 - httpcore.http11 - DEBUG - response_closed.started
2026-02-05 21:52:19,511 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-05 21:52:19,511 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 05:52:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '21000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T05:52:25Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T05:52:26Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T05:52:03Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T05:52:25Z', 'request-id': 'req_011CXrJ29byi5B7JWS86CJdj', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '16950', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c98610ffb6a4ad5-YVR'})
2026-02-05 21:52:19,511 - anthropic._base_client - DEBUG - request_id: req_011CXrJ29byi5B7JWS86CJdj
2026-02-05 21:52:19,519 - __main__ - INFO - Claude API call successful
2026-02-05 21:52:19,522 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1306
2026-02-05 21:52:19,522 - __main__ - DEBUG - Claude response length: 4729 characters
2026-02-05 21:52:19,522 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Maximum height and floor area limits for single-storey residential buildings, meas...
2026-02-05 21:52:19,523 - __main__ - INFO - Removing markdown code blocks from response
2026-02-05 21:52:19,523 - __main__ - DEBUG - Extracted JSON string length: 4717 characters
2026-02-05 21:52:19,523 - __main__ - INFO - Successfully parsed JSON response
2026-02-05 21:52:19,523 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-05 21:52:19,524 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-05 21:52:19,525 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-05 21:52:19,525 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-05 21:52:19,525 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-05 21:52:19,526 - __main__ - DEBUG - Processing rule 3: BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-05 21:52:19,526 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-05 21:52:19,526 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-05 21:52:19,528 - werkzeug - INFO - 127.0.0.1 - - [05/Feb/2026 21:52:19] "POST /extract-rules HTTP/1.1" 200 -
2026-02-05 21:54:58,946 - __main__ - DEBUG - Health check requested
2026-02-05 21:54:58,946 - werkzeug - INFO - 127.0.0.1 - - [05/Feb/2026 21:54:58] "GET /health HTTP/1.1" 200 -
2026-02-05 21:55:03,030 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:55:03,030 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-05 21:55:03,030 - __main__ - INFO - Anthropic API key configured: No
2026-02-05 21:55:03,038 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:55:03,040 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:55:03,610 - __main__ - INFO - ============================================================
2026-02-05 21:55:03,610 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:55:03,610 - __main__ - INFO - ============================================================
2026-02-05 21:55:03,658 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-05 21:55:03,658 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-05 21:55:03,660 - werkzeug - INFO -  * Restarting with stat
2026-02-05 21:55:04,584 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-05 21:55:04,584 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-05 21:55:04,584 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-05 21:55:04,584 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-05 21:55:04,589 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-05 21:55:05,142 - __main__ - INFO - ============================================================
2026-02-05 21:55:05,142 - __main__ - INFO - Starting Flask application on port 5005
2026-02-05 21:55:05,142 - __main__ - INFO - ============================================================
2026-02-05 21:55:05,177 - werkzeug - WARNING -  * Debugger is active!
2026-02-05 21:55:05,190 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-05 21:55:14,599 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-05 21:55:14,599 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-05 21:55:14,600 - __main__ - INFO - Document info: {'title': 'dfasd', 'version': '1.0'}
2026-02-05 21:55:14,600 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-05 21:55:14,600 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-05 21:55:14,601 - __main__ - INFO - Base64 validation passed
2026-02-05 21:55:14,601 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-05 21:55:14,601 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-05 21:55:14,602 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-05 21:55:14,602 - __main__ - INFO - Calling Claude API...
2026-02-05 21:55:14,602 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-05 21:55:14,609 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-05 21:55:14,814 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-05 21:55:14,816 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-05 21:55:14,841 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002652FEC5190>
2026-02-05 21:55:14,842 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002652FDC9A50> server_hostname='api.anthropic.com' timeout=600
2026-02-05 21:55:14,861 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002652FB3F380>
2026-02-05 21:55:14,862 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-05 21:55:14,863 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-05 21:55:14,864 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-05 21:55:14,865 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-05 21:55:14,865 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-05 21:55:30,454 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 05:55:30 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T05:55:37Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T05:55:37Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T05:55:16Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'27000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T05:55:37Z'), (b'request-id', b'req_011CXrJGLK3ZDhgoYxoBRPUQ'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'15503'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9865c2b9f03753-YVR')])
2026-02-05 21:55:30,454 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-05 21:55:30,454 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-05 21:55:30,457 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-05 21:55:30,457 - httpcore.http11 - DEBUG - response_closed.started
2026-02-05 21:55:30,457 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-05 21:55:30,457 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 05:55:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T05:55:37Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T05:55:37Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T05:55:16Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '27000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T05:55:37Z', 'request-id': 'req_011CXrJGLK3ZDhgoYxoBRPUQ', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '15503', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9865c2b9f03753-YVR'})
2026-02-05 21:55:30,457 - anthropic._base_client - DEBUG - request_id: req_011CXrJGLK3ZDhgoYxoBRPUQ
2026-02-05 21:55:30,461 - __main__ - INFO - Claude API call successful
2026-02-05 21:55:30,461 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1304
2026-02-05 21:55:30,462 - __main__ - DEBUG - Claude response length: 4722 characters
2026-02-05 21:55:30,462 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Maximum height and floor area limits for single-storey residential buildings, meas...
2026-02-05 21:55:30,462 - __main__ - INFO - Removing markdown code blocks from response
2026-02-05 21:55:30,462 - __main__ - DEBUG - Extracted JSON string length: 4710 characters
2026-02-05 21:55:30,463 - __main__ - INFO - Successfully parsed JSON response
2026-02-05 21:55:30,463 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-05 21:55:30,464 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-05 21:55:30,464 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-05 21:55:30,464 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-05 21:55:30,464 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-05 21:55:30,465 - __main__ - DEBUG - Processing rule 3: BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-05 21:55:30,465 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-05 21:55:30,465 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-05 21:55:30,466 - werkzeug - INFO - 127.0.0.1 - - [05/Feb/2026 21:55:30] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 09:19:54,434 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 09:19:54,435 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-06 09:19:54,435 - __main__ - INFO - Anthropic API key configured: No
2026-02-06 09:19:54,435 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 09:19:54,437 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 09:19:54,767 - __main__ - INFO - ============================================================
2026-02-06 09:19:54,767 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 09:19:54,767 - __main__ - INFO - ============================================================
2026-02-06 09:19:54,975 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-06 09:19:54,975 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-06 09:19:54,980 - werkzeug - INFO -  * Restarting with stat
2026-02-06 09:19:55,541 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 09:19:55,541 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-06 09:19:55,541 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-06 09:19:55,541 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 09:19:55,541 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 09:19:55,852 - __main__ - INFO - ============================================================
2026-02-06 09:19:55,852 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 09:19:55,852 - __main__ - INFO - ============================================================
2026-02-06 09:19:55,870 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 09:19:55,876 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-06 09:40:58,899 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 09:40:58,909 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 09:40:58,910 - __main__ - INFO - Document info: {'title': 'demo', 'version': '1.0'}
2026-02-06 09:40:58,910 - __main__ - DEBUG - PDF base64 length: 0
2026-02-06 09:40:58,910 - __main__ - DEBUG - PDF base64 first 200 chars: 
2026-02-06 09:40:58,911 - __main__ - ERROR - PDF base64 data too short (0 chars). Likely not actual PDF data.
2026-02-06 09:40:58,911 - __main__ - ERROR - Received data: 
2026-02-06 09:40:58,919 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 09:40:58] "[31m[1mPOST /extract-rules HTTP/1.1[0m" 400 -
2026-02-06 10:27:00,162 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 10:27:00,167 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 10:27:00,167 - __main__ - INFO - Document info: {'title': 'sdad', 'version': '1.0'}
2026-02-06 10:27:00,167 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 10:27:00,167 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 10:27:00,171 - __main__ - INFO - Base64 validation passed
2026-02-06 10:27:00,171 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 10:27:00,171 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 10:27:00,171 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 10:27:00,171 - __main__ - INFO - Calling Claude API...
2026-02-06 10:27:00,171 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 10:27:00,229 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 10:27:00,420 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 10:27:00,420 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 10:27:00,482 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D34FE0>
2026-02-06 10:27:00,488 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 10:27:00,536 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002519D1D6600>
2026-02-06 10:27:00,538 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 10:27:00,538 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 10:27:00,538 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 10:27:00,538 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 10:27:00,538 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 10:27:18,763 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 18:27:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'21000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T18:27:24Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T18:27:24Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T18:27:02Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T18:27:24Z'), (b'request-id', b'req_011CXsHbJNdi8QNCpFpwxu6y'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'18132'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9cb2fbfdb223f4-YVR')])
2026-02-06 10:27:18,766 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 10:27:18,767 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 10:27:18,768 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 10:27:18,768 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 10:27:18,768 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 10:27:18,768 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 18:27:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '21000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T18:27:24Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T18:27:24Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T18:27:02Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T18:27:24Z', 'request-id': 'req_011CXsHbJNdi8QNCpFpwxu6y', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '18132', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9cb2fbfdb223f4-YVR'})
2026-02-06 10:27:18,769 - anthropic._base_client - DEBUG - request_id: req_011CXsHbJNdi8QNCpFpwxu6y
2026-02-06 10:27:18,783 - __main__ - INFO - Claude API call successful
2026-02-06 10:27:18,783 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1225
2026-02-06 10:27:18,783 - __main__ - DEBUG - Claude response length: 4499 characters
2026-02-06 10:27:18,784 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Maximum height and floor area limits for single-storey residential buildings measu...
2026-02-06 10:27:18,784 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 10:27:18,785 - __main__ - DEBUG - Extracted JSON string length: 4487 characters
2026-02-06 10:27:18,785 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 10:27:18,785 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 10:27:18,835 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-06 10:27:18,835 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 10:27:18,835 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-06 10:27:18,835 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 10:27:18,835 - __main__ - DEBUG - Processing rule 3: BC-DEMO-006  Maximum Building Footprint Calculation
2026-02-06 10:27:18,835 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 10:27:18,835 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 10:27:18,835 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 10:27:18] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 10:29:16,146 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 10:29:16,147 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 10:29:16,147 - __main__ - INFO - Document info: {'title': 'sad', 'version': '1.0'}
2026-02-06 10:29:16,147 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 10:29:16,147 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 10:29:16,147 - __main__ - INFO - Base64 validation passed
2026-02-06 10:29:16,147 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 10:29:16,147 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 10:29:16,148 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 10:29:16,148 - __main__ - INFO - Calling Claude API...
2026-02-06 10:29:16,148 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 10:29:16,169 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 10:29:16,169 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 10:29:16,169 - httpcore.connection - DEBUG - close.started
2026-02-06 10:29:16,169 - httpcore.connection - DEBUG - close.complete
2026-02-06 10:29:16,169 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 10:29:16,182 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D35490>
2026-02-06 10:29:16,182 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 10:29:16,201 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0C62750>
2026-02-06 10:29:16,202 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 10:29:16,203 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 10:29:16,204 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 10:29:16,204 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 10:29:16,204 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 10:30:25,241 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 18:30:25 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'25000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T18:30:24Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T18:30:32Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T18:29:18Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'32000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T18:30:24Z'), (b'request-id', b'req_011CXsHmJPQBuGSFj4zMBeUj'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'68954'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9cb64becedd939-YVR')])
2026-02-06 10:30:25,241 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 10:30:25,241 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 10:30:25,241 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 10:30:25,241 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 10:30:25,241 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 10:30:25,241 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 18:30:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '25000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T18:30:24Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T18:30:32Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T18:29:18Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '32000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T18:30:24Z', 'request-id': 'req_011CXsHmJPQBuGSFj4zMBeUj', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '68954', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9cb64becedd939-YVR'})
2026-02-06 10:30:25,241 - anthropic._base_client - DEBUG - request_id: req_011CXsHmJPQBuGSFj4zMBeUj
2026-02-06 10:30:25,241 - __main__ - INFO - Claude API call successful
2026-02-06 10:30:25,241 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1299
2026-02-06 10:30:25,241 - __main__ - DEBUG - Claude response length: 4686 characters
2026-02-06 10:30:25,241 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Dimensional limits for single-storey residential buildings including maximum heigh...
2026-02-06 10:30:25,251 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 10:30:25,251 - __main__ - DEBUG - Extracted JSON string length: 4674 characters
2026-02-06 10:30:25,251 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 10:30:25,251 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 10:30:25,252 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-06 10:30:25,252 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 10:30:25,252 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-06 10:30:25,252 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 10:30:25,252 - __main__ - DEBUG - Processing rule 3: BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 10:30:25,252 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 10:30:25,252 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 10:30:25,252 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 10:30:25] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 10:38:26,086 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 10:38:26,087 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 10:38:26,087 - __main__ - INFO - Document info: {'title': 'demo', 'version': '1.0'}
2026-02-06 10:38:26,088 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 10:38:26,088 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 10:38:26,088 - __main__ - INFO - Base64 validation passed
2026-02-06 10:38:26,088 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 10:38:26,088 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 10:38:26,088 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 10:38:26,088 - __main__ - INFO - Calling Claude API...
2026-02-06 10:38:26,089 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 10:38:26,091 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 10:38:26,093 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 10:38:26,094 - httpcore.connection - DEBUG - close.started
2026-02-06 10:38:26,094 - httpcore.connection - DEBUG - close.complete
2026-02-06 10:38:26,095 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 10:38:26,110 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D59F10>
2026-02-06 10:38:26,110 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 10:38:26,122 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D59E20>
2026-02-06 10:38:26,122 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 10:38:26,122 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 10:38:26,122 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 10:38:26,122 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 10:38:26,122 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 10:38:45,703 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 18:38:46 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'21000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T18:38:49Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T18:38:50Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T18:38:28Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T18:38:49Z'), (b'request-id', b'req_011CXsJTqZzy1bxSnS6Jgiqk'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'19499'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9cc3b8fc4bf573-YVR')])
2026-02-06 10:38:45,703 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 10:38:45,703 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 10:38:45,724 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 10:38:45,724 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 10:38:45,724 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 10:38:45,725 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 18:38:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '21000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T18:38:49Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T18:38:50Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T18:38:28Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T18:38:49Z', 'request-id': 'req_011CXsJTqZzy1bxSnS6Jgiqk', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '19499', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9cc3b8fc4bf573-YVR'})
2026-02-06 10:38:45,726 - anthropic._base_client - DEBUG - request_id: req_011CXsJTqZzy1bxSnS6Jgiqk
2026-02-06 10:38:45,726 - __main__ - INFO - Claude API call successful
2026-02-06 10:38:45,727 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1220
2026-02-06 10:38:45,727 - __main__ - DEBUG - Claude response length: 4476 characters
2026-02-06 10:38:45,727 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Maximum height and floor area limits for single-storey residential buildings, meas...
2026-02-06 10:38:45,727 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 10:38:45,727 - __main__ - DEBUG - Extracted JSON string length: 4464 characters
2026-02-06 10:38:45,728 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 10:38:45,728 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 10:38:45,728 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-06 10:38:45,728 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 10:38:45,728 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-06 10:38:45,728 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 10:38:45,729 - __main__ - DEBUG - Processing rule 3: BC-DEMO-006  Maximum Building Footprint Calculation
2026-02-06 10:38:45,729 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 10:38:45,729 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 10:38:45,731 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 10:38:45] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 10:47:27,154 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 10:47:27,157 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 10:47:27,157 - __main__ - INFO - Document info: {'title': 'sadasd', 'version': '1.0'}
2026-02-06 10:47:27,157 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 10:47:27,157 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 10:47:27,158 - __main__ - INFO - Base64 validation passed
2026-02-06 10:47:27,158 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 10:47:27,158 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 10:47:27,158 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 10:47:27,159 - __main__ - INFO - Calling Claude API...
2026-02-06 10:47:27,159 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 10:47:27,160 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 10:47:27,160 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 10:47:27,160 - httpcore.connection - DEBUG - close.started
2026-02-06 10:47:27,165 - httpcore.connection - DEBUG - close.complete
2026-02-06 10:47:27,165 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 10:47:27,176 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D68EF0>
2026-02-06 10:47:27,176 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 10:47:27,196 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D68C50>
2026-02-06 10:47:27,196 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 10:47:27,196 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 10:47:27,196 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 10:47:27,196 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 10:47:27,196 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 10:47:45,654 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 18:47:46 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'21000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T18:47:50Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T18:47:52Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T18:47:29Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T18:47:50Z'), (b'request-id', b'req_011CXsK9ivWapRBYoX38DumE'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'18318'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9cd0eeba4d23f4-YVR')])
2026-02-06 10:47:45,655 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 10:47:45,655 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 10:47:45,655 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 10:47:45,655 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 10:47:45,655 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 10:47:45,655 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 18:47:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '21000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T18:47:50Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T18:47:52Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T18:47:29Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T18:47:50Z', 'request-id': 'req_011CXsK9ivWapRBYoX38DumE', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '18318', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9cd0eeba4d23f4-YVR'})
2026-02-06 10:47:45,655 - anthropic._base_client - DEBUG - request_id: req_011CXsK9ivWapRBYoX38DumE
2026-02-06 10:47:45,655 - __main__ - INFO - Claude API call successful
2026-02-06 10:47:45,655 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1388
2026-02-06 10:47:45,655 - __main__ - DEBUG - Claude response length: 5072 characters
2026-02-06 10:47:45,655 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Maximum height and floor area limits for single-storey residential buildings, meas...
2026-02-06 10:47:45,655 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 10:47:45,655 - __main__ - DEBUG - Extracted JSON string length: 5060 characters
2026-02-06 10:47:45,655 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 10:47:45,655 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 10:47:45,655 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-06 10:47:45,655 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 10:47:45,655 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-06 10:47:45,655 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 10:47:45,655 - __main__ - DEBUG - Processing rule 3: BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 10:47:45,655 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 10:47:45,655 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 10:47:45,661 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 10:47:45] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 10:50:55,615 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 10:50:55,616 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 10:50:55,616 - __main__ - INFO - Document info: {'title': 'Ddasd', 'version': '1.0'}
2026-02-06 10:50:55,616 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 10:50:55,616 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 10:50:55,617 - __main__ - INFO - Base64 validation passed
2026-02-06 10:50:55,617 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 10:50:55,617 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 10:50:55,617 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 10:50:55,617 - __main__ - INFO - Calling Claude API...
2026-02-06 10:50:55,617 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 10:50:55,620 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 10:50:55,623 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 10:50:55,624 - httpcore.connection - DEBUG - close.started
2026-02-06 10:50:55,624 - httpcore.connection - DEBUG - close.complete
2026-02-06 10:50:55,624 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 10:50:55,646 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0C28DA0>
2026-02-06 10:50:55,647 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 10:50:55,652 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D59D30>
2026-02-06 10:50:55,652 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 10:50:55,652 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 10:50:55,652 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 10:50:55,652 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 10:50:55,652 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 10:51:11,518 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 18:51:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T18:51:19Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T18:51:19Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T18:50:57Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'27000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T18:51:19Z'), (b'request-id', b'req_011CXsKR6CbsonFHPemb7xLt'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'15773'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9cd6059f408d3e-YVR')])
2026-02-06 10:51:11,518 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 10:51:11,518 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 10:51:11,518 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 10:51:11,518 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 10:51:11,518 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 10:51:11,518 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 18:51:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T18:51:19Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T18:51:19Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T18:50:57Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '27000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T18:51:19Z', 'request-id': 'req_011CXsKR6CbsonFHPemb7xLt', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '15773', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9cd6059f408d3e-YVR'})
2026-02-06 10:51:11,518 - anthropic._base_client - DEBUG - request_id: req_011CXsKR6CbsonFHPemb7xLt
2026-02-06 10:51:11,518 - __main__ - INFO - Claude API call successful
2026-02-06 10:51:11,518 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1306
2026-02-06 10:51:11,527 - __main__ - DEBUG - Claude response length: 4733 characters
2026-02-06 10:51:11,527 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Maximum height and floor area limits for single-storey residential buildings, meas...
2026-02-06 10:51:11,539 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 10:51:11,539 - __main__ - DEBUG - Extracted JSON string length: 4721 characters
2026-02-06 10:51:11,539 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 10:51:11,539 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 10:51:11,539 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-06 10:51:11,539 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 10:51:11,539 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-06 10:51:11,543 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 10:51:11,543 - __main__ - DEBUG - Processing rule 3: BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 10:51:11,544 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 10:51:11,544 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 10:51:11,545 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 10:51:11] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 10:53:49,045 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 10:53:49,046 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 10:53:49,046 - __main__ - INFO - Document info: {'title': 'asdsd', 'version': '1.0'}
2026-02-06 10:53:49,046 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 10:53:49,046 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 10:53:49,047 - __main__ - INFO - Base64 validation passed
2026-02-06 10:53:49,047 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 10:53:49,047 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 10:53:49,047 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 10:53:49,047 - __main__ - INFO - Calling Claude API...
2026-02-06 10:53:49,047 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 10:53:49,050 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 10:53:49,051 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 10:53:49,052 - httpcore.connection - DEBUG - close.started
2026-02-06 10:53:49,053 - httpcore.connection - DEBUG - close.complete
2026-02-06 10:53:49,053 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 10:53:49,059 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D68920>
2026-02-06 10:53:49,059 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 10:53:49,070 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D68800>
2026-02-06 10:53:49,070 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 10:53:49,070 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 10:53:49,070 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 10:53:49,070 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 10:53:49,070 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 10:54:04,528 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 18:54:05 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T18:54:12Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T18:54:11Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T18:53:51Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'27000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T18:54:11Z'), (b'request-id', b'req_011CXsKdsdv3p6HidCPfiKhr'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'15358'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9cda417834a57d-YVR')])
2026-02-06 10:54:04,528 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 10:54:04,528 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 10:54:04,532 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 10:54:04,532 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 10:54:04,532 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 10:54:04,532 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 18:54:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T18:54:12Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T18:54:11Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T18:53:51Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '27000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T18:54:11Z', 'request-id': 'req_011CXsKdsdv3p6HidCPfiKhr', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '15358', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9cda417834a57d-YVR'})
2026-02-06 10:54:04,532 - anthropic._base_client - DEBUG - request_id: req_011CXsKdsdv3p6HidCPfiKhr
2026-02-06 10:54:04,539 - __main__ - INFO - Claude API call successful
2026-02-06 10:54:04,539 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1291
2026-02-06 10:54:04,539 - __main__ - DEBUG - Claude response length: 4692 characters
2026-02-06 10:54:04,540 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "Single-Storey Residential Building Limits",
      "description": "Maximum height and floor area limits for single-storey residential buildings, measured fr...
2026-02-06 10:54:04,540 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 10:54:04,540 - __main__ - DEBUG - Extracted JSON string length: 4680 characters
2026-02-06 10:54:04,541 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 10:54:04,541 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 10:54:04,541 - __main__ - DEBUG - Processing rule 1: Single-Storey Residential Building Limits
2026-02-06 10:54:04,541 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 10:54:04,541 - __main__ - DEBUG - Processing rule 2: Two-Storey Residential Building Limits
2026-02-06 10:54:04,541 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 10:54:04,543 - __main__ - DEBUG - Processing rule 3: Mixed-Use Building Limits
2026-02-06 10:54:04,543 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 10:54:04,543 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 10:54:04,543 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 10:54:04] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 10:56:52,974 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 10:56:52,975 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 10:56:52,975 - __main__ - INFO - Document info: {'title': 'sadas', 'version': '1.0'}
2026-02-06 10:56:52,976 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 10:56:52,976 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 10:56:52,976 - __main__ - INFO - Base64 validation passed
2026-02-06 10:56:52,977 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 10:56:52,977 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 10:56:52,977 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 10:56:52,977 - __main__ - INFO - Calling Claude API...
2026-02-06 10:56:52,977 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 10:56:52,980 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 10:56:52,981 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 10:56:52,981 - httpcore.connection - DEBUG - close.started
2026-02-06 10:56:52,982 - httpcore.connection - DEBUG - close.complete
2026-02-06 10:56:52,982 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 10:56:52,996 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D71340>
2026-02-06 10:56:52,996 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 10:56:53,012 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D71250>
2026-02-06 10:56:53,012 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 10:56:53,012 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 10:56:53,012 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 10:56:53,012 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 10:56:53,012 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 10:57:09,959 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 18:57:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T18:57:16Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T18:57:17Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T18:56:54Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'27000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T18:57:16Z'), (b'request-id', b'req_011CXsKsS5ugcLzWVxb29rLw'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'16859'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9cdebf1eb357e1-YVR')])
2026-02-06 10:57:09,959 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 10:57:09,959 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 10:57:09,968 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 10:57:09,968 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 10:57:09,968 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 10:57:09,969 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 18:57:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T18:57:16Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T18:57:17Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T18:56:54Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '27000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T18:57:16Z', 'request-id': 'req_011CXsKsS5ugcLzWVxb29rLw', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '16859', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9cdebf1eb357e1-YVR'})
2026-02-06 10:57:09,969 - anthropic._base_client - DEBUG - request_id: req_011CXsKsS5ugcLzWVxb29rLw
2026-02-06 10:57:09,969 - __main__ - INFO - Claude API call successful
2026-02-06 10:57:09,971 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1306
2026-02-06 10:57:09,971 - __main__ - DEBUG - Claude response length: 4727 characters
2026-02-06 10:57:09,972 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Maximum height and floor area limits for single-storey residential buildings, meas...
2026-02-06 10:57:09,972 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 10:57:09,972 - __main__ - DEBUG - Extracted JSON string length: 4715 characters
2026-02-06 10:57:09,972 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 10:57:09,972 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 10:57:09,972 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-06 10:57:09,972 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 10:57:09,972 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-06 10:57:09,974 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 10:57:09,974 - __main__ - DEBUG - Processing rule 3: BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 10:57:09,974 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 10:57:09,974 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 10:57:09,985 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 10:57:09] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 11:23:32,917 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 11:23:32,924 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 11:23:32,924 - __main__ - INFO - Document info: {'title': 'Demo', 'version': '1.0'}
2026-02-06 11:23:32,927 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 11:23:32,927 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 11:23:32,927 - __main__ - INFO - Base64 validation passed
2026-02-06 11:23:32,928 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 11:23:32,928 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 11:23:32,929 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 11:23:32,929 - __main__ - INFO - Calling Claude API...
2026-02-06 11:23:32,929 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 11:23:32,944 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 11:23:32,950 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 11:23:32,952 - httpcore.connection - DEBUG - close.started
2026-02-06 11:23:32,965 - httpcore.connection - DEBUG - close.complete
2026-02-06 11:23:32,966 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 11:23:32,983 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D5A030>
2026-02-06 11:23:32,984 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 11:23:33,018 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D35B50>
2026-02-06 11:23:33,018 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 11:23:33,018 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 11:23:33,018 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 11:23:33,021 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 11:23:33,021 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 11:23:53,653 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 19:23:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'22000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T19:23:56Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T19:24:00Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T19:23:34Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'29000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T19:23:56Z'), (b'request-id', b'req_011CXsMuNryV1Qrq1oqLHuo3'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'20552'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9d05cf4c80d9c8-YVR')])
2026-02-06 11:23:53,660 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 11:23:53,661 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 11:23:53,661 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 11:23:53,661 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 11:23:53,661 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 11:23:53,661 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 19:23:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '22000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T19:23:56Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T19:24:00Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T19:23:34Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '29000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T19:23:56Z', 'request-id': 'req_011CXsMuNryV1Qrq1oqLHuo3', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '20552', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9d05cf4c80d9c8-YVR'})
2026-02-06 11:23:53,661 - anthropic._base_client - DEBUG - request_id: req_011CXsMuNryV1Qrq1oqLHuo3
2026-02-06 11:23:53,669 - __main__ - INFO - Claude API call successful
2026-02-06 11:23:53,669 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1313
2026-02-06 11:23:53,669 - __main__ - DEBUG - Claude response length: 4759 characters
2026-02-06 11:23:53,669 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Maximum height and floor area limits for single-storey residential buildings, meas...
2026-02-06 11:23:53,670 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 11:23:53,670 - __main__ - DEBUG - Extracted JSON string length: 4747 characters
2026-02-06 11:23:53,670 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 11:23:53,670 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 11:23:53,671 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-06 11:23:53,671 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 11:23:53,671 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-06 11:23:53,671 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 11:23:53,672 - __main__ - DEBUG - Processing rule 3: BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 11:23:53,672 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 11:23:53,672 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 11:23:53,672 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 11:23:53] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 11:25:27,091 - __main__ - INFO - === Save Rules Request Received ===
2026-02-06 11:25:27,093 - __main__ - DEBUG - Request data keys: ['rules', 'mode', 'updated_by']
2026-02-06 11:25:27,093 - __main__ - INFO - Save mode: append, Updated by: admin
2026-02-06 11:25:27,093 - __main__ - INFO - Number of rules to save: 3
2026-02-06 11:25:27,102 - __main__ - DEBUG - Rules file path: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 11:25:27,103 - __main__ - INFO - Loading existing rules file
2026-02-06 11:25:27,132 - __main__ - DEBUG - Existing rules count: 3
2026-02-06 11:25:27,132 - __main__ - INFO - Appending/updating rules
2026-02-06 11:25:27,133 - __main__ - DEBUG - Existing rule IDs: {'RULE-000003', 'RULE-000002', 'RULE-000001'}
2026-02-06 11:25:27,133 - __main__ - DEBUG - Updating existing rule: RULE-000001
2026-02-06 11:25:27,133 - __main__ - DEBUG - Updating existing rule: RULE-000002
2026-02-06 11:25:27,133 - __main__ - DEBUG - Updating existing rule: RULE-000003
2026-02-06 11:25:27,136 - __main__ - INFO - Updated metadata - Total: 3, Active: 3
2026-02-06 11:25:27,136 - __main__ - DEBUG - Source documents: ['DOC-20260206-001', 'DOC-20260206-002', 'DOC-20260206-003']
2026-02-06 11:25:27,136 - __main__ - INFO - Writing rules to file: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 11:25:27,139 - __main__ - INFO - Rules saved successfully
2026-02-06 11:25:27,141 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 11:25:27] "POST /save-rules HTTP/1.1" 200 -
2026-02-06 11:25:27,793 - __main__ - INFO - === Save Rules Request Received ===
2026-02-06 11:25:27,794 - __main__ - DEBUG - Request data keys: ['rules', 'mode', 'updated_by']
2026-02-06 11:25:27,794 - __main__ - INFO - Save mode: append, Updated by: admin
2026-02-06 11:25:27,794 - __main__ - INFO - Number of rules to save: 3
2026-02-06 11:25:27,794 - __main__ - DEBUG - Rules file path: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 11:25:27,794 - __main__ - INFO - Loading existing rules file
2026-02-06 11:25:27,807 - __main__ - DEBUG - Existing rules count: 3
2026-02-06 11:25:27,807 - __main__ - INFO - Appending/updating rules
2026-02-06 11:25:27,807 - __main__ - DEBUG - Existing rule IDs: {'RULE-000003', 'RULE-000002', 'RULE-000001'}
2026-02-06 11:25:27,808 - __main__ - DEBUG - Updating existing rule: RULE-000001
2026-02-06 11:25:27,808 - __main__ - DEBUG - Updating existing rule: RULE-000002
2026-02-06 11:25:27,808 - __main__ - DEBUG - Updating existing rule: RULE-000003
2026-02-06 11:25:27,809 - __main__ - INFO - Updated metadata - Total: 3, Active: 3
2026-02-06 11:25:27,809 - __main__ - DEBUG - Source documents: ['DOC-20260206-001', 'DOC-20260206-002', 'DOC-20260206-003']
2026-02-06 11:25:27,809 - __main__ - INFO - Writing rules to file: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 11:25:27,811 - __main__ - INFO - Rules saved successfully
2026-02-06 11:25:27,811 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 11:25:27] "POST /save-rules HTTP/1.1" 200 -
2026-02-06 11:25:28,127 - __main__ - INFO - === Save Rules Request Received ===
2026-02-06 11:25:28,127 - __main__ - DEBUG - Request data keys: ['rules', 'mode', 'updated_by']
2026-02-06 11:25:28,127 - __main__ - INFO - Save mode: append, Updated by: admin
2026-02-06 11:25:28,127 - __main__ - INFO - Number of rules to save: 3
2026-02-06 11:25:28,128 - __main__ - DEBUG - Rules file path: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 11:25:28,128 - __main__ - INFO - Loading existing rules file
2026-02-06 11:25:28,138 - __main__ - DEBUG - Existing rules count: 3
2026-02-06 11:25:28,140 - __main__ - INFO - Appending/updating rules
2026-02-06 11:25:28,140 - __main__ - DEBUG - Existing rule IDs: {'RULE-000003', 'RULE-000002', 'RULE-000001'}
2026-02-06 11:25:28,140 - __main__ - DEBUG - Updating existing rule: RULE-000001
2026-02-06 11:25:28,140 - __main__ - DEBUG - Updating existing rule: RULE-000002
2026-02-06 11:25:28,140 - __main__ - DEBUG - Updating existing rule: RULE-000003
2026-02-06 11:25:28,140 - __main__ - INFO - Updated metadata - Total: 3, Active: 3
2026-02-06 11:25:28,140 - __main__ - DEBUG - Source documents: ['DOC-20260206-001', 'DOC-20260206-002', 'DOC-20260206-003']
2026-02-06 11:25:28,141 - __main__ - INFO - Writing rules to file: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 11:25:28,142 - __main__ - INFO - Rules saved successfully
2026-02-06 11:25:28,142 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 11:25:28] "POST /save-rules HTTP/1.1" 200 -
2026-02-06 12:44:44,674 - __main__ - INFO - === Extract Permit Request Received ===
2026-02-06 12:44:44,678 - __main__ - DEBUG - Request data keys: ['pdf_base64']
2026-02-06 12:44:44,678 - __main__ - DEBUG - PDF base64 length: 14684
2026-02-06 12:44:44,678 - __main__ - INFO - Starting permit extraction with Claude...
2026-02-06 12:44:44,678 - __main__ - INFO - Starting PDF extraction - Type: permit
2026-02-06 12:44:44,678 - __main__ - DEBUG - PDF base64 length: 14684 characters
2026-02-06 12:44:44,678 - __main__ - INFO - Calling Claude API...
2026-02-06 12:44:44,678 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 12:44:44,708 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDYgMCBSIC9GNSAxMSAwIFIKPj4KZW5kb2JqCjIgMCBvYmoKPDwKL0Jhc2VGb250IC9IZWx2ZXRpY2EgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YxIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKMyAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL0NvbnRlbnRzIDE2IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjUgMCBvYmoKPDwKL0Jhc2VGb250IC9aYXBmRGluZ2JhdHMgL05hbWUgL0YzIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE3IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9Db250ZW50cyAyMCAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE1IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkT2JsaXF1ZSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjUgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagoxMiAwIG9iago8PAovQ29udGVudHMgMjEgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNSAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTMgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNSAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE0IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTUgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA3IDAgUiA4IDAgUiA5IDAgUiAxMCAwIFIgMTIgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNiAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxMjIwCj4+CnN0cmVhbQpHYXUxLTswMUdOJkJFXSgnYDFFXmZUZyIjaS1UM2hqPGRxcEMjSUYtJVBOXGtXKT9oSFo6VGRoSWstLVgiUUVhOUVzI3AyL2FgT1xwInUjXyZIJ29HKVBtSDQpMTkpbzVULmNdNWU1J0gyTS51NGxgITxzLDZKIVFDJ1djVCFcT1FwQSFTXjo4R0JQNFM9Wkd1IylsYlJOKi5yJmYrISolRnIhSFc1Q2lgOi0qYmxrUXEzRkAhXFJRVDZxKmhIUkQrNCksS3I/JUYiZGJAXj5lO10saj1zMSs+KyQuJTBMa1BxXTZTRD1HInA1TixmPzZiQkBQdE9mZj1CTF1kOEI6bzUrWGRFLSFMWiVrRTBGciQsRD48RSpDcSMlPUReQCh1OmwjS2w1NEw+OypSKGV0MCcoRCQnKWRRIk8qb1olM1NDMCNaKE51NG02UTtSUjZTU3I5MGEsPzQsQFUtJGMsLytlVF8oKkpBM0ohQC9uWD4jWydVPzIqaj0jdEMmWSZfYEA3VCY/V2oxSSg0Qk1XbHFcVGo9UHNgV0gyI0Q0RFpMJmtCbDFHMTg2KTZjXjdjcmNGMVJwVUNcX0FoX0pJJFJKQWw9N2tdS09OW3FpKWlbMVw8RzJVMUswYFdnKVpaM0IkYVc1c28xYzA8Ki9qZGc2aHJ1bGVwSFhsalFLMXRIXj1cJTQlQDRacGpSQidIVDZBYWQ9cl9vZUckQktzIjVkO2ppIU4yY0ltQENBNUk8QmQ3Rl07L1hfM2pXRWotYTdNYjdJPWovTSQpUUYuXXU/XDw2MFAqOGMzbl9TQFs7QzBGQV1ZTVRMYF07KjJYXTUoP1NDKkw2Pk8iY2dFMTxFU0ZebDtaMi05Xlg5a0xwL1JdXSkkRGBpVjEnRzM3NCNZcywybDcrbCw4OSc/X0M3Q2xeX0VeQGxHRD41SUwhYHIrU0ZVKy9qQGNdOW5AXmQsLTFrYTgxTF5NbnNvMVllOWdrZllJVEBeJXIqTE8/PEg8Q1g3b2JwK2laPFonblQ9VVhlWFlLdGxQPERPNl1HNFUkVjVabGgpQm1sQ1EuV2U8MTYuQDxvMj85b09EWHFtayZENU1sWF84XFFraTA2VTllYj0qUGRbK15AciloPERaPzFSakk+aVZVJnBmaElccz4/XCVWQiVcWiRsbGFgRXNZPlMnQFdGcGtTRS47JjpJIVMqOzdUUiInSSEtYDNiS3JxYFFzKSJBLEFhTWtVYHVmMDFZTHQmU0FDT0hESk0oTlw7cy5BM1leLixmNkozR3Mnc3FwWHFgY08pVmRPVUFaSzVyQlY6WXNlXCVzSTtUXShaJGQ+S3BuakxLLWkxRi1tUTlFK2AyVihETzc9cmM5TyxSODUwRGVVSWknLGAubyYiPWlTQHU1RTp1UkZoSiQ6KEI2R3JjSGA1XmNmRWQhcUptcS1mOjdPVz8pUkleZWg7ODVcMzBeOzpVYE1xSV5BKHNmWWpNSVgxWi5vRkRDbzI3aFloLkBsPVVNPjVgVjMmOSw8VzpHOm9CQVdWdF5tI2hxJyZQYWxgKEhuSShSLiFabkcmNi91IjkxJlFJJmYnYyY8SCI2IiVTOzRmdENvXE9acnJCXUApOGx+PmVuZHN0cmVhbQplbmRvYmoKMTcgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTQzOQo+PgpzdHJlYW0KR2F0bTs+QmYnYiY6V2VEYlktOCpIUFdgK25MXFtLPjslQG4tR2NWSTZYR0VYaTcsMmtDcjU+bEdAVlpJVW1QXUlfdVtlaTdjM3JTRjtaSmRwc0E6aGMyYy02cGk4ZlMxNUhdMiJWRDtPX2R0Wk4pVVpSUkYyNF4pKS9UaXAjM14uLjFObVwsM0Q8XVRtbENrOiIvQjZiXSdIbnBqVHJvKS9ZaVZLTDJbUiJCQWpdNj90MnNpZicnTG9lL1piVj9CZiU4UVxqI0g2QnM7dE1cQ21mK281X1BoLFZBZVIhRjddUkkvcj1NYUshRCdxL1hbU0VfaCUoYUliME1HJmIzZic5VVxdcGFQcUNDRS46XTIuSTwwYjotUV4uZCdmPiYnZz1pKkkvPz5pZk5AO24xSlsxclw9SDFkLys1Xm1gMUJeKWJba0d0W2BxJ3NVP11RSFNNaSY9aDhxK0lKZi9MJGtXR2lWNkFrTHBmIm87bHBpWStpaCxBQz83bWRoIjZpVylzKzp1YXFgIidQam8qJWZFQi5AXmV1KV08IThxXEpzRlVxSERXLEJQVW5hX21CZWhnUy5cPjJyMllXRUtPOmQtJydoWVxsT3FZLGZ0cDpUakNdbEI3T2FfKFxePEdnbkc/OCg5VlNyby5lPlk1TzdmaDdhQ1NlJT9HXW04R1heT19EdDpIP2U8UURJODtdUDtAZ2NwS1dMdWZEQ25nT0NkYEF1IWVSQEBBUSojKkFePUBObj1XISFJaXI1SWkpOF9QSDNIQEtSPCo9TmFwRGB1PzA5TFM8UzhGRjJEV2c0YT4kQGFYYFVJJTszRlp1cEdEUFgwYy1fKyQzWUcsSiElKENsOXRnPVRUdTxrYUI1W1RMM0hPSlopdGleXm0oOyNNZW1NKCkna2MqZi9ObU1gMFNgaEdqLUZxTkcwYzlYN1gsSmZtUTlOW2FFNDBlYSJaSGE/TmI2Y0ZLUj9oZjFEOW1MQkcmKiNuJzJKNT9rJUJgJ3I+TW4pcWFaVkJhZm5tb1NRKUNwS0hhRyJeQks3a3BbYWs5TD1jMk4vLWgmdSJLM0lkZiR0QkVTIU5FcVhILStIOy8ibG8rKE4oJTNxI29DYTBqPk4sTVNEbiI/NUlfQ1JKTyw9UVU/PydXcGklSFFfWHA0JFRIN2tvLkZrXDxxOS8lO11rbSFOZjReV0VTZkIsZyZAZCFTa1J0IlBwal43MjtRUFwrOkFMc3AlLEAwO3BeSWdCL241aGAnIyxKZWciOUVHOWtcJmRxVFFoWmIuKjdUNm1ZKGVoKV4vSyZsXi80K1U+bzhnWScjU0YrIS10dEMoSS9mLVRuYk1CZ1Q/LGRzc1IsK15zOCwzITViQ1duUic+PCFEcUleOGdVT1dARE85cnFoXC9mbj1VZkNRNWs3QEE7ckw1UihBU15FS18mcyFWR3JeJShQK2hRY01fZWpLWSxtVnVacFZmL0trKlEkU0I0XGc3OGY7RF9cbSJGP1ZGdCY+aWtbODBAMlBDZzxVYzAhclQnb1YhJWohNSM8RkwsQ2kxSzlUIWxMJmtFSUhkVmFucmdYTTYvOldfcS9DPjFaRTxUNyxHQUs3K04lY1tbbENnS1k2bTA9ZS5eRmUrOztkKyxacz5DW0pSZGc5RDkpbUZaPUQ2P0lCZVtzJD5eRHFkQCNmWzEwajw1L1AuNCYiJGZNQFBia0o4QyFyTEduIjUoOXFiIk1BWUFVSyVaYSxlYi5FLFFMMVlVXTpRV2FmOVZyOTInYzNXJVJvTmA1UE0zTidcazZWWidYU2w/KWxBVlVnLW5ZM2lNTVA7WSdyRnEpdWhYKTljRiYrVl1ick4yclMrJWpxS11bIjtxKVdmZFpdXzVAYUZDSWlLUWYqL0pTXGk+R2w1RWc+ODomfj5lbmRzdHJlYW0KZW5kb2JqCjE4IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDE0OTUKPj4Kc3RyZWFtCkdhdTBDPj5zOTknUm5CMzMzdEVRUEJPMiNyUERjMyc7MzVGS1hBPyVHdThCKDsoRzs9QS8hQnVeSUxtX1wyclE9U050MWM2S15HZnE5SHJDR2tnZ3JHPlNCZypsSU5wIz0hYi8lL2UyK0AhaTk1RVVRdVRoayFNKDg6Pk9yZjAiIVNeYl9gQWdnOVhWMzNpOjldYD5uTCdTVyU1b24tYWhoU102aEhdbmJwLmw4Jm1ULDtXOEAjWGInKE4rITwnUXAvVkxDNWkjV1pqPGFpV0ctaF8iYVtVRilDQW8hJUgkYSVBWkp1LCVKRXQ1JDBWNDEjcHJKUlI7UVEpYz49aUBEI3BwJzVQQ3BEXClSIzwvTyNpUlknWzRsOkJtWCdlKFQ1PU05NTI8Tk8mIyJoTFFHWDllIWshMF0jOCdyZFJmXlEuYEokM01BcT4iTWpYMUhcSEFkTFlhWVRRYzNPOFMrJUthYk5vOTskViViLjssaCxdNCxvZlRIdSItYDNNaShFXj1wWkhAYyc3V1kmY2hKaCM1UzAnTkNVNW1NQF1TYkslUFBVNSUyJVddWGYocWJIJGE8PjUvJVcvSDg9cGJVLS9dRS05J1koPk4hST5hZD8zb0ErWDFkXTs3TGw7SSVHTUlZOCFuK1dFPEMuLVZmcjxAVjFxPTIlVCsxSEM4dUlSaVwkWWgyXFcjbWwwJEYtYUNgU28xWyFnWC9XXGdmWSszPD9nYlEuc0ArQW02cW90T2tVLjRdOjJ0UlRROTB0UWxwbiJWbnJhdSxSN0hTbCxnIWw0NklHJ3Ixa2Y1OmEiQkclTiR0XzpyMElocjtxdW8jaTdkRG8/LkRiOjo+R0U4JG5LLVlEW2hnSUxQSWkhTXMzMGIiWC0qJGs3Zjo6ci1AVkNlczM7TzszWjRYOjBFWV1WZT0+Kk8iVjY5bmVJWjZyIVlyXTFPZHJjUl9QKT1KImtoRSEzUktOclBUWVovPiddWmRIbEBHUSo1RTBjIzk0Ul0nTUtaZ1dFT3FWU1g+Iy1kbjBSZW9SNjkyWWdvRChXUSc4JzwlQTxqNCxWNHQoWjxBak0kX1o+LShGXXMyS2JNIm47VVV1YWtXL1VjQUYnUGBuJWNBI1RMLzM3KT4jbGIoMGspQSQlY0RAYCgkRFpQUUxzTjQ4LUFsdHFPYjFbXkZOa1ZoZzMxRWQxcVhoOi1UJFw/UXFPQCU8ZzdOUVh0SW83RTE1YylrVEksWmlWLHJSOk9SdHFdXTt0MVQqXCMrWj1HSzRic2UuY1BVOGRdaVZvIT83aF9VX0BiVW5oKW1WbWokVVJMJktQZWRfLzAsKTFxNzsuUF0lVE0nWzpFdEdlQWo2UjwyZiY3XSFlXzdDKHA1QkYubVRASzlfRSNhXWlDKUYuL0JEYig5JWRuOVpFVF8nKTc9OnVDSUpoWjdyXkZMXW11ckItNDVKMUtebU1kMF1FQThgMiJlMmoyYWpRSV1DOERqZzlGZyNaLmhTJE9Qa1ZNJlpEUyIqRVA+R0c1b2Q9QjdyYT0kcStHRVVjdEcmKk4/KE4+SXNMYjleZCkmWjJSMzQuJjcwVUVEZTEzcztHRzlIMiI9SSdvV0VuRFEzOzFmInQvYUE0N09YNEw5NzpYU2hcZ0VINCpjLW1lcUVjQT8xOD5GaDEnbU1LMFlVSERPLG9xQSJpYXM4U0gxUls+I01XPUsjPHEtQmpyI2lMcFZjRyhnQzoxPU1wXmo3S0szNW4/THJJKm5APF06a3JmOVVgJj1jSCcwQi4mNDJCTSomQGpNcDptIWlnaW5rJURvazFHOztLPTQvLVA1I08sKCtkQW5hKDZMNSNxQlQ8ZCtrKl11UDJCVWdfXVxZSDtjJkpuPihqcXNkPUFkRk1Dc3JSI11YLy45PDNnYmQoc11cRSxNYlI9I2pQJDU3bj5KOHU/YSMiT15tVl5GIVstJGBkbUMmWWJwVTByYm1wR3E2Zlklfj5lbmRzdHJlYW0KZW5kb2JqCjE5IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDU4Mgo+PgpzdHJlYW0KR2FzMkY2I1lMMyUjKzBMKCUzbiNoOC1HUVxrQEEoSkYsJlc7U15wNihLRnBSKDpOOXBaQGkvUjswTE02IUIobE4sYWomSyw6Uz09P0Y+MSohLjhZUmwrO1BJZDJuciVhcDU6PG5aPUI8S3Q5Wjk8cW9xI1pCayI+cTwjPyRTPWJbUjM9WCJxIlAoLD5XIiNKLjZXTDE5PG88aEJAY0BKL1NfLSJESSklQlU9P0FsR0dBKEAySWBxckBbci43TG83Jl1VPW1YWSdTTFNoWGg0UW9AZHJrazIvU0FHSGs5dCVxNUcwNWJGcFQtI2tWUjklTXJeUmtuXGE6ZTo0c21cRT9sZF1uaFlNXilFRjJxcWI/W1hsTVZhSypRclU3SVYpN0M6RTxJLzxGck1NUVkwYXJBKV1ldUQ6JVlBOzFQMGpWQzJxMiU/LExuQGo1UkJFOT5aZEFbV0M+ImE3cDs1PmskR1lzXjM2U0c7PCRadCNPUjZOPjsrMltGMG1OXi5uO29eJDc2ZC5VSFk4TzJIb1g8Ql5laVk6dDs4akBAcDNiPmcoVTo9Uk4oLlVyIi5IXGhHRVdaUGk5NnBELz8uTCsjKHM5RyhoZW1YUihNNCMrMFE8MytBXUhWJDRlLmleJG1NMlFRXGY3byNlOykqcEglQWw6bE5TV3EuRXBHK0VsSzgxTGNnPilgZiMwNktHOj8ySWlDV2s6cFViVGs3czZhaV40MjNwTEUhXWEwTShvayMsPG1UQT8kOWJiPkNVNzIuR34+ZW5kc3RyZWFtCmVuZG9iagoyMCAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxNjk0Cj4+CnN0cmVhbQpHYXUxLzk5XCdoJkJGODIuSmc5Vjc4aCgvS2AmdEVSN0FhPTNRcW9dbVVcIWg+Q1tBT0xiNk5NVDcxIi1EODlPZUIlUyIrNnNKKz5WY0hIKjYsOkspVT5OaiZpNik2ZWhAVWtFLTt1JjJAUElUZlwhKmsiPS88ImBnPkVRQykvVjk2J1g1bUM9KyVabGIyQG9JP0IuYGc3JWsvR14zXEczPG03X05KJ3BzIzBNLC0lIWNhSkZWK1BSXj1ZUXVvTW5HLWsyTTdKXVhBWTImJyFDQ0FyMGJMIkhqPmlXMFI5aysqZCVFVk8yVWFDK28yWmZNSXVYSnFDW14uKEh0WSkyTFVYZ2U2aGgiQVkka0I/akZFal5eOm8lU3I5M15GXWQhS0AuXCxeZTooUE0say1sZlZjcGE3NUdwVDloPlRsTHIpPFFWbVhUS1dvPU9XQlxvV3FYIygsVEZvWmkvTkIqczIiQjNHUTM8WTJpLTRmWkE8Y2lpJydGRF1SJ1klJVckaTNfJVRlVDJYJS5BRmBROCdKQScySlQ7TW85aCM5V25QJGoiJVxGUjNqcW5FVjFBR3JCQ0lgI1Q7WlRvKT1nMFheJD9qOFJIPC9QQyJlJ0wpZjtWYTdfMl9tSFtkI3FCLydoPiMoZGcxNlY/WTAkP28oNShFMFgwU0JmZlRWTHBnOmVlR0otZSgxIzZpKEZlNE9rTy9bJz0kVVJjOEA0TSZoKWQyUGMmNTRwQiVdWjlKOCFmZmUyWW9LVVZROj8vPXBjRkgoUDZQUztaZXAwRCE5T25QSz9wSlluKmVKbTFWbCRiTyZpcTUlUFZmNWAsPC1kcFAzZC0obmRZUllIJkpNJE89XUQpciRELCVNMk4nQDckSDtmaGVFTTE3UFslVjAxYSU1aEJqYC5XWDJxK0NrPzNhOnEpbD1KOiRbR2pCJXIzLGhZI2lxI2VlSk4wakRQPFNoPzFuQjslOXFkQ1sxPFc8bFpLVGk3UiFFdXNFbihzPUM0aiQjOTwvVFNyQGMkRkUyRUEiSiVDNWMiM2svW1xsLGFKYGBEMVdTXyozS0hXP3JOUzguOENHNzAhSnImSyYzSzAoSklnW2BWS2FPKEtfcF1oSEVxdGs5J0whVUhaW1ByTyFXOXMtYyYrZV8sYS4tKCJeR1xyTyZLM3UzMUROZDg0bjtDLzNKJ2hiWURaZDc/X1Y6SjhuKnA/J2JBWDo/OTkhLVdaMyl1cmMzZlRSWFtGUzNNVkZtdFUxaHMmPz1UKF81aGU5UVtQZTBlJU49YWhfPEJJLUtLanJzaSglby0hLyc8Z1NuP11BYEZSQjQ1OGxvbFJzNyVra1s1Nl5tY2JAM11oY2U2MEFUTihLZ2JzKy1bR1xkP0opRjA1Sis5PEluMm9FXlNhOjg6US1va043bmA7J0tYRyFsZDUmNldETEE6PjtkOUc7bVg4NjslaGonbUNYbDN0T0lLOFFwbDUqcGQpTmBncVhfcy8pI0k7ZXBTLEhePTpIIWgzJzhTKi5UJ2tUbWdiRzxMOyYvI0tETWUyXC5NQXJqOXE2clVLXj88UytDKjRhPC0nRlNeWyMibV0vJV1pQjVGQDEwKXApM1cpbXJBWlI4V1Q0VVg/Sjc1WDVSSCt0a0RBQGtFY2UmKFQzPStPUFNNT2wzMFp1XGJXZWEwKXJJPVpIK0wnZXEhbWdWJmoxTzYpMF1AYDIzS0xFWF1TNjBaXUxEUCxva2F1Qkc4YTZlKnIuUkc1SEMiYj8sJGkiUVFZR21HVTtOdSZjW2NpWW4yZ1tQU2VwQVwuakhCQlhiYWtLYVElb1FZSidnXVUmJW03YjU7aj5TUTFDJT9WXj41VygvWSo/QChdMmZsNzdCUWJCIk9ZRXBUJi45Z0VPPnQvVSxXLG8sVTwmW0crYz1YJlo+ZzMrYl5rNUFeNG1mLlk4SDddTV1idCpSKHRAMWYsZjM8Sz5iVShDXFg9WlgkZj8zQDMrSTw/Yz5fa3BdYmZSJ1xpNCVmKldiYTVLLGZHXjdOPDYtVzxJM2c+RlkkUXJDKDA/WFlSNFBdOGUvJWo8aUZxKEFGUkhock1VYVU2Sy1LbzkiWjszWHRoOWhoUCY2V2A6bGVPMUc3LiolJTJqViNLciwkaTdvPVddQkksIz0zXTokVD9KalcpYz1bZEYuSUg4P09GYj4vOWtvNDJPczJARiJwPFpHaC1xMGZuQEwtaiw2ayxpTmk/IWtDdElmXF1DT29+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTA2MQo+PgpzdHJlYW0KR2F0PSlnTiklLiUiN2tPaTZnNHQ8KUpybF03JkJpYWowPkpSVjtRR20tSEQ9Q3A9XkhLZCxvbz9YSm8jPyxvWiZqOCgpMSFZLFxtIjtvKUxCJlU0YCEjR2dPXDdXTWguLUE9bi4jJFhpPlNWbUghU187TTBoZzVhUFh1VnFSOTlzPk45dV9KN2VTNk1PNV9tS0Jgcm5mP1BsMjgpTDBgcCdsW2YkRDhcQjc1V1UyYGRJSU02SHFzXWRkczQpVSgoSm43VGYnRE1BKE5FZCMpKThGLz9SOCs+JV8kcEAyR0ojbkhGZTc0UFBxaElfbig6cjxEOjUwSjoqaV1rWGNUJkZaJmwuKC8/QUVQNkdYM1hcUSxXS2E+UiJLLz43IW9cSlJSUydMXiY4YGpJTGxPWmlfczA1MWFfcmxYNF1BNy4xbkVhLmxBOjdrbTlEO2ksSD9qOyxSKDA0WFpNbWgvVkA2Ry9RMUdQSWMoZWA/YywkWTYlcGhoTmJeKEdLK0FHUkheb09HTlkzR0xeNzsjS0E3TzFUR1QsN25sWFVyLFo+JF9bR11UNytKOzpVQ1R0IzRMP2ddcjNwP0Y8VSk1VXNKbkdmY0YrbSpjOkdvZE1dKG5pTG5qNzc6ZSloXTBFJ18mO2lnbDEvWUZKVGMjQmdmdGkhLTpgTjQuM3QqcCk8Q1pqKDhiXCZMO0BaVDE2VVwsRVVNXFtUb3JuKDNzc1ZPVV09bmdUKlFycjNwPjomOjNaOF1AJ2pVRipAZmBHaFpJMzxxUT8nJjVBP1tSUD9lN2hZXTYtXywtOnA2SXVFWlQ1Y11JW3QlPTJNcUtZOl9zOHNPazREMFJmZHJUMS42VDQzKGAidExfcCpibkQ7MGwwTERgRVYlUSpiUyU/M1QiaktgVjY4cVUqcXJsQStnX3BtWEAtNj9qTlg8VnNbajJXWmVrOWRcS0dGYGlpOlo4aGRTKiFqMUk0aEFcLGF0PGZKTCN0aVQ3UkpgNT5qMzVqOUpJVlM8dE1VJUJrV1QsdDJwInBAP2lhKSxqQy5BaGBPIlVlYENEbjtcLFEiVDVAZWdjXFpRQjlsWmkmXW9EJHA/TFZXUzFxR2pSRCJQNDMzPS8uMmldQS9uYlcxU2xMIks/MytjVCIkOzFAVXJAQGB1I2A5UDBAMUUxYGRiYWY0ZDFlSTlSU2o0PkJUZz9dNFtfITVkRzozdCpvcm5UWShXblphVCtoQ05VWWFqUEY3RS1uXXAyMWU5WmdBMW8mbD0kcjQ1TUJCUXV1WilFOycpV2ZLPXBmSl9AaDsybzlIJyVyJDgxLmhRNCFTU2FnSWYpVFU2S2MmVGYjL25UUF5VUEhidTw4VDY/TjwwSktGKTQzcTEtUy9UJ2RyJD06dD5ONFckSkFIR0YjPVhzfj5lbmRzdHJlYW0KZW5kb2JqCnhyZWYKMCAyMgowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwMDAwNzMgMDAwMDAgbiAKMDAwMDAwMDE0NSAwMDAwMCBuIAowMDAwMDAwMjUyIDAwMDAwIG4gCjAwMDAwMDAzNjQgMDAwMDAgbiAKMDAwMDAwMDU1OSAwMDAwMCBuIAowMDAwMDAwNjQyIDAwMDAwIG4gCjAwMDAwMDA3NTcgMDAwMDAgbiAKMDAwMDAwMDk1MiAwMDAwMCBuIAowMDAwMDAxMTQ3IDAwMDAwIG4gCjAwMDAwMDEzNDIgMDAwMDAgbiAKMDAwMDAwMTUzOCAwMDAwMCBuIAowMDAwMDAxNjU4IDAwMDAwIG4gCjAwMDAwMDE4NTQgMDAwMDAgbiAKMDAwMDAwMTkyNCAwMDAwMCBuIAowMDAwMDAyMjA4IDAwMDAwIG4gCjAwMDAwMDIzMDAgMDAwMDAgbiAKMDAwMDAwMzYxMiAwMDAwMCBuIAowMDAwMDA1MTQzIDAwMDAwIG4gCjAwMDAwMDY3MzAgMDAwMDAgbiAKMDAwMDAwNzQwMyAwMDAwMCBuIAowMDAwMDA5MTg5IDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDM0ZjkwNGEwOWQxMDQ5YTkzM2Y0N2Q1MmQ3ZmZiNDcwPjwzNGY5MDRhMDlkMTA0OWE5MzNmNDdkNTJkN2ZmYjQ3MD5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNCAwIFIKL1Jvb3QgMTMgMCBSCi9TaXplIDIyCj4+CnN0YXJ0eHJlZgoxMDM0MgolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this building permit application and extract all relevant information.\n\nExtract:\n- Building details (type, storeys, height, floor area)\n- Property information\n- Construction details\n- Any dimensional specifications\n- Special features (mezzanines, accessory structures, etc.)\n\nReturn a JSON object with this structure:\n{\n  "permit": {\n    "application_id": "extracted or generated ID",\n    "building": {\n      "type": "residential|commercial|industrial|accessory|mixed",\n      "storeys": 1,\n      "height": {\n        "value": 4.2,\n        "unit": "meters"\n      },\n      "total_floor_area": {\n        "value": 1500,\n        "unit": "sqft"\n      },\n      "occupancy_class": "small|medium|large",\n      "has_mezzanine": false,\n      "attached": false\n    },\n    "property": {\n      "address": "extracted address",\n      "lot_size": "if available"\n    },\n    "applicant": {\n      "name": "extracted name",\n      "contact": "extracted contact"\n    }\n  }\n}\n\nExtract all numeric values precisely with their units.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 12:44:44,714 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 12:44:44,716 - httpcore.connection - DEBUG - close.started
2026-02-06 12:44:44,730 - httpcore.connection - DEBUG - close.complete
2026-02-06 12:44:44,731 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 12:44:44,751 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D72030>
2026-02-06 12:44:44,751 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 12:44:44,781 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D728D0>
2026-02-06 12:44:44,782 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 12:44:44,784 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 12:44:44,784 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 12:44:44,785 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 12:44:44,785 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 12:45:13,382 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 20:45:14 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'21000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T20:45:08Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T20:45:15Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T20:44:47Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'29000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T20:45:08Z'), (b'request-id', b'req_011CXsU6W92nSUjtN4VJkrCb'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'28507'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9d7cc039dadfdb-YVR')])
2026-02-06 12:45:13,383 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 12:45:13,383 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 12:45:13,383 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 12:45:13,383 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 12:45:13,383 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 12:45:13,383 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 20:45:14 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '21000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T20:45:08Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T20:45:15Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T20:44:47Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '29000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T20:45:08Z', 'request-id': 'req_011CXsU6W92nSUjtN4VJkrCb', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '28507', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9d7cc039dadfdb-YVR'})
2026-02-06 12:45:13,383 - anthropic._base_client - DEBUG - request_id: req_011CXsU6W92nSUjtN4VJkrCb
2026-02-06 12:45:13,394 - __main__ - INFO - Claude API call successful
2026-02-06 12:45:13,395 - __main__ - DEBUG - Response usage - Input tokens: 11236, Output tokens: 1418
2026-02-06 12:45:13,395 - __main__ - DEBUG - Claude response length: 4328 characters
2026-02-06 12:45:13,395 - __main__ - DEBUG - Claude response preview: ```json
{
  "permit": {
    "application_id": "BP-2026-00147",
    "submission_date": "2026-02-03",
    "municipality": "City of Victoria",
    "application_type": "New Construction  Residential",
  ...
2026-02-06 12:45:13,396 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 12:45:13,396 - __main__ - DEBUG - Extracted JSON string length: 4316 characters
2026-02-06 12:45:13,396 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 12:45:13,396 - __main__ - INFO - Successfully extracted permit data
2026-02-06 12:45:13,396 - __main__ - DEBUG - Permit building type: residential
2026-02-06 12:45:13,401 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 12:45:13] "POST /extract-permit HTTP/1.1" 200 -
2026-02-06 12:45:13,472 - __main__ - INFO - === Validate Permit Request Received ===
2026-02-06 12:45:13,473 - __main__ - DEBUG - Request data keys: ['permit']
2026-02-06 12:45:13,473 - __main__ - INFO - Validating permit for building type: residential
2026-02-06 12:45:13,474 - __main__ - DEBUG - Permit data: {
  "applicant": {
    "bc_contractor_license": "BC-CON-2019-45678",
    "company_name": "West Coast Developments Ltd.",
    "contact": {
      "address": "500 \u2013 1234 Douglas Street, Victoria, BC V8W 2E6",
      "email": "ravi.kumar@westcoastdev.ca",
      "phone": "(250) 555-0184"
    },
    "name": "Ravi Kumar, P.Eng.",
    "position": "Senior Project Manager"
  },
  "application_id": "BP-2026-00147",
  "application_type": "New Construction \u2013 Residential",
  "building": {
    "attached_garage": true,
    "description": "New single-storey residential dwelling with attached single-car garage, open-concept living area, three bedrooms, two bathrooms, and covered front porch",
    "energy_efficiency": {
      "energuide_minimum": 80,
      "energuide_rating_target": 82,
      "furnace": "High-efficiency natural gas (96% AFUE)",
      "lighting": "LED throughout",
      "solar_ready": true,
      "ventilation": "Heat recovery ventilator (HRV)"
    },
    "fire_life_safety": {
      "co_detectors": "Each level",
      "garage_separation": "5/8\" Type X drywall (fire-rated)",
      "gfci_protection": "Kitchen, bathrooms, and exterior outlets",
      "smoke_alarms": "Interconnected in all bedrooms and hallways",
      "tempered_glass": "Hazardous locations per code"
    },
    "has_mezzanine": false,
    "height": {
      "code_limit": 4.5,
      "compliance": "EXCEEDS",
      "unit": "meters",
      "value": 4.6,
      "variance_amount_m": 0.1,
      "variance_requested": true
    },
    "lot_coverage": {
      "code_limit": 40,
      "compliance": "COMPLIANT",
      "unit": "percent",
      "value": 35
    },
    "occupancy_class": "small",
    "setbacks": {
      "front": {
        "code_limit_min": 6,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 6.5
      },
      "rear": {
        "code_limit_min": 7.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 8
      },
      "side_east": {
        "code_limit_min": 1.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 1.8
      },
      "side_west": {
        "code_limit_min": 1.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 1.5
      }
    },
    "storeys": 1,
    "structural": {
      "exterior_cladding": "Fiber cement siding with stone veneer accents",
      "foundation_type": "Concrete slab-on-grade with perimeter stem wall",
      "framing_type": "Conventional wood-frame (2x6 exterior walls)",
      "insulation": {
        "ceiling": "R-40",
        "walls": "R-22"
      },
      "roof_pitch": "5:12",
      "roof_type": "Pitched roof with asphalt shingles",
      "windows": {
        "type": "Double-glazed, Low-E, vinyl frames",
        "u_factor": 0.3
      }
    },
    "total_floor_area": {
      "code_limit": 1800,
      "compliance": "COMPLIANT",
      "unit": "sqft",
      "value": 1750
    },
    "type": "residential"
  },
  "fees": {
    "currency": "CAD",
    "development_cost_charge": 12500,
    "estimated_construction_value": 485000,
    "permit_fee": 3880,
    "school_site_acquisition_charge": 1200,
    "total_fees_payable": 17580
  },
  "municipality": "City of Victoria",
  "permit_validity_months": 24,
  "property": {
    "address": "1234 Cedar Lane, Victoria, BC V8N 4K2",
    "current_land_use": "Vacant Lot",
    "legal_description": "Lot 15, Section 42, Victoria District, Plan VIP12345",
    "lot_size": {
      "value_sqft": 6500,
      "value_sqm": 604
    },
    "pid": "012-345-678",
    "zoning": "R1-B (Single Family Residential)"
  },
  "submission_date": "2026-02-03",
  "variance_request": {
    "justification": "Additional 10 cm required to accommodate 5:12 roof pitch for optimal drainage and aesthetic consistency with neighbouring properties, consistent eave line, and adequate attic ventilation space. Shadow study included.",
    "proposed_m": 4.6,
    "required_maximum_m": 4.5,
    "type": "Building Height",
    "variance_amount_m": 0.1,
    "variance_percentage": 2.2
  }
}
2026-02-06 12:45:13,475 - __main__ - INFO - Fetching rules from file
2026-02-06 12:45:13,478 - __main__ - INFO - Loaded 3 rules from file
2026-02-06 12:45:13,478 - __main__ - INFO - Starting validation against 3 rules
2026-02-06 12:45:13,478 - __main__ - DEBUG - Checking rule: RULE-000001 - BC-DEMO-001  Single-Storey Residential Building
2026-02-06 12:45:13,478 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 12:45:13,479 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 12:45:13,479 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 12:45:13,479 - __main__ - DEBUG - Condition 1: building.storeys eq 1, Actual: 1
2026-02-06 12:45:13,479 - __main__ - DEBUG - Evaluating: 1 eq 1
2026-02-06 12:45:13,479 - __main__ - DEBUG - Evaluation result: True
2026-02-06 12:45:13,479 - __main__ - DEBUG - Condition 1 passed
2026-02-06 12:45:13,479 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 12:45:13,480 - __main__ - DEBUG - Key 'use' not found in path 'building.use'
2026-02-06 12:45:13,480 - __main__ - DEBUG - Condition 2: building.use eq residential, Actual: None
2026-02-06 12:45:13,480 - __main__ - DEBUG - Condition 2 failed: field not found
2026-02-06 12:45:13,480 - __main__ - DEBUG - Rule RULE-000001 conditions not met, skipping
2026-02-06 12:45:13,480 - __main__ - DEBUG - Checking rule: RULE-000002 - BC-DEMO-004  Two-Storey Residential Building
2026-02-06 12:45:13,480 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 12:45:13,480 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 12:45:13,480 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 12:45:13,480 - __main__ - DEBUG - Condition 1: building.storeys eq 2, Actual: 1
2026-02-06 12:45:13,480 - __main__ - DEBUG - Evaluating: 1 eq 2
2026-02-06 12:45:13,480 - __main__ - DEBUG - Evaluation result: False
2026-02-06 12:45:13,480 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 12:45:13,480 - __main__ - DEBUG - Rule RULE-000002 conditions not met, skipping
2026-02-06 12:45:13,481 - __main__ - DEBUG - Checking rule: RULE-000003 - BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 12:45:13,481 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 12:45:13,481 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 12:45:13,481 - __main__ - DEBUG - Key 'use' not found in path 'building.use'
2026-02-06 12:45:13,481 - __main__ - DEBUG - Condition 1: building.use eq mixed-use, Actual: None
2026-02-06 12:45:13,481 - __main__ - DEBUG - Condition 1 failed: field not found
2026-02-06 12:45:13,481 - __main__ - DEBUG - Rule RULE-000003 conditions not met, skipping
2026-02-06 12:45:13,481 - __main__ - INFO - Validation complete - Valid: True, Violations: 0, Applicable rules: 0
2026-02-06 12:45:13,481 - __main__ - DEBUG - Summary: {'total_rules_checked': 0, 'applicable_rules': [], 'violation_count': 0, 'mandatory_violations': 0, 'advisory_violations': 0}
2026-02-06 12:45:13,482 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 12:45:13] "POST /validate-permit HTTP/1.1" 200 -
2026-02-06 13:04:11,222 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 13:04:11,233 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 13:04:11,234 - __main__ - INFO - Document info: {'title': 'building code', 'version': '1.0'}
2026-02-06 13:04:11,234 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 13:04:11,234 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 13:04:11,236 - __main__ - INFO - Base64 validation passed
2026-02-06 13:04:11,236 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 13:04:11,237 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 13:04:11,237 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 13:04:11,237 - __main__ - INFO - Calling Claude API...
2026-02-06 13:04:11,237 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 13:04:11,260 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 13:04:11,270 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 13:04:11,275 - httpcore.connection - DEBUG - close.started
2026-02-06 13:04:11,294 - httpcore.connection - DEBUG - close.complete
2026-02-06 13:04:11,295 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 13:04:11,314 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D82300>
2026-02-06 13:04:11,316 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 13:04:11,359 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D826C0>
2026-02-06 13:04:11,360 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 13:04:11,362 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 13:04:11,363 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 13:04:11,364 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 13:04:11,364 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 13:04:27,642 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 21:04:28 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T21:04:34Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T21:04:35Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T21:04:13Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'27000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T21:04:34Z'), (b'request-id', b'req_011CXsVaVkrbsnWDs9pxaXAW'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'16180'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9d993b6e0f2c5e-YVR')])
2026-02-06 13:04:27,644 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 13:04:27,645 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 13:04:27,647 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 13:04:27,648 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 13:04:27,648 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 13:04:27,649 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 21:04:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T21:04:34Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T21:04:35Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T21:04:13Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '27000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T21:04:34Z', 'request-id': 'req_011CXsVaVkrbsnWDs9pxaXAW', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '16180', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9d993b6e0f2c5e-YVR'})
2026-02-06 13:04:27,650 - anthropic._base_client - DEBUG - request_id: req_011CXsVaVkrbsnWDs9pxaXAW
2026-02-06 13:04:27,655 - __main__ - INFO - Claude API call successful
2026-02-06 13:04:27,655 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1306
2026-02-06 13:04:27,655 - __main__ - DEBUG - Claude response length: 4732 characters
2026-02-06 13:04:27,655 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Maximum height and floor area limits for single-storey residential buildings, meas...
2026-02-06 13:04:27,657 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 13:04:27,657 - __main__ - DEBUG - Extracted JSON string length: 4720 characters
2026-02-06 13:04:27,657 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 13:04:27,658 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 13:04:27,658 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-06 13:04:27,659 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 13:04:27,659 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-06 13:04:27,659 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 13:04:27,660 - __main__ - DEBUG - Processing rule 3: BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 13:04:27,660 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 13:04:27,660 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 13:04:27,666 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 13:04:27] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 13:06:42,856 - __main__ - INFO - === Save Rules Request Received ===
2026-02-06 13:06:42,858 - __main__ - DEBUG - Request data keys: ['rules', 'mode', 'updated_by']
2026-02-06 13:06:42,858 - __main__ - INFO - Save mode: append, Updated by: admin
2026-02-06 13:06:42,859 - __main__ - INFO - Number of rules to save: 3
2026-02-06 13:06:42,865 - __main__ - DEBUG - Rules file path: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 13:06:42,867 - __main__ - INFO - Loading existing rules file
2026-02-06 13:06:42,874 - __main__ - ERROR - Error in save_rules: Expecting value: line 1 column 1 (char 0)
Traceback (most recent call last):
  File "C:\Projects\cov-demo\New folder\project\python-service\app.py", line 485, in save_rules
    existing_data = json.load(f)
                    ^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 293, in load
    return loads(fp.read(),
           ^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2026-02-06 13:06:43,092 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 13:06:43] "[35m[1mPOST /save-rules HTTP/1.1[0m" 500 -
2026-02-06 13:09:53,914 - __main__ - INFO - === Extract Permit Request Received ===
2026-02-06 13:09:53,915 - __main__ - DEBUG - Request data keys: ['pdf_base64']
2026-02-06 13:09:53,915 - __main__ - DEBUG - PDF base64 length: 14684
2026-02-06 13:09:53,916 - __main__ - INFO - Starting permit extraction with Claude...
2026-02-06 13:09:53,916 - __main__ - INFO - Starting PDF extraction - Type: permit
2026-02-06 13:09:53,917 - __main__ - DEBUG - PDF base64 length: 14684 characters
2026-02-06 13:09:53,918 - __main__ - INFO - Calling Claude API...
2026-02-06 13:09:53,918 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 13:09:53,941 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDYgMCBSIC9GNSAxMSAwIFIKPj4KZW5kb2JqCjIgMCBvYmoKPDwKL0Jhc2VGb250IC9IZWx2ZXRpY2EgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YxIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKMyAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL0NvbnRlbnRzIDE2IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjUgMCBvYmoKPDwKL0Jhc2VGb250IC9aYXBmRGluZ2JhdHMgL05hbWUgL0YzIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE3IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9Db250ZW50cyAyMCAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE1IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkT2JsaXF1ZSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjUgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagoxMiAwIG9iago8PAovQ29udGVudHMgMjEgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNSAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTMgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNSAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE0IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTUgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA3IDAgUiA4IDAgUiA5IDAgUiAxMCAwIFIgMTIgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNiAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxMjIwCj4+CnN0cmVhbQpHYXUxLTswMUdOJkJFXSgnYDFFXmZUZyIjaS1UM2hqPGRxcEMjSUYtJVBOXGtXKT9oSFo6VGRoSWstLVgiUUVhOUVzI3AyL2FgT1xwInUjXyZIJ29HKVBtSDQpMTkpbzVULmNdNWU1J0gyTS51NGxgITxzLDZKIVFDJ1djVCFcT1FwQSFTXjo4R0JQNFM9Wkd1IylsYlJOKi5yJmYrISolRnIhSFc1Q2lgOi0qYmxrUXEzRkAhXFJRVDZxKmhIUkQrNCksS3I/JUYiZGJAXj5lO10saj1zMSs+KyQuJTBMa1BxXTZTRD1HInA1TixmPzZiQkBQdE9mZj1CTF1kOEI6bzUrWGRFLSFMWiVrRTBGciQsRD48RSpDcSMlPUReQCh1OmwjS2w1NEw+OypSKGV0MCcoRCQnKWRRIk8qb1olM1NDMCNaKE51NG02UTtSUjZTU3I5MGEsPzQsQFUtJGMsLytlVF8oKkpBM0ohQC9uWD4jWydVPzIqaj0jdEMmWSZfYEA3VCY/V2oxSSg0Qk1XbHFcVGo9UHNgV0gyI0Q0RFpMJmtCbDFHMTg2KTZjXjdjcmNGMVJwVUNcX0FoX0pJJFJKQWw9N2tdS09OW3FpKWlbMVw8RzJVMUswYFdnKVpaM0IkYVc1c28xYzA8Ki9qZGc2aHJ1bGVwSFhsalFLMXRIXj1cJTQlQDRacGpSQidIVDZBYWQ9cl9vZUckQktzIjVkO2ppIU4yY0ltQENBNUk8QmQ3Rl07L1hfM2pXRWotYTdNYjdJPWovTSQpUUYuXXU/XDw2MFAqOGMzbl9TQFs7QzBGQV1ZTVRMYF07KjJYXTUoP1NDKkw2Pk8iY2dFMTxFU0ZebDtaMi05Xlg5a0xwL1JdXSkkRGBpVjEnRzM3NCNZcywybDcrbCw4OSc/X0M3Q2xeX0VeQGxHRD41SUwhYHIrU0ZVKy9qQGNdOW5AXmQsLTFrYTgxTF5NbnNvMVllOWdrZllJVEBeJXIqTE8/PEg8Q1g3b2JwK2laPFonblQ9VVhlWFlLdGxQPERPNl1HNFUkVjVabGgpQm1sQ1EuV2U8MTYuQDxvMj85b09EWHFtayZENU1sWF84XFFraTA2VTllYj0qUGRbK15AciloPERaPzFSakk+aVZVJnBmaElccz4/XCVWQiVcWiRsbGFgRXNZPlMnQFdGcGtTRS47JjpJIVMqOzdUUiInSSEtYDNiS3JxYFFzKSJBLEFhTWtVYHVmMDFZTHQmU0FDT0hESk0oTlw7cy5BM1leLixmNkozR3Mnc3FwWHFgY08pVmRPVUFaSzVyQlY6WXNlXCVzSTtUXShaJGQ+S3BuakxLLWkxRi1tUTlFK2AyVihETzc9cmM5TyxSODUwRGVVSWknLGAubyYiPWlTQHU1RTp1UkZoSiQ6KEI2R3JjSGA1XmNmRWQhcUptcS1mOjdPVz8pUkleZWg7ODVcMzBeOzpVYE1xSV5BKHNmWWpNSVgxWi5vRkRDbzI3aFloLkBsPVVNPjVgVjMmOSw8VzpHOm9CQVdWdF5tI2hxJyZQYWxgKEhuSShSLiFabkcmNi91IjkxJlFJJmYnYyY8SCI2IiVTOzRmdENvXE9acnJCXUApOGx+PmVuZHN0cmVhbQplbmRvYmoKMTcgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTQzOQo+PgpzdHJlYW0KR2F0bTs+QmYnYiY6V2VEYlktOCpIUFdgK25MXFtLPjslQG4tR2NWSTZYR0VYaTcsMmtDcjU+bEdAVlpJVW1QXUlfdVtlaTdjM3JTRjtaSmRwc0E6aGMyYy02cGk4ZlMxNUhdMiJWRDtPX2R0Wk4pVVpSUkYyNF4pKS9UaXAjM14uLjFObVwsM0Q8XVRtbENrOiIvQjZiXSdIbnBqVHJvKS9ZaVZLTDJbUiJCQWpdNj90MnNpZicnTG9lL1piVj9CZiU4UVxqI0g2QnM7dE1cQ21mK281X1BoLFZBZVIhRjddUkkvcj1NYUshRCdxL1hbU0VfaCUoYUliME1HJmIzZic5VVxdcGFQcUNDRS46XTIuSTwwYjotUV4uZCdmPiYnZz1pKkkvPz5pZk5AO24xSlsxclw9SDFkLys1Xm1gMUJeKWJba0d0W2BxJ3NVP11RSFNNaSY9aDhxK0lKZi9MJGtXR2lWNkFrTHBmIm87bHBpWStpaCxBQz83bWRoIjZpVylzKzp1YXFgIidQam8qJWZFQi5AXmV1KV08IThxXEpzRlVxSERXLEJQVW5hX21CZWhnUy5cPjJyMllXRUtPOmQtJydoWVxsT3FZLGZ0cDpUakNdbEI3T2FfKFxePEdnbkc/OCg5VlNyby5lPlk1TzdmaDdhQ1NlJT9HXW04R1heT19EdDpIP2U8UURJODtdUDtAZ2NwS1dMdWZEQ25nT0NkYEF1IWVSQEBBUSojKkFePUBObj1XISFJaXI1SWkpOF9QSDNIQEtSPCo9TmFwRGB1PzA5TFM8UzhGRjJEV2c0YT4kQGFYYFVJJTszRlp1cEdEUFgwYy1fKyQzWUcsSiElKENsOXRnPVRUdTxrYUI1W1RMM0hPSlopdGleXm0oOyNNZW1NKCkna2MqZi9ObU1gMFNgaEdqLUZxTkcwYzlYN1gsSmZtUTlOW2FFNDBlYSJaSGE/TmI2Y0ZLUj9oZjFEOW1MQkcmKiNuJzJKNT9rJUJgJ3I+TW4pcWFaVkJhZm5tb1NRKUNwS0hhRyJeQks3a3BbYWs5TD1jMk4vLWgmdSJLM0lkZiR0QkVTIU5FcVhILStIOy8ibG8rKE4oJTNxI29DYTBqPk4sTVNEbiI/NUlfQ1JKTyw9UVU/PydXcGklSFFfWHA0JFRIN2tvLkZrXDxxOS8lO11rbSFOZjReV0VTZkIsZyZAZCFTa1J0IlBwal43MjtRUFwrOkFMc3AlLEAwO3BeSWdCL241aGAnIyxKZWciOUVHOWtcJmRxVFFoWmIuKjdUNm1ZKGVoKV4vSyZsXi80K1U+bzhnWScjU0YrIS10dEMoSS9mLVRuYk1CZ1Q/LGRzc1IsK15zOCwzITViQ1duUic+PCFEcUleOGdVT1dARE85cnFoXC9mbj1VZkNRNWs3QEE7ckw1UihBU15FS18mcyFWR3JeJShQK2hRY01fZWpLWSxtVnVacFZmL0trKlEkU0I0XGc3OGY7RF9cbSJGP1ZGdCY+aWtbODBAMlBDZzxVYzAhclQnb1YhJWohNSM8RkwsQ2kxSzlUIWxMJmtFSUhkVmFucmdYTTYvOldfcS9DPjFaRTxUNyxHQUs3K04lY1tbbENnS1k2bTA9ZS5eRmUrOztkKyxacz5DW0pSZGc5RDkpbUZaPUQ2P0lCZVtzJD5eRHFkQCNmWzEwajw1L1AuNCYiJGZNQFBia0o4QyFyTEduIjUoOXFiIk1BWUFVSyVaYSxlYi5FLFFMMVlVXTpRV2FmOVZyOTInYzNXJVJvTmA1UE0zTidcazZWWidYU2w/KWxBVlVnLW5ZM2lNTVA7WSdyRnEpdWhYKTljRiYrVl1ick4yclMrJWpxS11bIjtxKVdmZFpdXzVAYUZDSWlLUWYqL0pTXGk+R2w1RWc+ODomfj5lbmRzdHJlYW0KZW5kb2JqCjE4IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDE0OTUKPj4Kc3RyZWFtCkdhdTBDPj5zOTknUm5CMzMzdEVRUEJPMiNyUERjMyc7MzVGS1hBPyVHdThCKDsoRzs9QS8hQnVeSUxtX1wyclE9U050MWM2S15HZnE5SHJDR2tnZ3JHPlNCZypsSU5wIz0hYi8lL2UyK0AhaTk1RVVRdVRoayFNKDg6Pk9yZjAiIVNeYl9gQWdnOVhWMzNpOjldYD5uTCdTVyU1b24tYWhoU102aEhdbmJwLmw4Jm1ULDtXOEAjWGInKE4rITwnUXAvVkxDNWkjV1pqPGFpV0ctaF8iYVtVRilDQW8hJUgkYSVBWkp1LCVKRXQ1JDBWNDEjcHJKUlI7UVEpYz49aUBEI3BwJzVQQ3BEXClSIzwvTyNpUlknWzRsOkJtWCdlKFQ1PU05NTI8Tk8mIyJoTFFHWDllIWshMF0jOCdyZFJmXlEuYEokM01BcT4iTWpYMUhcSEFkTFlhWVRRYzNPOFMrJUthYk5vOTskViViLjssaCxdNCxvZlRIdSItYDNNaShFXj1wWkhAYyc3V1kmY2hKaCM1UzAnTkNVNW1NQF1TYkslUFBVNSUyJVddWGYocWJIJGE8PjUvJVcvSDg9cGJVLS9dRS05J1koPk4hST5hZD8zb0ErWDFkXTs3TGw7SSVHTUlZOCFuK1dFPEMuLVZmcjxAVjFxPTIlVCsxSEM4dUlSaVwkWWgyXFcjbWwwJEYtYUNgU28xWyFnWC9XXGdmWSszPD9nYlEuc0ArQW02cW90T2tVLjRdOjJ0UlRROTB0UWxwbiJWbnJhdSxSN0hTbCxnIWw0NklHJ3Ixa2Y1OmEiQkclTiR0XzpyMElocjtxdW8jaTdkRG8/LkRiOjo+R0U4JG5LLVlEW2hnSUxQSWkhTXMzMGIiWC0qJGs3Zjo6ci1AVkNlczM7TzszWjRYOjBFWV1WZT0+Kk8iVjY5bmVJWjZyIVlyXTFPZHJjUl9QKT1KImtoRSEzUktOclBUWVovPiddWmRIbEBHUSo1RTBjIzk0Ul0nTUtaZ1dFT3FWU1g+Iy1kbjBSZW9SNjkyWWdvRChXUSc4JzwlQTxqNCxWNHQoWjxBak0kX1o+LShGXXMyS2JNIm47VVV1YWtXL1VjQUYnUGBuJWNBI1RMLzM3KT4jbGIoMGspQSQlY0RAYCgkRFpQUUxzTjQ4LUFsdHFPYjFbXkZOa1ZoZzMxRWQxcVhoOi1UJFw/UXFPQCU8ZzdOUVh0SW83RTE1YylrVEksWmlWLHJSOk9SdHFdXTt0MVQqXCMrWj1HSzRic2UuY1BVOGRdaVZvIT83aF9VX0BiVW5oKW1WbWokVVJMJktQZWRfLzAsKTFxNzsuUF0lVE0nWzpFdEdlQWo2UjwyZiY3XSFlXzdDKHA1QkYubVRASzlfRSNhXWlDKUYuL0JEYig5JWRuOVpFVF8nKTc9OnVDSUpoWjdyXkZMXW11ckItNDVKMUtebU1kMF1FQThgMiJlMmoyYWpRSV1DOERqZzlGZyNaLmhTJE9Qa1ZNJlpEUyIqRVA+R0c1b2Q9QjdyYT0kcStHRVVjdEcmKk4/KE4+SXNMYjleZCkmWjJSMzQuJjcwVUVEZTEzcztHRzlIMiI9SSdvV0VuRFEzOzFmInQvYUE0N09YNEw5NzpYU2hcZ0VINCpjLW1lcUVjQT8xOD5GaDEnbU1LMFlVSERPLG9xQSJpYXM4U0gxUls+I01XPUsjPHEtQmpyI2lMcFZjRyhnQzoxPU1wXmo3S0szNW4/THJJKm5APF06a3JmOVVgJj1jSCcwQi4mNDJCTSomQGpNcDptIWlnaW5rJURvazFHOztLPTQvLVA1I08sKCtkQW5hKDZMNSNxQlQ8ZCtrKl11UDJCVWdfXVxZSDtjJkpuPihqcXNkPUFkRk1Dc3JSI11YLy45PDNnYmQoc11cRSxNYlI9I2pQJDU3bj5KOHU/YSMiT15tVl5GIVstJGBkbUMmWWJwVTByYm1wR3E2Zlklfj5lbmRzdHJlYW0KZW5kb2JqCjE5IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDU4Mgo+PgpzdHJlYW0KR2FzMkY2I1lMMyUjKzBMKCUzbiNoOC1HUVxrQEEoSkYsJlc7U15wNihLRnBSKDpOOXBaQGkvUjswTE02IUIobE4sYWomSyw6Uz09P0Y+MSohLjhZUmwrO1BJZDJuciVhcDU6PG5aPUI8S3Q5Wjk8cW9xI1pCayI+cTwjPyRTPWJbUjM9WCJxIlAoLD5XIiNKLjZXTDE5PG88aEJAY0BKL1NfLSJESSklQlU9P0FsR0dBKEAySWBxckBbci43TG83Jl1VPW1YWSdTTFNoWGg0UW9AZHJrazIvU0FHSGs5dCVxNUcwNWJGcFQtI2tWUjklTXJeUmtuXGE6ZTo0c21cRT9sZF1uaFlNXilFRjJxcWI/W1hsTVZhSypRclU3SVYpN0M6RTxJLzxGck1NUVkwYXJBKV1ldUQ6JVlBOzFQMGpWQzJxMiU/LExuQGo1UkJFOT5aZEFbV0M+ImE3cDs1PmskR1lzXjM2U0c7PCRadCNPUjZOPjsrMltGMG1OXi5uO29eJDc2ZC5VSFk4TzJIb1g8Ql5laVk6dDs4akBAcDNiPmcoVTo9Uk4oLlVyIi5IXGhHRVdaUGk5NnBELz8uTCsjKHM5RyhoZW1YUihNNCMrMFE8MytBXUhWJDRlLmleJG1NMlFRXGY3byNlOykqcEglQWw6bE5TV3EuRXBHK0VsSzgxTGNnPilgZiMwNktHOj8ySWlDV2s6cFViVGs3czZhaV40MjNwTEUhXWEwTShvayMsPG1UQT8kOWJiPkNVNzIuR34+ZW5kc3RyZWFtCmVuZG9iagoyMCAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxNjk0Cj4+CnN0cmVhbQpHYXUxLzk5XCdoJkJGODIuSmc5Vjc4aCgvS2AmdEVSN0FhPTNRcW9dbVVcIWg+Q1tBT0xiNk5NVDcxIi1EODlPZUIlUyIrNnNKKz5WY0hIKjYsOkspVT5OaiZpNik2ZWhAVWtFLTt1JjJAUElUZlwhKmsiPS88ImBnPkVRQykvVjk2J1g1bUM9KyVabGIyQG9JP0IuYGc3JWsvR14zXEczPG03X05KJ3BzIzBNLC0lIWNhSkZWK1BSXj1ZUXVvTW5HLWsyTTdKXVhBWTImJyFDQ0FyMGJMIkhqPmlXMFI5aysqZCVFVk8yVWFDK28yWmZNSXVYSnFDW14uKEh0WSkyTFVYZ2U2aGgiQVkka0I/akZFal5eOm8lU3I5M15GXWQhS0AuXCxeZTooUE0say1sZlZjcGE3NUdwVDloPlRsTHIpPFFWbVhUS1dvPU9XQlxvV3FYIygsVEZvWmkvTkIqczIiQjNHUTM8WTJpLTRmWkE8Y2lpJydGRF1SJ1klJVckaTNfJVRlVDJYJS5BRmBROCdKQScySlQ7TW85aCM5V25QJGoiJVxGUjNqcW5FVjFBR3JCQ0lgI1Q7WlRvKT1nMFheJD9qOFJIPC9QQyJlJ0wpZjtWYTdfMl9tSFtkI3FCLydoPiMoZGcxNlY/WTAkP28oNShFMFgwU0JmZlRWTHBnOmVlR0otZSgxIzZpKEZlNE9rTy9bJz0kVVJjOEA0TSZoKWQyUGMmNTRwQiVdWjlKOCFmZmUyWW9LVVZROj8vPXBjRkgoUDZQUztaZXAwRCE5T25QSz9wSlluKmVKbTFWbCRiTyZpcTUlUFZmNWAsPC1kcFAzZC0obmRZUllIJkpNJE89XUQpciRELCVNMk4nQDckSDtmaGVFTTE3UFslVjAxYSU1aEJqYC5XWDJxK0NrPzNhOnEpbD1KOiRbR2pCJXIzLGhZI2lxI2VlSk4wakRQPFNoPzFuQjslOXFkQ1sxPFc8bFpLVGk3UiFFdXNFbihzPUM0aiQjOTwvVFNyQGMkRkUyRUEiSiVDNWMiM2svW1xsLGFKYGBEMVdTXyozS0hXP3JOUzguOENHNzAhSnImSyYzSzAoSklnW2BWS2FPKEtfcF1oSEVxdGs5J0whVUhaW1ByTyFXOXMtYyYrZV8sYS4tKCJeR1xyTyZLM3UzMUROZDg0bjtDLzNKJ2hiWURaZDc/X1Y6SjhuKnA/J2JBWDo/OTkhLVdaMyl1cmMzZlRSWFtGUzNNVkZtdFUxaHMmPz1UKF81aGU5UVtQZTBlJU49YWhfPEJJLUtLanJzaSglby0hLyc8Z1NuP11BYEZSQjQ1OGxvbFJzNyVra1s1Nl5tY2JAM11oY2U2MEFUTihLZ2JzKy1bR1xkP0opRjA1Sis5PEluMm9FXlNhOjg6US1va043bmA7J0tYRyFsZDUmNldETEE6PjtkOUc7bVg4NjslaGonbUNYbDN0T0lLOFFwbDUqcGQpTmBncVhfcy8pI0k7ZXBTLEhePTpIIWgzJzhTKi5UJ2tUbWdiRzxMOyYvI0tETWUyXC5NQXJqOXE2clVLXj88UytDKjRhPC0nRlNeWyMibV0vJV1pQjVGQDEwKXApM1cpbXJBWlI4V1Q0VVg/Sjc1WDVSSCt0a0RBQGtFY2UmKFQzPStPUFNNT2wzMFp1XGJXZWEwKXJJPVpIK0wnZXEhbWdWJmoxTzYpMF1AYDIzS0xFWF1TNjBaXUxEUCxva2F1Qkc4YTZlKnIuUkc1SEMiYj8sJGkiUVFZR21HVTtOdSZjW2NpWW4yZ1tQU2VwQVwuakhCQlhiYWtLYVElb1FZSidnXVUmJW03YjU7aj5TUTFDJT9WXj41VygvWSo/QChdMmZsNzdCUWJCIk9ZRXBUJi45Z0VPPnQvVSxXLG8sVTwmW0crYz1YJlo+ZzMrYl5rNUFeNG1mLlk4SDddTV1idCpSKHRAMWYsZjM8Sz5iVShDXFg9WlgkZj8zQDMrSTw/Yz5fa3BdYmZSJ1xpNCVmKldiYTVLLGZHXjdOPDYtVzxJM2c+RlkkUXJDKDA/WFlSNFBdOGUvJWo8aUZxKEFGUkhock1VYVU2Sy1LbzkiWjszWHRoOWhoUCY2V2A6bGVPMUc3LiolJTJqViNLciwkaTdvPVddQkksIz0zXTokVD9KalcpYz1bZEYuSUg4P09GYj4vOWtvNDJPczJARiJwPFpHaC1xMGZuQEwtaiw2ayxpTmk/IWtDdElmXF1DT29+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTA2MQo+PgpzdHJlYW0KR2F0PSlnTiklLiUiN2tPaTZnNHQ8KUpybF03JkJpYWowPkpSVjtRR20tSEQ9Q3A9XkhLZCxvbz9YSm8jPyxvWiZqOCgpMSFZLFxtIjtvKUxCJlU0YCEjR2dPXDdXTWguLUE9bi4jJFhpPlNWbUghU187TTBoZzVhUFh1VnFSOTlzPk45dV9KN2VTNk1PNV9tS0Jgcm5mP1BsMjgpTDBgcCdsW2YkRDhcQjc1V1UyYGRJSU02SHFzXWRkczQpVSgoSm43VGYnRE1BKE5FZCMpKThGLz9SOCs+JV8kcEAyR0ojbkhGZTc0UFBxaElfbig6cjxEOjUwSjoqaV1rWGNUJkZaJmwuKC8/QUVQNkdYM1hcUSxXS2E+UiJLLz43IW9cSlJSUydMXiY4YGpJTGxPWmlfczA1MWFfcmxYNF1BNy4xbkVhLmxBOjdrbTlEO2ksSD9qOyxSKDA0WFpNbWgvVkA2Ry9RMUdQSWMoZWA/YywkWTYlcGhoTmJeKEdLK0FHUkheb09HTlkzR0xeNzsjS0E3TzFUR1QsN25sWFVyLFo+JF9bR11UNytKOzpVQ1R0IzRMP2ddcjNwP0Y8VSk1VXNKbkdmY0YrbSpjOkdvZE1dKG5pTG5qNzc6ZSloXTBFJ18mO2lnbDEvWUZKVGMjQmdmdGkhLTpgTjQuM3QqcCk8Q1pqKDhiXCZMO0BaVDE2VVwsRVVNXFtUb3JuKDNzc1ZPVV09bmdUKlFycjNwPjomOjNaOF1AJ2pVRipAZmBHaFpJMzxxUT8nJjVBP1tSUD9lN2hZXTYtXywtOnA2SXVFWlQ1Y11JW3QlPTJNcUtZOl9zOHNPazREMFJmZHJUMS42VDQzKGAidExfcCpibkQ7MGwwTERgRVYlUSpiUyU/M1QiaktgVjY4cVUqcXJsQStnX3BtWEAtNj9qTlg8VnNbajJXWmVrOWRcS0dGYGlpOlo4aGRTKiFqMUk0aEFcLGF0PGZKTCN0aVQ3UkpgNT5qMzVqOUpJVlM8dE1VJUJrV1QsdDJwInBAP2lhKSxqQy5BaGBPIlVlYENEbjtcLFEiVDVAZWdjXFpRQjlsWmkmXW9EJHA/TFZXUzFxR2pSRCJQNDMzPS8uMmldQS9uYlcxU2xMIks/MytjVCIkOzFAVXJAQGB1I2A5UDBAMUUxYGRiYWY0ZDFlSTlSU2o0PkJUZz9dNFtfITVkRzozdCpvcm5UWShXblphVCtoQ05VWWFqUEY3RS1uXXAyMWU5WmdBMW8mbD0kcjQ1TUJCUXV1WilFOycpV2ZLPXBmSl9AaDsybzlIJyVyJDgxLmhRNCFTU2FnSWYpVFU2S2MmVGYjL25UUF5VUEhidTw4VDY/TjwwSktGKTQzcTEtUy9UJ2RyJD06dD5ONFckSkFIR0YjPVhzfj5lbmRzdHJlYW0KZW5kb2JqCnhyZWYKMCAyMgowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwMDAwNzMgMDAwMDAgbiAKMDAwMDAwMDE0NSAwMDAwMCBuIAowMDAwMDAwMjUyIDAwMDAwIG4gCjAwMDAwMDAzNjQgMDAwMDAgbiAKMDAwMDAwMDU1OSAwMDAwMCBuIAowMDAwMDAwNjQyIDAwMDAwIG4gCjAwMDAwMDA3NTcgMDAwMDAgbiAKMDAwMDAwMDk1MiAwMDAwMCBuIAowMDAwMDAxMTQ3IDAwMDAwIG4gCjAwMDAwMDEzNDIgMDAwMDAgbiAKMDAwMDAwMTUzOCAwMDAwMCBuIAowMDAwMDAxNjU4IDAwMDAwIG4gCjAwMDAwMDE4NTQgMDAwMDAgbiAKMDAwMDAwMTkyNCAwMDAwMCBuIAowMDAwMDAyMjA4IDAwMDAwIG4gCjAwMDAwMDIzMDAgMDAwMDAgbiAKMDAwMDAwMzYxMiAwMDAwMCBuIAowMDAwMDA1MTQzIDAwMDAwIG4gCjAwMDAwMDY3MzAgMDAwMDAgbiAKMDAwMDAwNzQwMyAwMDAwMCBuIAowMDAwMDA5MTg5IDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDM0ZjkwNGEwOWQxMDQ5YTkzM2Y0N2Q1MmQ3ZmZiNDcwPjwzNGY5MDRhMDlkMTA0OWE5MzNmNDdkNTJkN2ZmYjQ3MD5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNCAwIFIKL1Jvb3QgMTMgMCBSCi9TaXplIDIyCj4+CnN0YXJ0eHJlZgoxMDM0MgolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this building permit application and extract all relevant information.\n\nExtract:\n- Building details (type, storeys, height, floor area)\n- Property information\n- Construction details\n- Any dimensional specifications\n- Special features (mezzanines, accessory structures, etc.)\n\nReturn a JSON object with this structure:\n{\n  "permit": {\n    "application_id": "extracted or generated ID",\n    "building": {\n      "type": "residential|commercial|industrial|accessory|mixed",\n      "storeys": 1,\n      "height": {\n        "value": 4.2,\n        "unit": "meters"\n      },\n      "total_floor_area": {\n        "value": 1500,\n        "unit": "sqft"\n      },\n      "occupancy_class": "small|medium|large",\n      "has_mezzanine": false,\n      "attached": false\n    },\n    "property": {\n      "address": "extracted address",\n      "lot_size": "if available"\n    },\n    "applicant": {\n      "name": "extracted name",\n      "contact": "extracted contact"\n    }\n  }\n}\n\nExtract all numeric values precisely with their units.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 13:09:53,948 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 13:09:53,950 - httpcore.connection - DEBUG - close.started
2026-02-06 13:09:53,958 - httpcore.connection - DEBUG - close.complete
2026-02-06 13:09:53,959 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 13:09:53,977 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D80470>
2026-02-06 13:09:53,979 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000251A0C39A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 13:09:54,010 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000251A0D80200>
2026-02-06 13:09:54,012 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 13:09:54,014 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 13:09:54,015 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 13:09:54,016 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 13:09:54,017 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 13:10:25,151 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 21:10:25 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'22000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T21:10:17Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T21:10:29Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T21:09:56Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'30000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T21:10:17Z'), (b'request-id', b'req_011CXsW1kixtbypziEtg61LM'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'31045'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9da1990e2b5d34-YVR')])
2026-02-06 13:10:25,154 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 13:10:25,155 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 13:10:25,167 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 13:10:25,168 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 13:10:25,168 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 13:10:25,168 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 21:10:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '22000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T21:10:17Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T21:10:29Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T21:09:56Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '30000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T21:10:17Z', 'request-id': 'req_011CXsW1kixtbypziEtg61LM', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '31045', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9da1990e2b5d34-YVR'})
2026-02-06 13:10:25,170 - anthropic._base_client - DEBUG - request_id: req_011CXsW1kixtbypziEtg61LM
2026-02-06 13:10:25,178 - __main__ - INFO - Claude API call successful
2026-02-06 13:10:25,178 - __main__ - DEBUG - Response usage - Input tokens: 11236, Output tokens: 1794
2026-02-06 13:10:25,179 - __main__ - DEBUG - Claude response length: 5418 characters
2026-02-06 13:10:25,179 - __main__ - DEBUG - Claude response preview: ```json
{
  "permit": {
    "application_id": "BP-2026-00147",
    "submission_date": "February 3, 2026",
    "municipality": "City of Victoria",
    "application_type": "New Construction  Residentia...
2026-02-06 13:10:25,180 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 13:10:25,180 - __main__ - DEBUG - Extracted JSON string length: 5406 characters
2026-02-06 13:10:25,180 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 13:10:25,181 - __main__ - INFO - Successfully extracted permit data
2026-02-06 13:10:25,181 - __main__ - DEBUG - Permit building type: residential
2026-02-06 13:10:25,187 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 13:10:25] "POST /extract-permit HTTP/1.1" 200 -
2026-02-06 13:10:25,534 - __main__ - INFO - === Validate Permit Request Received ===
2026-02-06 13:10:25,536 - __main__ - DEBUG - Request data keys: ['permit']
2026-02-06 13:10:25,537 - __main__ - INFO - Validating permit for building type: residential
2026-02-06 13:10:25,538 - __main__ - DEBUG - Permit data: {
  "applicant": {
    "bc_contractor_license": "BC-CON-2019-45678",
    "company_name": "West Coast Developments Ltd.",
    "contact": {
      "email": "ravi.kumar@westcoastdev.ca",
      "mailing_address": "500 \u2013 1234 Douglas Street, Victoria, BC V8W 2E6",
      "phone": "(250) 555-0184"
    },
    "name": "Ravi Kumar, P.Eng.",
    "position": "Senior Project Manager"
  },
  "application_id": "BP-2026-00147",
  "application_type": "New Construction \u2013 Residential",
  "building": {
    "attached_garage": true,
    "description": "New single-storey residential dwelling with attached single-car garage, open-concept living area, three bedrooms, two bathrooms, and covered front porch",
    "has_mezzanine": false,
    "height": {
      "code_limit": 4.5,
      "compliance": "EXCEEDS - variance requested for 0.1 m (10 cm)",
      "unit": "meters",
      "value": 4.6
    },
    "lot_coverage": {
      "code_limit": 40,
      "compliance": "COMPLIANT",
      "unit": "percent",
      "value": 35
    },
    "occupancy_class": "small",
    "setbacks": {
      "front": {
        "code_limit": 6,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 6.5
      },
      "rear": {
        "code_limit": 7.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 8
      },
      "side_east": {
        "code_limit": 1.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 1.8
      },
      "side_west": {
        "code_limit": 1.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 1.5
      }
    },
    "storeys": 1,
    "total_floor_area": {
      "code_limit": 1800,
      "compliance": "COMPLIANT",
      "unit": "sqft",
      "value": 1750
    },
    "type": "residential"
  },
  "construction_details": {
    "exterior_cladding": "Fiber cement siding with stone veneer accents",
    "foundation_type": "Concrete slab-on-grade with perimeter stem wall",
    "framing_type": "Conventional wood-frame (2x6 exterior walls)",
    "insulation": {
      "ceiling": "R-40",
      "walls": "R-22"
    },
    "roof_type": "Pitched roof with asphalt shingles (5:12 slope)",
    "windows": {
      "type": "Double-glazed, Low-E, vinyl frames",
      "u_factor": 0.3
    }
  },
  "energy_efficiency": {
    "energuide_minimum": 80,
    "energuide_rating_target": 82,
    "furnace": "High-efficiency natural gas (96% AFUE)",
    "lighting": "LED throughout",
    "solar_ready": true,
    "ventilation": "Heat recovery ventilator (HRV)"
  },
  "fire_life_safety": {
    "co_detectors": "On each level",
    "garage_separation": "5/8\" Type X drywall (fire-rated)",
    "gfci_protection": "Kitchen, bathrooms, and exterior outlets",
    "smoke_alarms": "Interconnected in all bedrooms and hallways",
    "tempered_glass": "In hazardous locations per code"
  },
  "municipality": "City of Victoria",
  "permit_validity": "24 months from date of issue",
  "project_value_and_fees": {
    "development_cost_charge": {
      "currency": "CAD",
      "value": 12500
    },
    "estimated_construction_value": {
      "currency": "CAD",
      "value": 485000
    },
    "permit_fee": {
      "currency": "CAD",
      "value": 3880
    },
    "school_site_acquisition_charge": {
      "currency": "CAD",
      "value": 1200
    },
    "total_fees_payable": {
      "currency": "CAD",
      "value": 17580
    }
  },
  "property": {
    "address": "1234 Cedar Lane, Victoria, BC V8N 4K2",
    "current_land_use": "Vacant Lot",
    "legal_description": "Lot 15, Section 42, Victoria District, Plan VIP12345",
    "lot_size": {
      "value_sqft": 6500,
      "value_sqm": 604
    },
    "pid": "012-345-678",
    "zoning": "R1-B (Single Family Residential)"
  },
  "submission_date": "February 3, 2026",
  "supporting_documents": {
    "building_elevations": {
      "pages": 2,
      "submitted": true
    },
    "building_sections": {
      "pages": 1,
      "submitted": true
    },
    "energy_compliance_report": {
      "pages": 4,
      "submitted": true
    },
    "floor_plans": {
      "pages": 2,
      "submitted": true
    },
    "foundation_plan": {
      "pages": 1,
      "submitted": true
    },
    "geotechnical_report": {
      "pages": 12,
      "submitted": true
    },
    "roof_framing_plan": {
      "pages": 1,
      "submitted": true
    },
    "shadow_study": {
      "pages": 3,
      "submitted": true
    },
    "site_plan": {
      "pages": 1,
      "submitted": true
    },
    "structural_engineering_report": {
      "pages": 8,
      "submitted": true
    },
    "survey_certificate": {
      "pages": 1,
      "submitted": true
    },
    "title_search_certificate": {
      "pages": 2,
      "submitted": true
    }
  },
  "variance_request": {
    "justification": "Additional 10 cm required to accommodate specified roof pitch (5:12) for optimal drainage and aesthetic consistency with neighbouring properties. Shadow study included.",
    "percentage_over_limit": 2.2,
    "proposed": {
      "unit": "meters",
      "value": 4.6
    },
    "required_maximum": {
      "unit": "meters",
      "value": 4.5
    },
    "type": "Building Height",
    "variance_amount": {
      "unit": "meters",
      "value": 0.1
    }
  }
}
2026-02-06 13:10:25,542 - __main__ - INFO - Fetching rules from file
2026-02-06 13:10:25,546 - __main__ - INFO - Loaded 3 rules from file
2026-02-06 13:10:25,546 - __main__ - INFO - Starting validation against 3 rules
2026-02-06 13:10:25,548 - __main__ - DEBUG - Checking rule: RULE-000001 - BC-DEMO-001  Single-Storey Residential Building
2026-02-06 13:10:25,548 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 13:10:25,549 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 13:10:25,549 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 13:10:25,550 - __main__ - DEBUG - Condition 1: building.storeys eq 1, Actual: 1
2026-02-06 13:10:25,550 - __main__ - DEBUG - Evaluating: 1 eq 1
2026-02-06 13:10:25,551 - __main__ - DEBUG - Evaluation result: True
2026-02-06 13:10:25,551 - __main__ - DEBUG - Condition 1 passed
2026-02-06 13:10:25,552 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 13:10:25,552 - __main__ - DEBUG - Key 'use' not found in path 'building.use'
2026-02-06 13:10:25,553 - __main__ - DEBUG - Condition 2: building.use eq residential, Actual: None
2026-02-06 13:10:25,554 - __main__ - DEBUG - Condition 2 failed: field not found
2026-02-06 13:10:25,554 - __main__ - DEBUG - Rule RULE-000001 conditions not met, skipping
2026-02-06 13:10:25,555 - __main__ - DEBUG - Checking rule: RULE-000002 - BC-DEMO-004  Two-Storey Residential Building
2026-02-06 13:10:25,555 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 13:10:25,555 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 13:10:25,556 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 13:10:25,557 - __main__ - DEBUG - Condition 1: building.storeys eq 2, Actual: 1
2026-02-06 13:10:25,557 - __main__ - DEBUG - Evaluating: 1 eq 2
2026-02-06 13:10:25,558 - __main__ - DEBUG - Evaluation result: False
2026-02-06 13:10:25,560 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 13:10:25,561 - __main__ - DEBUG - Rule RULE-000002 conditions not met, skipping
2026-02-06 13:10:25,564 - __main__ - DEBUG - Checking rule: RULE-000003 - BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 13:10:25,565 - __main__ - DEBUG - Checking 1 conditions
2026-02-06 13:10:25,565 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 13:10:25,565 - __main__ - DEBUG - Key 'use' not found in path 'building.use'
2026-02-06 13:10:25,566 - __main__ - DEBUG - Condition 1: building.use eq mixed, Actual: None
2026-02-06 13:10:25,566 - __main__ - DEBUG - Condition 1 failed: field not found
2026-02-06 13:10:25,566 - __main__ - DEBUG - Rule RULE-000003 conditions not met, skipping
2026-02-06 13:10:25,567 - __main__ - INFO - Validation complete - Valid: True, Violations: 0, Applicable rules: 0
2026-02-06 13:10:25,567 - __main__ - DEBUG - Summary: {'total_rules_checked': 0, 'applicable_rules': [], 'violation_count': 0, 'mandatory_violations': 0, 'advisory_violations': 0}
2026-02-06 13:10:25,570 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 13:10:25] "POST /validate-permit HTTP/1.1" 200 -
2026-02-06 13:15:32,291 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 13:15:32,291 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-06 13:15:32,291 - __main__ - INFO - Anthropic API key configured: No
2026-02-06 13:15:32,292 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 13:15:32,301 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 13:15:32,889 - __main__ - INFO - ============================================================
2026-02-06 13:15:32,890 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 13:15:32,890 - __main__ - INFO - ============================================================
2026-02-06 13:15:32,989 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-06 13:15:32,989 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-06 13:15:32,994 - werkzeug - INFO -  * Restarting with stat
2026-02-06 13:15:34,065 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 13:15:34,065 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-06 13:15:34,065 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-06 13:15:34,066 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 13:15:34,069 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 13:15:34,502 - __main__ - INFO - ============================================================
2026-02-06 13:15:34,502 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 13:15:34,504 - __main__ - INFO - ============================================================
2026-02-06 13:15:34,531 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 13:15:34,542 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-06 13:15:45,837 - __main__ - INFO - === Extract Permit Request Received ===
2026-02-06 13:15:45,837 - __main__ - DEBUG - Request data keys: ['pdf_base64']
2026-02-06 13:15:45,838 - __main__ - DEBUG - PDF base64 length: 14684
2026-02-06 13:15:45,839 - __main__ - INFO - Starting permit extraction with Claude...
2026-02-06 13:15:45,839 - __main__ - INFO - Starting PDF extraction - Type: permit
2026-02-06 13:15:45,839 - __main__ - DEBUG - PDF base64 length: 14684 characters
2026-02-06 13:15:45,839 - __main__ - INFO - Calling Claude API...
2026-02-06 13:15:45,840 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 13:15:45,845 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDYgMCBSIC9GNSAxMSAwIFIKPj4KZW5kb2JqCjIgMCBvYmoKPDwKL0Jhc2VGb250IC9IZWx2ZXRpY2EgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YxIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKMyAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL0NvbnRlbnRzIDE2IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjUgMCBvYmoKPDwKL0Jhc2VGb250IC9aYXBmRGluZ2JhdHMgL05hbWUgL0YzIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE3IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9Db250ZW50cyAyMCAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE1IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkT2JsaXF1ZSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjUgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagoxMiAwIG9iago8PAovQ29udGVudHMgMjEgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNSAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTMgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNSAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE0IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTUgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA3IDAgUiA4IDAgUiA5IDAgUiAxMCAwIFIgMTIgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNiAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxMjIwCj4+CnN0cmVhbQpHYXUxLTswMUdOJkJFXSgnYDFFXmZUZyIjaS1UM2hqPGRxcEMjSUYtJVBOXGtXKT9oSFo6VGRoSWstLVgiUUVhOUVzI3AyL2FgT1xwInUjXyZIJ29HKVBtSDQpMTkpbzVULmNdNWU1J0gyTS51NGxgITxzLDZKIVFDJ1djVCFcT1FwQSFTXjo4R0JQNFM9Wkd1IylsYlJOKi5yJmYrISolRnIhSFc1Q2lgOi0qYmxrUXEzRkAhXFJRVDZxKmhIUkQrNCksS3I/JUYiZGJAXj5lO10saj1zMSs+KyQuJTBMa1BxXTZTRD1HInA1TixmPzZiQkBQdE9mZj1CTF1kOEI6bzUrWGRFLSFMWiVrRTBGciQsRD48RSpDcSMlPUReQCh1OmwjS2w1NEw+OypSKGV0MCcoRCQnKWRRIk8qb1olM1NDMCNaKE51NG02UTtSUjZTU3I5MGEsPzQsQFUtJGMsLytlVF8oKkpBM0ohQC9uWD4jWydVPzIqaj0jdEMmWSZfYEA3VCY/V2oxSSg0Qk1XbHFcVGo9UHNgV0gyI0Q0RFpMJmtCbDFHMTg2KTZjXjdjcmNGMVJwVUNcX0FoX0pJJFJKQWw9N2tdS09OW3FpKWlbMVw8RzJVMUswYFdnKVpaM0IkYVc1c28xYzA8Ki9qZGc2aHJ1bGVwSFhsalFLMXRIXj1cJTQlQDRacGpSQidIVDZBYWQ9cl9vZUckQktzIjVkO2ppIU4yY0ltQENBNUk8QmQ3Rl07L1hfM2pXRWotYTdNYjdJPWovTSQpUUYuXXU/XDw2MFAqOGMzbl9TQFs7QzBGQV1ZTVRMYF07KjJYXTUoP1NDKkw2Pk8iY2dFMTxFU0ZebDtaMi05Xlg5a0xwL1JdXSkkRGBpVjEnRzM3NCNZcywybDcrbCw4OSc/X0M3Q2xeX0VeQGxHRD41SUwhYHIrU0ZVKy9qQGNdOW5AXmQsLTFrYTgxTF5NbnNvMVllOWdrZllJVEBeJXIqTE8/PEg8Q1g3b2JwK2laPFonblQ9VVhlWFlLdGxQPERPNl1HNFUkVjVabGgpQm1sQ1EuV2U8MTYuQDxvMj85b09EWHFtayZENU1sWF84XFFraTA2VTllYj0qUGRbK15AciloPERaPzFSakk+aVZVJnBmaElccz4/XCVWQiVcWiRsbGFgRXNZPlMnQFdGcGtTRS47JjpJIVMqOzdUUiInSSEtYDNiS3JxYFFzKSJBLEFhTWtVYHVmMDFZTHQmU0FDT0hESk0oTlw7cy5BM1leLixmNkozR3Mnc3FwWHFgY08pVmRPVUFaSzVyQlY6WXNlXCVzSTtUXShaJGQ+S3BuakxLLWkxRi1tUTlFK2AyVihETzc9cmM5TyxSODUwRGVVSWknLGAubyYiPWlTQHU1RTp1UkZoSiQ6KEI2R3JjSGA1XmNmRWQhcUptcS1mOjdPVz8pUkleZWg7ODVcMzBeOzpVYE1xSV5BKHNmWWpNSVgxWi5vRkRDbzI3aFloLkBsPVVNPjVgVjMmOSw8VzpHOm9CQVdWdF5tI2hxJyZQYWxgKEhuSShSLiFabkcmNi91IjkxJlFJJmYnYyY8SCI2IiVTOzRmdENvXE9acnJCXUApOGx+PmVuZHN0cmVhbQplbmRvYmoKMTcgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTQzOQo+PgpzdHJlYW0KR2F0bTs+QmYnYiY6V2VEYlktOCpIUFdgK25MXFtLPjslQG4tR2NWSTZYR0VYaTcsMmtDcjU+bEdAVlpJVW1QXUlfdVtlaTdjM3JTRjtaSmRwc0E6aGMyYy02cGk4ZlMxNUhdMiJWRDtPX2R0Wk4pVVpSUkYyNF4pKS9UaXAjM14uLjFObVwsM0Q8XVRtbENrOiIvQjZiXSdIbnBqVHJvKS9ZaVZLTDJbUiJCQWpdNj90MnNpZicnTG9lL1piVj9CZiU4UVxqI0g2QnM7dE1cQ21mK281X1BoLFZBZVIhRjddUkkvcj1NYUshRCdxL1hbU0VfaCUoYUliME1HJmIzZic5VVxdcGFQcUNDRS46XTIuSTwwYjotUV4uZCdmPiYnZz1pKkkvPz5pZk5AO24xSlsxclw9SDFkLys1Xm1gMUJeKWJba0d0W2BxJ3NVP11RSFNNaSY9aDhxK0lKZi9MJGtXR2lWNkFrTHBmIm87bHBpWStpaCxBQz83bWRoIjZpVylzKzp1YXFgIidQam8qJWZFQi5AXmV1KV08IThxXEpzRlVxSERXLEJQVW5hX21CZWhnUy5cPjJyMllXRUtPOmQtJydoWVxsT3FZLGZ0cDpUakNdbEI3T2FfKFxePEdnbkc/OCg5VlNyby5lPlk1TzdmaDdhQ1NlJT9HXW04R1heT19EdDpIP2U8UURJODtdUDtAZ2NwS1dMdWZEQ25nT0NkYEF1IWVSQEBBUSojKkFePUBObj1XISFJaXI1SWkpOF9QSDNIQEtSPCo9TmFwRGB1PzA5TFM8UzhGRjJEV2c0YT4kQGFYYFVJJTszRlp1cEdEUFgwYy1fKyQzWUcsSiElKENsOXRnPVRUdTxrYUI1W1RMM0hPSlopdGleXm0oOyNNZW1NKCkna2MqZi9ObU1gMFNgaEdqLUZxTkcwYzlYN1gsSmZtUTlOW2FFNDBlYSJaSGE/TmI2Y0ZLUj9oZjFEOW1MQkcmKiNuJzJKNT9rJUJgJ3I+TW4pcWFaVkJhZm5tb1NRKUNwS0hhRyJeQks3a3BbYWs5TD1jMk4vLWgmdSJLM0lkZiR0QkVTIU5FcVhILStIOy8ibG8rKE4oJTNxI29DYTBqPk4sTVNEbiI/NUlfQ1JKTyw9UVU/PydXcGklSFFfWHA0JFRIN2tvLkZrXDxxOS8lO11rbSFOZjReV0VTZkIsZyZAZCFTa1J0IlBwal43MjtRUFwrOkFMc3AlLEAwO3BeSWdCL241aGAnIyxKZWciOUVHOWtcJmRxVFFoWmIuKjdUNm1ZKGVoKV4vSyZsXi80K1U+bzhnWScjU0YrIS10dEMoSS9mLVRuYk1CZ1Q/LGRzc1IsK15zOCwzITViQ1duUic+PCFEcUleOGdVT1dARE85cnFoXC9mbj1VZkNRNWs3QEE7ckw1UihBU15FS18mcyFWR3JeJShQK2hRY01fZWpLWSxtVnVacFZmL0trKlEkU0I0XGc3OGY7RF9cbSJGP1ZGdCY+aWtbODBAMlBDZzxVYzAhclQnb1YhJWohNSM8RkwsQ2kxSzlUIWxMJmtFSUhkVmFucmdYTTYvOldfcS9DPjFaRTxUNyxHQUs3K04lY1tbbENnS1k2bTA9ZS5eRmUrOztkKyxacz5DW0pSZGc5RDkpbUZaPUQ2P0lCZVtzJD5eRHFkQCNmWzEwajw1L1AuNCYiJGZNQFBia0o4QyFyTEduIjUoOXFiIk1BWUFVSyVaYSxlYi5FLFFMMVlVXTpRV2FmOVZyOTInYzNXJVJvTmA1UE0zTidcazZWWidYU2w/KWxBVlVnLW5ZM2lNTVA7WSdyRnEpdWhYKTljRiYrVl1ick4yclMrJWpxS11bIjtxKVdmZFpdXzVAYUZDSWlLUWYqL0pTXGk+R2w1RWc+ODomfj5lbmRzdHJlYW0KZW5kb2JqCjE4IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDE0OTUKPj4Kc3RyZWFtCkdhdTBDPj5zOTknUm5CMzMzdEVRUEJPMiNyUERjMyc7MzVGS1hBPyVHdThCKDsoRzs9QS8hQnVeSUxtX1wyclE9U050MWM2S15HZnE5SHJDR2tnZ3JHPlNCZypsSU5wIz0hYi8lL2UyK0AhaTk1RVVRdVRoayFNKDg6Pk9yZjAiIVNeYl9gQWdnOVhWMzNpOjldYD5uTCdTVyU1b24tYWhoU102aEhdbmJwLmw4Jm1ULDtXOEAjWGInKE4rITwnUXAvVkxDNWkjV1pqPGFpV0ctaF8iYVtVRilDQW8hJUgkYSVBWkp1LCVKRXQ1JDBWNDEjcHJKUlI7UVEpYz49aUBEI3BwJzVQQ3BEXClSIzwvTyNpUlknWzRsOkJtWCdlKFQ1PU05NTI8Tk8mIyJoTFFHWDllIWshMF0jOCdyZFJmXlEuYEokM01BcT4iTWpYMUhcSEFkTFlhWVRRYzNPOFMrJUthYk5vOTskViViLjssaCxdNCxvZlRIdSItYDNNaShFXj1wWkhAYyc3V1kmY2hKaCM1UzAnTkNVNW1NQF1TYkslUFBVNSUyJVddWGYocWJIJGE8PjUvJVcvSDg9cGJVLS9dRS05J1koPk4hST5hZD8zb0ErWDFkXTs3TGw7SSVHTUlZOCFuK1dFPEMuLVZmcjxAVjFxPTIlVCsxSEM4dUlSaVwkWWgyXFcjbWwwJEYtYUNgU28xWyFnWC9XXGdmWSszPD9nYlEuc0ArQW02cW90T2tVLjRdOjJ0UlRROTB0UWxwbiJWbnJhdSxSN0hTbCxnIWw0NklHJ3Ixa2Y1OmEiQkclTiR0XzpyMElocjtxdW8jaTdkRG8/LkRiOjo+R0U4JG5LLVlEW2hnSUxQSWkhTXMzMGIiWC0qJGs3Zjo6ci1AVkNlczM7TzszWjRYOjBFWV1WZT0+Kk8iVjY5bmVJWjZyIVlyXTFPZHJjUl9QKT1KImtoRSEzUktOclBUWVovPiddWmRIbEBHUSo1RTBjIzk0Ul0nTUtaZ1dFT3FWU1g+Iy1kbjBSZW9SNjkyWWdvRChXUSc4JzwlQTxqNCxWNHQoWjxBak0kX1o+LShGXXMyS2JNIm47VVV1YWtXL1VjQUYnUGBuJWNBI1RMLzM3KT4jbGIoMGspQSQlY0RAYCgkRFpQUUxzTjQ4LUFsdHFPYjFbXkZOa1ZoZzMxRWQxcVhoOi1UJFw/UXFPQCU8ZzdOUVh0SW83RTE1YylrVEksWmlWLHJSOk9SdHFdXTt0MVQqXCMrWj1HSzRic2UuY1BVOGRdaVZvIT83aF9VX0BiVW5oKW1WbWokVVJMJktQZWRfLzAsKTFxNzsuUF0lVE0nWzpFdEdlQWo2UjwyZiY3XSFlXzdDKHA1QkYubVRASzlfRSNhXWlDKUYuL0JEYig5JWRuOVpFVF8nKTc9OnVDSUpoWjdyXkZMXW11ckItNDVKMUtebU1kMF1FQThgMiJlMmoyYWpRSV1DOERqZzlGZyNaLmhTJE9Qa1ZNJlpEUyIqRVA+R0c1b2Q9QjdyYT0kcStHRVVjdEcmKk4/KE4+SXNMYjleZCkmWjJSMzQuJjcwVUVEZTEzcztHRzlIMiI9SSdvV0VuRFEzOzFmInQvYUE0N09YNEw5NzpYU2hcZ0VINCpjLW1lcUVjQT8xOD5GaDEnbU1LMFlVSERPLG9xQSJpYXM4U0gxUls+I01XPUsjPHEtQmpyI2lMcFZjRyhnQzoxPU1wXmo3S0szNW4/THJJKm5APF06a3JmOVVgJj1jSCcwQi4mNDJCTSomQGpNcDptIWlnaW5rJURvazFHOztLPTQvLVA1I08sKCtkQW5hKDZMNSNxQlQ8ZCtrKl11UDJCVWdfXVxZSDtjJkpuPihqcXNkPUFkRk1Dc3JSI11YLy45PDNnYmQoc11cRSxNYlI9I2pQJDU3bj5KOHU/YSMiT15tVl5GIVstJGBkbUMmWWJwVTByYm1wR3E2Zlklfj5lbmRzdHJlYW0KZW5kb2JqCjE5IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDU4Mgo+PgpzdHJlYW0KR2FzMkY2I1lMMyUjKzBMKCUzbiNoOC1HUVxrQEEoSkYsJlc7U15wNihLRnBSKDpOOXBaQGkvUjswTE02IUIobE4sYWomSyw6Uz09P0Y+MSohLjhZUmwrO1BJZDJuciVhcDU6PG5aPUI8S3Q5Wjk8cW9xI1pCayI+cTwjPyRTPWJbUjM9WCJxIlAoLD5XIiNKLjZXTDE5PG88aEJAY0BKL1NfLSJESSklQlU9P0FsR0dBKEAySWBxckBbci43TG83Jl1VPW1YWSdTTFNoWGg0UW9AZHJrazIvU0FHSGs5dCVxNUcwNWJGcFQtI2tWUjklTXJeUmtuXGE6ZTo0c21cRT9sZF1uaFlNXilFRjJxcWI/W1hsTVZhSypRclU3SVYpN0M6RTxJLzxGck1NUVkwYXJBKV1ldUQ6JVlBOzFQMGpWQzJxMiU/LExuQGo1UkJFOT5aZEFbV0M+ImE3cDs1PmskR1lzXjM2U0c7PCRadCNPUjZOPjsrMltGMG1OXi5uO29eJDc2ZC5VSFk4TzJIb1g8Ql5laVk6dDs4akBAcDNiPmcoVTo9Uk4oLlVyIi5IXGhHRVdaUGk5NnBELz8uTCsjKHM5RyhoZW1YUihNNCMrMFE8MytBXUhWJDRlLmleJG1NMlFRXGY3byNlOykqcEglQWw6bE5TV3EuRXBHK0VsSzgxTGNnPilgZiMwNktHOj8ySWlDV2s6cFViVGs3czZhaV40MjNwTEUhXWEwTShvayMsPG1UQT8kOWJiPkNVNzIuR34+ZW5kc3RyZWFtCmVuZG9iagoyMCAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxNjk0Cj4+CnN0cmVhbQpHYXUxLzk5XCdoJkJGODIuSmc5Vjc4aCgvS2AmdEVSN0FhPTNRcW9dbVVcIWg+Q1tBT0xiNk5NVDcxIi1EODlPZUIlUyIrNnNKKz5WY0hIKjYsOkspVT5OaiZpNik2ZWhAVWtFLTt1JjJAUElUZlwhKmsiPS88ImBnPkVRQykvVjk2J1g1bUM9KyVabGIyQG9JP0IuYGc3JWsvR14zXEczPG03X05KJ3BzIzBNLC0lIWNhSkZWK1BSXj1ZUXVvTW5HLWsyTTdKXVhBWTImJyFDQ0FyMGJMIkhqPmlXMFI5aysqZCVFVk8yVWFDK28yWmZNSXVYSnFDW14uKEh0WSkyTFVYZ2U2aGgiQVkka0I/akZFal5eOm8lU3I5M15GXWQhS0AuXCxeZTooUE0say1sZlZjcGE3NUdwVDloPlRsTHIpPFFWbVhUS1dvPU9XQlxvV3FYIygsVEZvWmkvTkIqczIiQjNHUTM8WTJpLTRmWkE8Y2lpJydGRF1SJ1klJVckaTNfJVRlVDJYJS5BRmBROCdKQScySlQ7TW85aCM5V25QJGoiJVxGUjNqcW5FVjFBR3JCQ0lgI1Q7WlRvKT1nMFheJD9qOFJIPC9QQyJlJ0wpZjtWYTdfMl9tSFtkI3FCLydoPiMoZGcxNlY/WTAkP28oNShFMFgwU0JmZlRWTHBnOmVlR0otZSgxIzZpKEZlNE9rTy9bJz0kVVJjOEA0TSZoKWQyUGMmNTRwQiVdWjlKOCFmZmUyWW9LVVZROj8vPXBjRkgoUDZQUztaZXAwRCE5T25QSz9wSlluKmVKbTFWbCRiTyZpcTUlUFZmNWAsPC1kcFAzZC0obmRZUllIJkpNJE89XUQpciRELCVNMk4nQDckSDtmaGVFTTE3UFslVjAxYSU1aEJqYC5XWDJxK0NrPzNhOnEpbD1KOiRbR2pCJXIzLGhZI2lxI2VlSk4wakRQPFNoPzFuQjslOXFkQ1sxPFc8bFpLVGk3UiFFdXNFbihzPUM0aiQjOTwvVFNyQGMkRkUyRUEiSiVDNWMiM2svW1xsLGFKYGBEMVdTXyozS0hXP3JOUzguOENHNzAhSnImSyYzSzAoSklnW2BWS2FPKEtfcF1oSEVxdGs5J0whVUhaW1ByTyFXOXMtYyYrZV8sYS4tKCJeR1xyTyZLM3UzMUROZDg0bjtDLzNKJ2hiWURaZDc/X1Y6SjhuKnA/J2JBWDo/OTkhLVdaMyl1cmMzZlRSWFtGUzNNVkZtdFUxaHMmPz1UKF81aGU5UVtQZTBlJU49YWhfPEJJLUtLanJzaSglby0hLyc8Z1NuP11BYEZSQjQ1OGxvbFJzNyVra1s1Nl5tY2JAM11oY2U2MEFUTihLZ2JzKy1bR1xkP0opRjA1Sis5PEluMm9FXlNhOjg6US1va043bmA7J0tYRyFsZDUmNldETEE6PjtkOUc7bVg4NjslaGonbUNYbDN0T0lLOFFwbDUqcGQpTmBncVhfcy8pI0k7ZXBTLEhePTpIIWgzJzhTKi5UJ2tUbWdiRzxMOyYvI0tETWUyXC5NQXJqOXE2clVLXj88UytDKjRhPC0nRlNeWyMibV0vJV1pQjVGQDEwKXApM1cpbXJBWlI4V1Q0VVg/Sjc1WDVSSCt0a0RBQGtFY2UmKFQzPStPUFNNT2wzMFp1XGJXZWEwKXJJPVpIK0wnZXEhbWdWJmoxTzYpMF1AYDIzS0xFWF1TNjBaXUxEUCxva2F1Qkc4YTZlKnIuUkc1SEMiYj8sJGkiUVFZR21HVTtOdSZjW2NpWW4yZ1tQU2VwQVwuakhCQlhiYWtLYVElb1FZSidnXVUmJW03YjU7aj5TUTFDJT9WXj41VygvWSo/QChdMmZsNzdCUWJCIk9ZRXBUJi45Z0VPPnQvVSxXLG8sVTwmW0crYz1YJlo+ZzMrYl5rNUFeNG1mLlk4SDddTV1idCpSKHRAMWYsZjM8Sz5iVShDXFg9WlgkZj8zQDMrSTw/Yz5fa3BdYmZSJ1xpNCVmKldiYTVLLGZHXjdOPDYtVzxJM2c+RlkkUXJDKDA/WFlSNFBdOGUvJWo8aUZxKEFGUkhock1VYVU2Sy1LbzkiWjszWHRoOWhoUCY2V2A6bGVPMUc3LiolJTJqViNLciwkaTdvPVddQkksIz0zXTokVD9KalcpYz1bZEYuSUg4P09GYj4vOWtvNDJPczJARiJwPFpHaC1xMGZuQEwtaiw2ayxpTmk/IWtDdElmXF1DT29+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTA2MQo+PgpzdHJlYW0KR2F0PSlnTiklLiUiN2tPaTZnNHQ8KUpybF03JkJpYWowPkpSVjtRR20tSEQ9Q3A9XkhLZCxvbz9YSm8jPyxvWiZqOCgpMSFZLFxtIjtvKUxCJlU0YCEjR2dPXDdXTWguLUE9bi4jJFhpPlNWbUghU187TTBoZzVhUFh1VnFSOTlzPk45dV9KN2VTNk1PNV9tS0Jgcm5mP1BsMjgpTDBgcCdsW2YkRDhcQjc1V1UyYGRJSU02SHFzXWRkczQpVSgoSm43VGYnRE1BKE5FZCMpKThGLz9SOCs+JV8kcEAyR0ojbkhGZTc0UFBxaElfbig6cjxEOjUwSjoqaV1rWGNUJkZaJmwuKC8/QUVQNkdYM1hcUSxXS2E+UiJLLz43IW9cSlJSUydMXiY4YGpJTGxPWmlfczA1MWFfcmxYNF1BNy4xbkVhLmxBOjdrbTlEO2ksSD9qOyxSKDA0WFpNbWgvVkA2Ry9RMUdQSWMoZWA/YywkWTYlcGhoTmJeKEdLK0FHUkheb09HTlkzR0xeNzsjS0E3TzFUR1QsN25sWFVyLFo+JF9bR11UNytKOzpVQ1R0IzRMP2ddcjNwP0Y8VSk1VXNKbkdmY0YrbSpjOkdvZE1dKG5pTG5qNzc6ZSloXTBFJ18mO2lnbDEvWUZKVGMjQmdmdGkhLTpgTjQuM3QqcCk8Q1pqKDhiXCZMO0BaVDE2VVwsRVVNXFtUb3JuKDNzc1ZPVV09bmdUKlFycjNwPjomOjNaOF1AJ2pVRipAZmBHaFpJMzxxUT8nJjVBP1tSUD9lN2hZXTYtXywtOnA2SXVFWlQ1Y11JW3QlPTJNcUtZOl9zOHNPazREMFJmZHJUMS42VDQzKGAidExfcCpibkQ7MGwwTERgRVYlUSpiUyU/M1QiaktgVjY4cVUqcXJsQStnX3BtWEAtNj9qTlg8VnNbajJXWmVrOWRcS0dGYGlpOlo4aGRTKiFqMUk0aEFcLGF0PGZKTCN0aVQ3UkpgNT5qMzVqOUpJVlM8dE1VJUJrV1QsdDJwInBAP2lhKSxqQy5BaGBPIlVlYENEbjtcLFEiVDVAZWdjXFpRQjlsWmkmXW9EJHA/TFZXUzFxR2pSRCJQNDMzPS8uMmldQS9uYlcxU2xMIks/MytjVCIkOzFAVXJAQGB1I2A5UDBAMUUxYGRiYWY0ZDFlSTlSU2o0PkJUZz9dNFtfITVkRzozdCpvcm5UWShXblphVCtoQ05VWWFqUEY3RS1uXXAyMWU5WmdBMW8mbD0kcjQ1TUJCUXV1WilFOycpV2ZLPXBmSl9AaDsybzlIJyVyJDgxLmhRNCFTU2FnSWYpVFU2S2MmVGYjL25UUF5VUEhidTw4VDY/TjwwSktGKTQzcTEtUy9UJ2RyJD06dD5ONFckSkFIR0YjPVhzfj5lbmRzdHJlYW0KZW5kb2JqCnhyZWYKMCAyMgowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwMDAwNzMgMDAwMDAgbiAKMDAwMDAwMDE0NSAwMDAwMCBuIAowMDAwMDAwMjUyIDAwMDAwIG4gCjAwMDAwMDAzNjQgMDAwMDAgbiAKMDAwMDAwMDU1OSAwMDAwMCBuIAowMDAwMDAwNjQyIDAwMDAwIG4gCjAwMDAwMDA3NTcgMDAwMDAgbiAKMDAwMDAwMDk1MiAwMDAwMCBuIAowMDAwMDAxMTQ3IDAwMDAwIG4gCjAwMDAwMDEzNDIgMDAwMDAgbiAKMDAwMDAwMTUzOCAwMDAwMCBuIAowMDAwMDAxNjU4IDAwMDAwIG4gCjAwMDAwMDE4NTQgMDAwMDAgbiAKMDAwMDAwMTkyNCAwMDAwMCBuIAowMDAwMDAyMjA4IDAwMDAwIG4gCjAwMDAwMDIzMDAgMDAwMDAgbiAKMDAwMDAwMzYxMiAwMDAwMCBuIAowMDAwMDA1MTQzIDAwMDAwIG4gCjAwMDAwMDY3MzAgMDAwMDAgbiAKMDAwMDAwNzQwMyAwMDAwMCBuIAowMDAwMDA5MTg5IDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDM0ZjkwNGEwOWQxMDQ5YTkzM2Y0N2Q1MmQ3ZmZiNDcwPjwzNGY5MDRhMDlkMTA0OWE5MzNmNDdkNTJkN2ZmYjQ3MD5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNCAwIFIKL1Jvb3QgMTMgMCBSCi9TaXplIDIyCj4+CnN0YXJ0eHJlZgoxMDM0MgolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this building permit application and extract all relevant information.\n\nExtract:\n- Building details (type, storeys, height, floor area)\n- Property information\n- Construction details\n- Any dimensional specifications\n- Special features (mezzanines, accessory structures, etc.)\n\nReturn a JSON object with this structure:\n{\n  "permit": {\n    "application_id": "extracted or generated ID",\n    "building": {\n      "type": "residential|commercial|industrial|accessory|mixed",\n      "storeys": 1,\n      "height": {\n        "value": 4.2,\n        "unit": "meters"\n      },\n      "total_floor_area": {\n        "value": 1500,\n        "unit": "sqft"\n      },\n      "occupancy_class": "small|medium|large",\n      "has_mezzanine": false,\n      "attached": false\n    },\n    "property": {\n      "address": "extracted address",\n      "lot_size": "if available"\n    },\n    "applicant": {\n      "name": "extracted name",\n      "contact": "extracted contact"\n    }\n  }\n}\n\nExtract all numeric values precisely with their units.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 13:15:46,214 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 13:15:46,215 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 13:15:46,245 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001F060348F20>
2026-02-06 13:15:46,245 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001F060249A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 13:15:46,263 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001F05FAC7380>
2026-02-06 13:15:46,264 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 13:15:46,265 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 13:15:46,265 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 13:15:46,266 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 13:15:46,267 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 13:16:16,701 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 21:16:17 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'23000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T21:16:09Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T21:16:20Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T21:15:48Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'31000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T21:16:09Z'), (b'request-id', b'req_011CXsWTimcgrcNxMntbwtWt'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'30349'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9daa32af80be80-YVR')])
2026-02-06 13:16:16,702 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 13:16:16,703 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 13:16:16,703 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 13:16:16,704 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 13:16:16,704 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 13:16:16,704 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 21:16:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '23000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T21:16:09Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T21:16:20Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T21:15:48Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '31000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T21:16:09Z', 'request-id': 'req_011CXsWTimcgrcNxMntbwtWt', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '30349', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9daa32af80be80-YVR'})
2026-02-06 13:16:16,705 - anthropic._base_client - DEBUG - request_id: req_011CXsWTimcgrcNxMntbwtWt
2026-02-06 13:16:16,709 - __main__ - INFO - Claude API call successful
2026-02-06 13:16:16,709 - __main__ - DEBUG - Response usage - Input tokens: 11236, Output tokens: 1411
2026-02-06 13:16:16,710 - __main__ - DEBUG - Claude response length: 4303 characters
2026-02-06 13:16:16,710 - __main__ - DEBUG - Claude response preview: ```json
{
  "permit": {
    "application_id": "BP-2026-00147",
    "submission_date": "2026-02-03",
    "municipality": "City of Victoria",
    "application_type": "New Construction  Residential",
  ...
2026-02-06 13:16:16,710 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 13:16:16,710 - __main__ - DEBUG - Extracted JSON string length: 4291 characters
2026-02-06 13:16:16,710 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 13:16:16,710 - __main__ - INFO - Successfully extracted permit data
2026-02-06 13:16:16,710 - __main__ - DEBUG - Permit building type: residential
2026-02-06 13:16:16,714 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 13:16:16] "POST /extract-permit HTTP/1.1" 200 -
2026-02-06 13:16:16,939 - __main__ - INFO - === Validate Permit Request Received ===
2026-02-06 13:16:16,939 - __main__ - DEBUG - Request data keys: ['permit']
2026-02-06 13:16:16,940 - __main__ - INFO - Validating permit for building type: residential
2026-02-06 13:16:16,941 - __main__ - DEBUG - Permit data: {
  "applicant": {
    "bc_contractor_license": "BC-CON-2019-45678",
    "company_name": "West Coast Developments Ltd.",
    "contact": {
      "email": "ravi.kumar@westcoastdev.ca",
      "mailing_address": "500 \u2013 1234 Douglas Street, Victoria, BC V8W 2E6",
      "phone": "(250) 555-0184"
    },
    "name": "Ravi Kumar, P.Eng.",
    "position": "Senior Project Manager"
  },
  "application_id": "BP-2026-00147",
  "application_type": "New Construction \u2013 Residential",
  "building": {
    "attached_garage": true,
    "description": "New single-storey residential dwelling with attached single-car garage, open-concept living area, three bedrooms, two bathrooms, and covered front porch",
    "energy_efficiency": {
      "energuide_minimum": 80,
      "energuide_rating_target": 82,
      "furnace": "High-efficiency natural gas (96% AFUE)",
      "lighting": "LED throughout",
      "solar_ready": true,
      "ventilation": "Heat recovery ventilator (HRV)"
    },
    "fire_life_safety": {
      "co_detectors": "Each level",
      "garage_separation": "5/8 inch Type X drywall",
      "gfci_protection": "Kitchen, bathrooms, and exterior outlets",
      "smoke_alarms": "Interconnected in all bedrooms and hallways",
      "tempered_glass": "Hazardous locations per code"
    },
    "has_mezzanine": false,
    "height": {
      "code_limit": 4.5,
      "compliance": "EXCEEDS",
      "unit": "meters",
      "value": 4.6,
      "variance_amount_m": 0.1,
      "variance_requested": true
    },
    "lot_coverage": {
      "code_limit": 40,
      "compliance": "COMPLIANT",
      "unit": "percent",
      "value": 35
    },
    "occupancy_class": "small",
    "setbacks": {
      "front": {
        "code_limit_min": 6,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 6.5
      },
      "rear": {
        "code_limit_min": 7.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 8
      },
      "side_east": {
        "code_limit_min": 1.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 1.8
      },
      "side_west": {
        "code_limit_min": 1.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 1.5
      }
    },
    "storeys": 1,
    "structural": {
      "exterior_cladding": "Fiber cement siding with stone veneer accents",
      "foundation_type": "Concrete slab-on-grade with perimeter stem wall",
      "framing_type": "Conventional wood-frame (2x6 exterior walls)",
      "insulation": {
        "ceiling": "R-40",
        "walls": "R-22"
      },
      "roof_type": "Pitched roof with asphalt shingles (5:12 slope)",
      "windows": {
        "type": "Double-glazed, Low-E, vinyl frames",
        "u_factor": 0.3
      }
    },
    "total_floor_area": {
      "code_limit": 1800,
      "compliance": "COMPLIANT",
      "unit": "sqft",
      "value": 1750
    },
    "type": "residential"
  },
  "fees": {
    "currency": "CAD",
    "development_cost_charge": 12500,
    "estimated_construction_value": 485000,
    "permit_fee": 3880,
    "school_site_acquisition_charge": 1200,
    "total_fees_payable": 17580
  },
  "municipality": "City of Victoria",
  "permit_validity_months": 24,
  "property": {
    "address": "1234 Cedar Lane, Victoria, BC V8N 4K2",
    "current_land_use": "Vacant Lot",
    "legal_description": "Lot 15, Section 42, Victoria District, Plan VIP12345",
    "lot_size": {
      "value_sqft": 6500,
      "value_sqm": 604
    },
    "pid": "012-345-678",
    "zoning": "R1-B (Single Family Residential)"
  },
  "submission_date": "2026-02-03",
  "variance_request": {
    "justification": "Additional 10 cm required to accommodate 5:12 roof pitch for optimal drainage and aesthetic consistency with neighbouring properties, consistent eave line, and adequate attic ventilation. Shadow study included.",
    "proposed_m": 4.6,
    "required_maximum_m": 4.5,
    "type": "Building Height",
    "variance_amount_m": 0.1,
    "variance_percentage": 2.2
  }
}
2026-02-06 13:16:16,942 - __main__ - INFO - Fetching rules from file
2026-02-06 13:16:16,943 - __main__ - INFO - Loaded 3 rules from file
2026-02-06 13:16:16,944 - __main__ - INFO - Starting validation against 3 rules
2026-02-06 13:16:16,944 - __main__ - DEBUG - Checking rule: RULE-000001 - BC-DEMO-001  Single-Storey Residential Building
2026-02-06 13:16:16,944 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 13:16:16,944 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 13:16:16,945 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 13:16:16,946 - __main__ - DEBUG - Condition 1: building.storeys eq 1, Actual: 1
2026-02-06 13:16:16,946 - __main__ - DEBUG - Evaluating: 1 eq 1
2026-02-06 13:16:16,947 - __main__ - DEBUG - Evaluation result: True
2026-02-06 13:16:16,948 - __main__ - DEBUG - Condition 1 passed
2026-02-06 13:16:16,948 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 13:16:16,948 - __main__ - DEBUG - Key 'use' not found in path 'building.use'
2026-02-06 13:16:16,949 - __main__ - DEBUG - Condition 2: building.use eq residential, Actual: None
2026-02-06 13:16:16,949 - __main__ - DEBUG - Condition 2 failed: field not found
2026-02-06 13:16:16,949 - __main__ - DEBUG - Rule RULE-000001 conditions not met, skipping
2026-02-06 13:16:16,949 - __main__ - DEBUG - Checking rule: RULE-000002 - BC-DEMO-004  Two-Storey Residential Building
2026-02-06 13:16:16,950 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 13:16:16,950 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 13:16:16,951 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 13:16:16,951 - __main__ - DEBUG - Condition 1: building.storeys eq 2, Actual: 1
2026-02-06 13:16:16,951 - __main__ - DEBUG - Evaluating: 1 eq 2
2026-02-06 13:16:16,952 - __main__ - DEBUG - Evaluation result: False
2026-02-06 13:16:16,952 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 13:16:16,953 - __main__ - DEBUG - Rule RULE-000002 conditions not met, skipping
2026-02-06 13:16:16,953 - __main__ - DEBUG - Checking rule: RULE-000003 - BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 13:16:16,953 - __main__ - DEBUG - Checking 1 conditions
2026-02-06 13:16:16,953 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 13:16:16,954 - __main__ - DEBUG - Key 'use' not found in path 'building.use'
2026-02-06 13:16:16,954 - __main__ - DEBUG - Condition 1: building.use eq mixed, Actual: None
2026-02-06 13:16:16,955 - __main__ - DEBUG - Condition 1 failed: field not found
2026-02-06 13:16:16,956 - __main__ - DEBUG - Rule RULE-000003 conditions not met, skipping
2026-02-06 13:16:16,956 - __main__ - INFO - Validation complete - Valid: True, Violations: 0, Applicable rules: 0
2026-02-06 13:16:16,956 - __main__ - DEBUG - Summary: {'total_rules_checked': 0, 'applicable_rules': [], 'violation_count': 0, 'mandatory_violations': 0, 'advisory_violations': 0}
2026-02-06 13:16:16,958 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 13:16:16] "POST /validate-permit HTTP/1.1" 200 -
2026-02-06 13:19:40,769 - __main__ - INFO - === Extract Permit Request Received ===
2026-02-06 13:19:40,770 - __main__ - DEBUG - Request data keys: ['pdf_base64']
2026-02-06 13:19:40,771 - __main__ - DEBUG - PDF base64 length: 14684
2026-02-06 13:19:40,771 - __main__ - INFO - Starting permit extraction with Claude...
2026-02-06 13:19:40,771 - __main__ - INFO - Starting PDF extraction - Type: permit
2026-02-06 13:19:40,772 - __main__ - DEBUG - PDF base64 length: 14684 characters
2026-02-06 13:19:40,772 - __main__ - INFO - Calling Claude API...
2026-02-06 13:19:40,772 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 13:19:40,788 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDYgMCBSIC9GNSAxMSAwIFIKPj4KZW5kb2JqCjIgMCBvYmoKPDwKL0Jhc2VGb250IC9IZWx2ZXRpY2EgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YxIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKMyAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL0NvbnRlbnRzIDE2IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjUgMCBvYmoKPDwKL0Jhc2VGb250IC9aYXBmRGluZ2JhdHMgL05hbWUgL0YzIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE3IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9Db250ZW50cyAyMCAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE1IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkT2JsaXF1ZSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjUgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagoxMiAwIG9iago8PAovQ29udGVudHMgMjEgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNSAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTMgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNSAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE0IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTUgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA3IDAgUiA4IDAgUiA5IDAgUiAxMCAwIFIgMTIgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNiAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxMjIwCj4+CnN0cmVhbQpHYXUxLTswMUdOJkJFXSgnYDFFXmZUZyIjaS1UM2hqPGRxcEMjSUYtJVBOXGtXKT9oSFo6VGRoSWstLVgiUUVhOUVzI3AyL2FgT1xwInUjXyZIJ29HKVBtSDQpMTkpbzVULmNdNWU1J0gyTS51NGxgITxzLDZKIVFDJ1djVCFcT1FwQSFTXjo4R0JQNFM9Wkd1IylsYlJOKi5yJmYrISolRnIhSFc1Q2lgOi0qYmxrUXEzRkAhXFJRVDZxKmhIUkQrNCksS3I/JUYiZGJAXj5lO10saj1zMSs+KyQuJTBMa1BxXTZTRD1HInA1TixmPzZiQkBQdE9mZj1CTF1kOEI6bzUrWGRFLSFMWiVrRTBGciQsRD48RSpDcSMlPUReQCh1OmwjS2w1NEw+OypSKGV0MCcoRCQnKWRRIk8qb1olM1NDMCNaKE51NG02UTtSUjZTU3I5MGEsPzQsQFUtJGMsLytlVF8oKkpBM0ohQC9uWD4jWydVPzIqaj0jdEMmWSZfYEA3VCY/V2oxSSg0Qk1XbHFcVGo9UHNgV0gyI0Q0RFpMJmtCbDFHMTg2KTZjXjdjcmNGMVJwVUNcX0FoX0pJJFJKQWw9N2tdS09OW3FpKWlbMVw8RzJVMUswYFdnKVpaM0IkYVc1c28xYzA8Ki9qZGc2aHJ1bGVwSFhsalFLMXRIXj1cJTQlQDRacGpSQidIVDZBYWQ9cl9vZUckQktzIjVkO2ppIU4yY0ltQENBNUk8QmQ3Rl07L1hfM2pXRWotYTdNYjdJPWovTSQpUUYuXXU/XDw2MFAqOGMzbl9TQFs7QzBGQV1ZTVRMYF07KjJYXTUoP1NDKkw2Pk8iY2dFMTxFU0ZebDtaMi05Xlg5a0xwL1JdXSkkRGBpVjEnRzM3NCNZcywybDcrbCw4OSc/X0M3Q2xeX0VeQGxHRD41SUwhYHIrU0ZVKy9qQGNdOW5AXmQsLTFrYTgxTF5NbnNvMVllOWdrZllJVEBeJXIqTE8/PEg8Q1g3b2JwK2laPFonblQ9VVhlWFlLdGxQPERPNl1HNFUkVjVabGgpQm1sQ1EuV2U8MTYuQDxvMj85b09EWHFtayZENU1sWF84XFFraTA2VTllYj0qUGRbK15AciloPERaPzFSakk+aVZVJnBmaElccz4/XCVWQiVcWiRsbGFgRXNZPlMnQFdGcGtTRS47JjpJIVMqOzdUUiInSSEtYDNiS3JxYFFzKSJBLEFhTWtVYHVmMDFZTHQmU0FDT0hESk0oTlw7cy5BM1leLixmNkozR3Mnc3FwWHFgY08pVmRPVUFaSzVyQlY6WXNlXCVzSTtUXShaJGQ+S3BuakxLLWkxRi1tUTlFK2AyVihETzc9cmM5TyxSODUwRGVVSWknLGAubyYiPWlTQHU1RTp1UkZoSiQ6KEI2R3JjSGA1XmNmRWQhcUptcS1mOjdPVz8pUkleZWg7ODVcMzBeOzpVYE1xSV5BKHNmWWpNSVgxWi5vRkRDbzI3aFloLkBsPVVNPjVgVjMmOSw8VzpHOm9CQVdWdF5tI2hxJyZQYWxgKEhuSShSLiFabkcmNi91IjkxJlFJJmYnYyY8SCI2IiVTOzRmdENvXE9acnJCXUApOGx+PmVuZHN0cmVhbQplbmRvYmoKMTcgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTQzOQo+PgpzdHJlYW0KR2F0bTs+QmYnYiY6V2VEYlktOCpIUFdgK25MXFtLPjslQG4tR2NWSTZYR0VYaTcsMmtDcjU+bEdAVlpJVW1QXUlfdVtlaTdjM3JTRjtaSmRwc0E6aGMyYy02cGk4ZlMxNUhdMiJWRDtPX2R0Wk4pVVpSUkYyNF4pKS9UaXAjM14uLjFObVwsM0Q8XVRtbENrOiIvQjZiXSdIbnBqVHJvKS9ZaVZLTDJbUiJCQWpdNj90MnNpZicnTG9lL1piVj9CZiU4UVxqI0g2QnM7dE1cQ21mK281X1BoLFZBZVIhRjddUkkvcj1NYUshRCdxL1hbU0VfaCUoYUliME1HJmIzZic5VVxdcGFQcUNDRS46XTIuSTwwYjotUV4uZCdmPiYnZz1pKkkvPz5pZk5AO24xSlsxclw9SDFkLys1Xm1gMUJeKWJba0d0W2BxJ3NVP11RSFNNaSY9aDhxK0lKZi9MJGtXR2lWNkFrTHBmIm87bHBpWStpaCxBQz83bWRoIjZpVylzKzp1YXFgIidQam8qJWZFQi5AXmV1KV08IThxXEpzRlVxSERXLEJQVW5hX21CZWhnUy5cPjJyMllXRUtPOmQtJydoWVxsT3FZLGZ0cDpUakNdbEI3T2FfKFxePEdnbkc/OCg5VlNyby5lPlk1TzdmaDdhQ1NlJT9HXW04R1heT19EdDpIP2U8UURJODtdUDtAZ2NwS1dMdWZEQ25nT0NkYEF1IWVSQEBBUSojKkFePUBObj1XISFJaXI1SWkpOF9QSDNIQEtSPCo9TmFwRGB1PzA5TFM8UzhGRjJEV2c0YT4kQGFYYFVJJTszRlp1cEdEUFgwYy1fKyQzWUcsSiElKENsOXRnPVRUdTxrYUI1W1RMM0hPSlopdGleXm0oOyNNZW1NKCkna2MqZi9ObU1gMFNgaEdqLUZxTkcwYzlYN1gsSmZtUTlOW2FFNDBlYSJaSGE/TmI2Y0ZLUj9oZjFEOW1MQkcmKiNuJzJKNT9rJUJgJ3I+TW4pcWFaVkJhZm5tb1NRKUNwS0hhRyJeQks3a3BbYWs5TD1jMk4vLWgmdSJLM0lkZiR0QkVTIU5FcVhILStIOy8ibG8rKE4oJTNxI29DYTBqPk4sTVNEbiI/NUlfQ1JKTyw9UVU/PydXcGklSFFfWHA0JFRIN2tvLkZrXDxxOS8lO11rbSFOZjReV0VTZkIsZyZAZCFTa1J0IlBwal43MjtRUFwrOkFMc3AlLEAwO3BeSWdCL241aGAnIyxKZWciOUVHOWtcJmRxVFFoWmIuKjdUNm1ZKGVoKV4vSyZsXi80K1U+bzhnWScjU0YrIS10dEMoSS9mLVRuYk1CZ1Q/LGRzc1IsK15zOCwzITViQ1duUic+PCFEcUleOGdVT1dARE85cnFoXC9mbj1VZkNRNWs3QEE7ckw1UihBU15FS18mcyFWR3JeJShQK2hRY01fZWpLWSxtVnVacFZmL0trKlEkU0I0XGc3OGY7RF9cbSJGP1ZGdCY+aWtbODBAMlBDZzxVYzAhclQnb1YhJWohNSM8RkwsQ2kxSzlUIWxMJmtFSUhkVmFucmdYTTYvOldfcS9DPjFaRTxUNyxHQUs3K04lY1tbbENnS1k2bTA9ZS5eRmUrOztkKyxacz5DW0pSZGc5RDkpbUZaPUQ2P0lCZVtzJD5eRHFkQCNmWzEwajw1L1AuNCYiJGZNQFBia0o4QyFyTEduIjUoOXFiIk1BWUFVSyVaYSxlYi5FLFFMMVlVXTpRV2FmOVZyOTInYzNXJVJvTmA1UE0zTidcazZWWidYU2w/KWxBVlVnLW5ZM2lNTVA7WSdyRnEpdWhYKTljRiYrVl1ick4yclMrJWpxS11bIjtxKVdmZFpdXzVAYUZDSWlLUWYqL0pTXGk+R2w1RWc+ODomfj5lbmRzdHJlYW0KZW5kb2JqCjE4IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDE0OTUKPj4Kc3RyZWFtCkdhdTBDPj5zOTknUm5CMzMzdEVRUEJPMiNyUERjMyc7MzVGS1hBPyVHdThCKDsoRzs9QS8hQnVeSUxtX1wyclE9U050MWM2S15HZnE5SHJDR2tnZ3JHPlNCZypsSU5wIz0hYi8lL2UyK0AhaTk1RVVRdVRoayFNKDg6Pk9yZjAiIVNeYl9gQWdnOVhWMzNpOjldYD5uTCdTVyU1b24tYWhoU102aEhdbmJwLmw4Jm1ULDtXOEAjWGInKE4rITwnUXAvVkxDNWkjV1pqPGFpV0ctaF8iYVtVRilDQW8hJUgkYSVBWkp1LCVKRXQ1JDBWNDEjcHJKUlI7UVEpYz49aUBEI3BwJzVQQ3BEXClSIzwvTyNpUlknWzRsOkJtWCdlKFQ1PU05NTI8Tk8mIyJoTFFHWDllIWshMF0jOCdyZFJmXlEuYEokM01BcT4iTWpYMUhcSEFkTFlhWVRRYzNPOFMrJUthYk5vOTskViViLjssaCxdNCxvZlRIdSItYDNNaShFXj1wWkhAYyc3V1kmY2hKaCM1UzAnTkNVNW1NQF1TYkslUFBVNSUyJVddWGYocWJIJGE8PjUvJVcvSDg9cGJVLS9dRS05J1koPk4hST5hZD8zb0ErWDFkXTs3TGw7SSVHTUlZOCFuK1dFPEMuLVZmcjxAVjFxPTIlVCsxSEM4dUlSaVwkWWgyXFcjbWwwJEYtYUNgU28xWyFnWC9XXGdmWSszPD9nYlEuc0ArQW02cW90T2tVLjRdOjJ0UlRROTB0UWxwbiJWbnJhdSxSN0hTbCxnIWw0NklHJ3Ixa2Y1OmEiQkclTiR0XzpyMElocjtxdW8jaTdkRG8/LkRiOjo+R0U4JG5LLVlEW2hnSUxQSWkhTXMzMGIiWC0qJGs3Zjo6ci1AVkNlczM7TzszWjRYOjBFWV1WZT0+Kk8iVjY5bmVJWjZyIVlyXTFPZHJjUl9QKT1KImtoRSEzUktOclBUWVovPiddWmRIbEBHUSo1RTBjIzk0Ul0nTUtaZ1dFT3FWU1g+Iy1kbjBSZW9SNjkyWWdvRChXUSc4JzwlQTxqNCxWNHQoWjxBak0kX1o+LShGXXMyS2JNIm47VVV1YWtXL1VjQUYnUGBuJWNBI1RMLzM3KT4jbGIoMGspQSQlY0RAYCgkRFpQUUxzTjQ4LUFsdHFPYjFbXkZOa1ZoZzMxRWQxcVhoOi1UJFw/UXFPQCU8ZzdOUVh0SW83RTE1YylrVEksWmlWLHJSOk9SdHFdXTt0MVQqXCMrWj1HSzRic2UuY1BVOGRdaVZvIT83aF9VX0BiVW5oKW1WbWokVVJMJktQZWRfLzAsKTFxNzsuUF0lVE0nWzpFdEdlQWo2UjwyZiY3XSFlXzdDKHA1QkYubVRASzlfRSNhXWlDKUYuL0JEYig5JWRuOVpFVF8nKTc9OnVDSUpoWjdyXkZMXW11ckItNDVKMUtebU1kMF1FQThgMiJlMmoyYWpRSV1DOERqZzlGZyNaLmhTJE9Qa1ZNJlpEUyIqRVA+R0c1b2Q9QjdyYT0kcStHRVVjdEcmKk4/KE4+SXNMYjleZCkmWjJSMzQuJjcwVUVEZTEzcztHRzlIMiI9SSdvV0VuRFEzOzFmInQvYUE0N09YNEw5NzpYU2hcZ0VINCpjLW1lcUVjQT8xOD5GaDEnbU1LMFlVSERPLG9xQSJpYXM4U0gxUls+I01XPUsjPHEtQmpyI2lMcFZjRyhnQzoxPU1wXmo3S0szNW4/THJJKm5APF06a3JmOVVgJj1jSCcwQi4mNDJCTSomQGpNcDptIWlnaW5rJURvazFHOztLPTQvLVA1I08sKCtkQW5hKDZMNSNxQlQ8ZCtrKl11UDJCVWdfXVxZSDtjJkpuPihqcXNkPUFkRk1Dc3JSI11YLy45PDNnYmQoc11cRSxNYlI9I2pQJDU3bj5KOHU/YSMiT15tVl5GIVstJGBkbUMmWWJwVTByYm1wR3E2Zlklfj5lbmRzdHJlYW0KZW5kb2JqCjE5IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDU4Mgo+PgpzdHJlYW0KR2FzMkY2I1lMMyUjKzBMKCUzbiNoOC1HUVxrQEEoSkYsJlc7U15wNihLRnBSKDpOOXBaQGkvUjswTE02IUIobE4sYWomSyw6Uz09P0Y+MSohLjhZUmwrO1BJZDJuciVhcDU6PG5aPUI8S3Q5Wjk8cW9xI1pCayI+cTwjPyRTPWJbUjM9WCJxIlAoLD5XIiNKLjZXTDE5PG88aEJAY0BKL1NfLSJESSklQlU9P0FsR0dBKEAySWBxckBbci43TG83Jl1VPW1YWSdTTFNoWGg0UW9AZHJrazIvU0FHSGs5dCVxNUcwNWJGcFQtI2tWUjklTXJeUmtuXGE6ZTo0c21cRT9sZF1uaFlNXilFRjJxcWI/W1hsTVZhSypRclU3SVYpN0M6RTxJLzxGck1NUVkwYXJBKV1ldUQ6JVlBOzFQMGpWQzJxMiU/LExuQGo1UkJFOT5aZEFbV0M+ImE3cDs1PmskR1lzXjM2U0c7PCRadCNPUjZOPjsrMltGMG1OXi5uO29eJDc2ZC5VSFk4TzJIb1g8Ql5laVk6dDs4akBAcDNiPmcoVTo9Uk4oLlVyIi5IXGhHRVdaUGk5NnBELz8uTCsjKHM5RyhoZW1YUihNNCMrMFE8MytBXUhWJDRlLmleJG1NMlFRXGY3byNlOykqcEglQWw6bE5TV3EuRXBHK0VsSzgxTGNnPilgZiMwNktHOj8ySWlDV2s6cFViVGs3czZhaV40MjNwTEUhXWEwTShvayMsPG1UQT8kOWJiPkNVNzIuR34+ZW5kc3RyZWFtCmVuZG9iagoyMCAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxNjk0Cj4+CnN0cmVhbQpHYXUxLzk5XCdoJkJGODIuSmc5Vjc4aCgvS2AmdEVSN0FhPTNRcW9dbVVcIWg+Q1tBT0xiNk5NVDcxIi1EODlPZUIlUyIrNnNKKz5WY0hIKjYsOkspVT5OaiZpNik2ZWhAVWtFLTt1JjJAUElUZlwhKmsiPS88ImBnPkVRQykvVjk2J1g1bUM9KyVabGIyQG9JP0IuYGc3JWsvR14zXEczPG03X05KJ3BzIzBNLC0lIWNhSkZWK1BSXj1ZUXVvTW5HLWsyTTdKXVhBWTImJyFDQ0FyMGJMIkhqPmlXMFI5aysqZCVFVk8yVWFDK28yWmZNSXVYSnFDW14uKEh0WSkyTFVYZ2U2aGgiQVkka0I/akZFal5eOm8lU3I5M15GXWQhS0AuXCxeZTooUE0say1sZlZjcGE3NUdwVDloPlRsTHIpPFFWbVhUS1dvPU9XQlxvV3FYIygsVEZvWmkvTkIqczIiQjNHUTM8WTJpLTRmWkE8Y2lpJydGRF1SJ1klJVckaTNfJVRlVDJYJS5BRmBROCdKQScySlQ7TW85aCM5V25QJGoiJVxGUjNqcW5FVjFBR3JCQ0lgI1Q7WlRvKT1nMFheJD9qOFJIPC9QQyJlJ0wpZjtWYTdfMl9tSFtkI3FCLydoPiMoZGcxNlY/WTAkP28oNShFMFgwU0JmZlRWTHBnOmVlR0otZSgxIzZpKEZlNE9rTy9bJz0kVVJjOEA0TSZoKWQyUGMmNTRwQiVdWjlKOCFmZmUyWW9LVVZROj8vPXBjRkgoUDZQUztaZXAwRCE5T25QSz9wSlluKmVKbTFWbCRiTyZpcTUlUFZmNWAsPC1kcFAzZC0obmRZUllIJkpNJE89XUQpciRELCVNMk4nQDckSDtmaGVFTTE3UFslVjAxYSU1aEJqYC5XWDJxK0NrPzNhOnEpbD1KOiRbR2pCJXIzLGhZI2lxI2VlSk4wakRQPFNoPzFuQjslOXFkQ1sxPFc8bFpLVGk3UiFFdXNFbihzPUM0aiQjOTwvVFNyQGMkRkUyRUEiSiVDNWMiM2svW1xsLGFKYGBEMVdTXyozS0hXP3JOUzguOENHNzAhSnImSyYzSzAoSklnW2BWS2FPKEtfcF1oSEVxdGs5J0whVUhaW1ByTyFXOXMtYyYrZV8sYS4tKCJeR1xyTyZLM3UzMUROZDg0bjtDLzNKJ2hiWURaZDc/X1Y6SjhuKnA/J2JBWDo/OTkhLVdaMyl1cmMzZlRSWFtGUzNNVkZtdFUxaHMmPz1UKF81aGU5UVtQZTBlJU49YWhfPEJJLUtLanJzaSglby0hLyc8Z1NuP11BYEZSQjQ1OGxvbFJzNyVra1s1Nl5tY2JAM11oY2U2MEFUTihLZ2JzKy1bR1xkP0opRjA1Sis5PEluMm9FXlNhOjg6US1va043bmA7J0tYRyFsZDUmNldETEE6PjtkOUc7bVg4NjslaGonbUNYbDN0T0lLOFFwbDUqcGQpTmBncVhfcy8pI0k7ZXBTLEhePTpIIWgzJzhTKi5UJ2tUbWdiRzxMOyYvI0tETWUyXC5NQXJqOXE2clVLXj88UytDKjRhPC0nRlNeWyMibV0vJV1pQjVGQDEwKXApM1cpbXJBWlI4V1Q0VVg/Sjc1WDVSSCt0a0RBQGtFY2UmKFQzPStPUFNNT2wzMFp1XGJXZWEwKXJJPVpIK0wnZXEhbWdWJmoxTzYpMF1AYDIzS0xFWF1TNjBaXUxEUCxva2F1Qkc4YTZlKnIuUkc1SEMiYj8sJGkiUVFZR21HVTtOdSZjW2NpWW4yZ1tQU2VwQVwuakhCQlhiYWtLYVElb1FZSidnXVUmJW03YjU7aj5TUTFDJT9WXj41VygvWSo/QChdMmZsNzdCUWJCIk9ZRXBUJi45Z0VPPnQvVSxXLG8sVTwmW0crYz1YJlo+ZzMrYl5rNUFeNG1mLlk4SDddTV1idCpSKHRAMWYsZjM8Sz5iVShDXFg9WlgkZj8zQDMrSTw/Yz5fa3BdYmZSJ1xpNCVmKldiYTVLLGZHXjdOPDYtVzxJM2c+RlkkUXJDKDA/WFlSNFBdOGUvJWo8aUZxKEFGUkhock1VYVU2Sy1LbzkiWjszWHRoOWhoUCY2V2A6bGVPMUc3LiolJTJqViNLciwkaTdvPVddQkksIz0zXTokVD9KalcpYz1bZEYuSUg4P09GYj4vOWtvNDJPczJARiJwPFpHaC1xMGZuQEwtaiw2ayxpTmk/IWtDdElmXF1DT29+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTA2MQo+PgpzdHJlYW0KR2F0PSlnTiklLiUiN2tPaTZnNHQ8KUpybF03JkJpYWowPkpSVjtRR20tSEQ9Q3A9XkhLZCxvbz9YSm8jPyxvWiZqOCgpMSFZLFxtIjtvKUxCJlU0YCEjR2dPXDdXTWguLUE9bi4jJFhpPlNWbUghU187TTBoZzVhUFh1VnFSOTlzPk45dV9KN2VTNk1PNV9tS0Jgcm5mP1BsMjgpTDBgcCdsW2YkRDhcQjc1V1UyYGRJSU02SHFzXWRkczQpVSgoSm43VGYnRE1BKE5FZCMpKThGLz9SOCs+JV8kcEAyR0ojbkhGZTc0UFBxaElfbig6cjxEOjUwSjoqaV1rWGNUJkZaJmwuKC8/QUVQNkdYM1hcUSxXS2E+UiJLLz43IW9cSlJSUydMXiY4YGpJTGxPWmlfczA1MWFfcmxYNF1BNy4xbkVhLmxBOjdrbTlEO2ksSD9qOyxSKDA0WFpNbWgvVkA2Ry9RMUdQSWMoZWA/YywkWTYlcGhoTmJeKEdLK0FHUkheb09HTlkzR0xeNzsjS0E3TzFUR1QsN25sWFVyLFo+JF9bR11UNytKOzpVQ1R0IzRMP2ddcjNwP0Y8VSk1VXNKbkdmY0YrbSpjOkdvZE1dKG5pTG5qNzc6ZSloXTBFJ18mO2lnbDEvWUZKVGMjQmdmdGkhLTpgTjQuM3QqcCk8Q1pqKDhiXCZMO0BaVDE2VVwsRVVNXFtUb3JuKDNzc1ZPVV09bmdUKlFycjNwPjomOjNaOF1AJ2pVRipAZmBHaFpJMzxxUT8nJjVBP1tSUD9lN2hZXTYtXywtOnA2SXVFWlQ1Y11JW3QlPTJNcUtZOl9zOHNPazREMFJmZHJUMS42VDQzKGAidExfcCpibkQ7MGwwTERgRVYlUSpiUyU/M1QiaktgVjY4cVUqcXJsQStnX3BtWEAtNj9qTlg8VnNbajJXWmVrOWRcS0dGYGlpOlo4aGRTKiFqMUk0aEFcLGF0PGZKTCN0aVQ3UkpgNT5qMzVqOUpJVlM8dE1VJUJrV1QsdDJwInBAP2lhKSxqQy5BaGBPIlVlYENEbjtcLFEiVDVAZWdjXFpRQjlsWmkmXW9EJHA/TFZXUzFxR2pSRCJQNDMzPS8uMmldQS9uYlcxU2xMIks/MytjVCIkOzFAVXJAQGB1I2A5UDBAMUUxYGRiYWY0ZDFlSTlSU2o0PkJUZz9dNFtfITVkRzozdCpvcm5UWShXblphVCtoQ05VWWFqUEY3RS1uXXAyMWU5WmdBMW8mbD0kcjQ1TUJCUXV1WilFOycpV2ZLPXBmSl9AaDsybzlIJyVyJDgxLmhRNCFTU2FnSWYpVFU2S2MmVGYjL25UUF5VUEhidTw4VDY/TjwwSktGKTQzcTEtUy9UJ2RyJD06dD5ONFckSkFIR0YjPVhzfj5lbmRzdHJlYW0KZW5kb2JqCnhyZWYKMCAyMgowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwMDAwNzMgMDAwMDAgbiAKMDAwMDAwMDE0NSAwMDAwMCBuIAowMDAwMDAwMjUyIDAwMDAwIG4gCjAwMDAwMDAzNjQgMDAwMDAgbiAKMDAwMDAwMDU1OSAwMDAwMCBuIAowMDAwMDAwNjQyIDAwMDAwIG4gCjAwMDAwMDA3NTcgMDAwMDAgbiAKMDAwMDAwMDk1MiAwMDAwMCBuIAowMDAwMDAxMTQ3IDAwMDAwIG4gCjAwMDAwMDEzNDIgMDAwMDAgbiAKMDAwMDAwMTUzOCAwMDAwMCBuIAowMDAwMDAxNjU4IDAwMDAwIG4gCjAwMDAwMDE4NTQgMDAwMDAgbiAKMDAwMDAwMTkyNCAwMDAwMCBuIAowMDAwMDAyMjA4IDAwMDAwIG4gCjAwMDAwMDIzMDAgMDAwMDAgbiAKMDAwMDAwMzYxMiAwMDAwMCBuIAowMDAwMDA1MTQzIDAwMDAwIG4gCjAwMDAwMDY3MzAgMDAwMDAgbiAKMDAwMDAwNzQwMyAwMDAwMCBuIAowMDAwMDA5MTg5IDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDM0ZjkwNGEwOWQxMDQ5YTkzM2Y0N2Q1MmQ3ZmZiNDcwPjwzNGY5MDRhMDlkMTA0OWE5MzNmNDdkNTJkN2ZmYjQ3MD5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNCAwIFIKL1Jvb3QgMTMgMCBSCi9TaXplIDIyCj4+CnN0YXJ0eHJlZgoxMDM0MgolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this building permit application and extract all relevant information.\n\nExtract:\n- Building details (type, storeys, height, floor area)\n- Property information\n- Construction details\n- Any dimensional specifications\n- Special features (mezzanines, accessory structures, etc.)\n\nReturn a JSON object with this structure:\n{\n  "permit": {\n    "application_id": "extracted or generated ID",\n    "building": {\n      "type": "residential|commercial|industrial|accessory|mixed",\n      "storeys": 1,\n      "height": {\n        "value": 4.2,\n        "unit": "meters"\n      },\n      "total_floor_area": {\n        "value": 1500,\n        "unit": "sqft"\n      },\n      "occupancy_class": "small|medium|large",\n      "has_mezzanine": false,\n      "attached": false\n    },\n    "property": {\n      "address": "extracted address",\n      "lot_size": "if available"\n    },\n    "applicant": {\n      "name": "extracted name",\n      "contact": "extracted contact"\n    }\n  }\n}\n\nExtract all numeric values precisely with their units.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 13:19:40,795 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 13:19:40,797 - httpcore.connection - DEBUG - close.started
2026-02-06 13:19:40,799 - httpcore.connection - DEBUG - close.complete
2026-02-06 13:19:40,799 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 13:19:40,834 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001F06034AC00>
2026-02-06 13:19:40,834 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001F060249A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 13:19:40,855 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001F06034AE10>
2026-02-06 13:19:40,856 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 13:19:40,857 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 13:19:40,857 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 13:19:40,858 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 13:19:40,859 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 13:20:05,724 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 21:20:06 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T21:20:04Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T21:20:10Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T21:19:42Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T21:20:04Z'), (b'request-id', b'req_011CXsWm1mnWPuhCZbvJ8Wj5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'24781'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9dafecdd542c3d-YVR')])
2026-02-06 13:20:05,726 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 13:20:05,727 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 13:20:05,729 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 13:20:05,729 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 13:20:05,729 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 13:20:05,730 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 21:20:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T21:20:04Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T21:20:10Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T21:19:42Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T21:20:04Z', 'request-id': 'req_011CXsWm1mnWPuhCZbvJ8Wj5', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '24781', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9dafecdd542c3d-YVR'})
2026-02-06 13:20:05,730 - anthropic._base_client - DEBUG - request_id: req_011CXsWm1mnWPuhCZbvJ8Wj5
2026-02-06 13:20:05,732 - __main__ - INFO - Claude API call successful
2026-02-06 13:20:05,732 - __main__ - DEBUG - Response usage - Input tokens: 11236, Output tokens: 1403
2026-02-06 13:20:05,732 - __main__ - DEBUG - Claude response length: 4292 characters
2026-02-06 13:20:05,733 - __main__ - DEBUG - Claude response preview: ```json
{
  "permit": {
    "application_id": "BP-2026-00147",
    "submission_date": "2026-02-03",
    "municipality": "City of Victoria",
    "application_type": "New Construction  Residential",
  ...
2026-02-06 13:20:05,734 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 13:20:05,734 - __main__ - DEBUG - Extracted JSON string length: 4280 characters
2026-02-06 13:20:05,734 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 13:20:05,735 - __main__ - INFO - Successfully extracted permit data
2026-02-06 13:20:05,735 - __main__ - DEBUG - Permit building type: residential
2026-02-06 13:20:05,738 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 13:20:05] "POST /extract-permit HTTP/1.1" 200 -
2026-02-06 13:20:06,038 - __main__ - INFO - === Validate Permit Request Received ===
2026-02-06 13:20:06,039 - __main__ - DEBUG - Request data keys: ['permit']
2026-02-06 13:20:06,040 - __main__ - INFO - Validating permit for building type: residential
2026-02-06 13:20:06,040 - __main__ - DEBUG - Permit data: {
  "applicant": {
    "bc_contractor_license": "BC-CON-2019-45678",
    "company_name": "West Coast Developments Ltd.",
    "contact": {
      "email": "ravi.kumar@westcoastdev.ca",
      "mailing_address": "500 \u2013 1234 Douglas Street, Victoria, BC V8W 2E6",
      "phone": "(250) 555-0184"
    },
    "name": "Ravi Kumar, P.Eng.",
    "position": "Senior Project Manager"
  },
  "application_id": "BP-2026-00147",
  "application_type": "New Construction \u2013 Residential",
  "building": {
    "attached_garage": true,
    "description": "New single-storey residential dwelling with attached single-car garage, open-concept living area, three bedrooms, two bathrooms, and covered front porch",
    "energy_efficiency": {
      "energuide_minimum": 80,
      "energuide_rating_target": 82,
      "furnace": "High-efficiency natural gas (96% AFUE)",
      "lighting": "LED throughout",
      "solar_ready": true,
      "ventilation": "Heat recovery ventilator (HRV)"
    },
    "fire_life_safety": {
      "co_detectors": "Each level",
      "garage_separation": "5/8 inch Type X drywall",
      "gfci_protection": "Kitchen, bathrooms, and exterior outlets",
      "smoke_alarms": "Interconnected in all bedrooms and hallways",
      "tempered_glass": "Hazardous locations per code"
    },
    "has_mezzanine": false,
    "height": {
      "code_limit": 4.5,
      "compliance": "EXCEEDS",
      "unit": "meters",
      "value": 4.6,
      "variance_amount_m": 0.1,
      "variance_requested": true
    },
    "lot_coverage": {
      "code_limit": 40,
      "compliance": "COMPLIANT",
      "unit": "percent",
      "value": 35
    },
    "occupancy_class": "small",
    "setbacks": {
      "front": {
        "code_limit_min": 6,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 6.5
      },
      "rear": {
        "code_limit_min": 7.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 8
      },
      "side_east": {
        "code_limit_min": 1.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 1.8
      },
      "side_west": {
        "code_limit_min": 1.5,
        "compliance": "COMPLIANT",
        "unit": "meters",
        "value": 1.5
      }
    },
    "storeys": 1,
    "structural": {
      "exterior_cladding": "Fiber cement siding with stone veneer accents",
      "foundation_type": "Concrete slab-on-grade with perimeter stem wall",
      "framing_type": "Conventional wood-frame (2x6 exterior walls)",
      "insulation": {
        "ceiling": "R-40",
        "walls": "R-22"
      },
      "roof_type": "Pitched roof with asphalt shingles (5:12 slope)",
      "windows": {
        "description": "Double-glazed, Low-E, vinyl frames",
        "u_factor": 0.3
      }
    },
    "total_floor_area": {
      "code_limit": 1800,
      "compliance": "COMPLIANT",
      "unit": "sqft",
      "value": 1750
    },
    "type": "residential"
  },
  "fees": {
    "currency": "CAD",
    "development_cost_charge": 12500,
    "estimated_construction_value": 485000,
    "permit_fee": 3880,
    "school_site_acquisition_charge": 1200,
    "total_fees_payable": 17580
  },
  "municipality": "City of Victoria",
  "permit_validity_months": 24,
  "property": {
    "address": "1234 Cedar Lane, Victoria, BC V8N 4K2",
    "current_land_use": "Vacant Lot",
    "legal_description": "Lot 15, Section 42, Victoria District, Plan VIP12345",
    "lot_size": {
      "value_sqft": 6500,
      "value_sqm": 604
    },
    "pid": "012-345-678",
    "zoning": "R1-B (Single Family Residential)"
  },
  "submission_date": "2026-02-03",
  "variance_request": {
    "justification": "Additional 10 cm required to accommodate specified roof pitch (5:12) for optimal drainage and aesthetic consistency with neighbouring properties. Shadow study included in supporting documents.",
    "proposed_m": 4.6,
    "required_maximum_m": 4.5,
    "type": "Building Height",
    "variance_amount_m": 0.1,
    "variance_percentage": 2.2
  }
}
2026-02-06 13:20:06,041 - __main__ - INFO - Fetching rules from file
2026-02-06 13:20:06,043 - __main__ - INFO - Loaded 3 rules from file
2026-02-06 13:20:06,043 - __main__ - INFO - Starting validation against 3 rules
2026-02-06 13:20:06,043 - __main__ - DEBUG - Checking rule: RULE-000001 - BC-DEMO-001  Single-Storey Residential Building
2026-02-06 13:20:06,044 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 13:20:06,044 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 13:20:06,044 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 13:20:06,045 - __main__ - DEBUG - Condition 1: building.storeys eq 1, Actual: 1
2026-02-06 13:20:06,046 - __main__ - DEBUG - Evaluating: 1 eq 1
2026-02-06 13:20:06,046 - __main__ - DEBUG - Evaluation result: True
2026-02-06 13:20:06,046 - __main__ - DEBUG - Condition 1 passed
2026-02-06 13:20:06,046 - __main__ - DEBUG - Getting nested value for path: building.type
2026-02-06 13:20:06,046 - __main__ - DEBUG - Found value: residential for path: building.type
2026-02-06 13:20:06,047 - __main__ - DEBUG - Condition 2: building.type eq residential, Actual: residential
2026-02-06 13:20:06,047 - __main__ - DEBUG - Evaluating: residential eq residential
2026-02-06 13:20:06,047 - __main__ - DEBUG - Evaluation result: True
2026-02-06 13:20:06,047 - __main__ - DEBUG - Condition 2 passed
2026-02-06 13:20:06,047 - __main__ - DEBUG - All conditions met
2026-02-06 13:20:06,048 - __main__ - INFO - Rule RULE-000001 applies to this permit
2026-02-06 13:20:06,048 - __main__ - DEBUG - Checking 2 requirements for rule RULE-000001
2026-02-06 13:20:06,048 - __main__ - DEBUG - Getting nested value for path: building.height.value
2026-02-06 13:20:06,048 - __main__ - DEBUG - Found value: 4.6 for path: building.height.value
2026-02-06 13:20:06,048 - __main__ - DEBUG - Checking requirement: building.height.value lte 4.5, Actual: 4.6
2026-02-06 13:20:06,048 - __main__ - DEBUG - Evaluating: 4.6 lte 4.5
2026-02-06 13:20:06,049 - __main__ - DEBUG - Evaluation result: False
2026-02-06 13:20:06,049 - __main__ - DEBUG - Requirement result: False
2026-02-06 13:20:06,049 - __main__ - WARNING - Violation found - Rule: RULE-000001, Field: building.height.value, Error: Building height exceeds 4.5 m maximum for single-storey residential
2026-02-06 13:20:06,049 - __main__ - DEBUG - Getting nested value for path: building.floor_area.value
2026-02-06 13:20:06,049 - __main__ - DEBUG - Key 'floor_area' not found in path 'building.floor_area.value'
2026-02-06 13:20:06,049 - __main__ - DEBUG - Checking requirement: building.floor_area.value lte 1800, Actual: None
2026-02-06 13:20:06,049 - __main__ - DEBUG - Requirement failed: field not found
2026-02-06 13:20:06,051 - __main__ - WARNING - Violation found - Rule: RULE-000001, Field: building.floor_area.value, Error: Floor area exceeds 1,800 sq. ft. maximum for single-storey residential
2026-02-06 13:20:06,051 - __main__ - DEBUG - Checking rule: RULE-000002 - BC-DEMO-004  Two-Storey Residential Building
2026-02-06 13:20:06,051 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 13:20:06,052 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 13:20:06,052 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 13:20:06,052 - __main__ - DEBUG - Condition 1: building.storeys eq 2, Actual: 1
2026-02-06 13:20:06,052 - __main__ - DEBUG - Evaluating: 1 eq 2
2026-02-06 13:20:06,052 - __main__ - DEBUG - Evaluation result: False
2026-02-06 13:20:06,053 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 13:20:06,053 - __main__ - DEBUG - Rule RULE-000002 conditions not met, skipping
2026-02-06 13:20:06,053 - __main__ - DEBUG - Checking rule: RULE-000003 - BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 13:20:06,053 - __main__ - DEBUG - Checking 1 conditions
2026-02-06 13:20:06,053 - __main__ - DEBUG - Getting nested value for path: building.type
2026-02-06 13:20:06,053 - __main__ - DEBUG - Found value: residential for path: building.type
2026-02-06 13:20:06,054 - __main__ - DEBUG - Condition 1: building.type eq mixed, Actual: residential
2026-02-06 13:20:06,054 - __main__ - DEBUG - Evaluating: residential eq mixed
2026-02-06 13:20:06,054 - __main__ - DEBUG - Evaluation result: False
2026-02-06 13:20:06,054 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 13:20:06,054 - __main__ - DEBUG - Rule RULE-000003 conditions not met, skipping
2026-02-06 13:20:06,054 - __main__ - INFO - Validation complete - Valid: False, Violations: 2, Applicable rules: 1
2026-02-06 13:20:06,056 - __main__ - DEBUG - Summary: {'total_rules_checked': 1, 'applicable_rules': ['RULE-000001'], 'violation_count': 2, 'mandatory_violations': 2, 'advisory_violations': 0}
2026-02-06 13:20:06,057 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 13:20:06] "POST /validate-permit HTTP/1.1" 200 -
2026-02-06 13:33:35,229 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-06 13:33:35,726 - werkzeug - INFO -  * Restarting with stat
2026-02-06 13:33:38,233 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 13:33:38,234 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-06 13:33:38,234 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-06 13:33:38,235 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 13:33:38,251 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 13:33:38,979 - __main__ - INFO - ============================================================
2026-02-06 13:33:38,980 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 13:33:38,980 - __main__ - INFO - ============================================================
2026-02-06 13:33:39,041 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 13:33:39,076 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-06 13:33:40,163 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-06 13:33:40,382 - werkzeug - INFO -  * Restarting with stat
2026-02-06 13:33:42,132 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 13:33:42,133 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-06 13:33:42,135 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-06 13:33:42,136 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 13:33:42,143 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 13:33:42,876 - __main__ - INFO - ============================================================
2026-02-06 13:33:42,876 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 13:33:42,877 - __main__ - INFO - ============================================================
2026-02-06 13:33:42,918 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 13:33:42,929 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-06 13:34:08,505 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-06 13:34:08,779 - werkzeug - INFO -  * Restarting with stat
2026-02-06 13:34:10,419 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 13:34:10,420 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-06 13:34:10,420 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-06 13:34:10,421 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 13:34:10,425 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 13:34:11,020 - __main__ - INFO - ============================================================
2026-02-06 13:34:11,020 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 13:34:11,021 - __main__ - INFO - ============================================================
2026-02-06 13:34:11,067 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 13:34:11,082 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-06 13:34:15,197 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-06 13:34:15,380 - werkzeug - INFO -  * Restarting with stat
2026-02-06 13:34:17,201 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 13:34:17,201 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-06 13:34:17,201 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-06 13:34:17,202 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 13:34:17,205 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 13:34:17,703 - __main__ - INFO - ============================================================
2026-02-06 13:34:17,704 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 13:34:17,704 - __main__ - INFO - ============================================================
2026-02-06 13:34:17,735 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 13:34:17,743 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-06 13:48:17,010 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-06 13:48:17,442 - werkzeug - INFO -  * Restarting with stat
2026-02-06 13:48:18,757 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 13:48:18,758 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-06 13:48:18,759 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-06 13:48:18,760 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 13:48:18,762 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 13:48:19,218 - __main__ - INFO - ============================================================
2026-02-06 13:48:19,219 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 13:48:19,219 - __main__ - INFO - ============================================================
2026-02-06 13:48:19,264 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 13:48:19,277 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-06 13:48:40,554 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-06 13:48:40,717 - werkzeug - INFO -  * Restarting with stat
2026-02-06 13:48:41,904 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 13:48:41,904 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-06 13:48:41,904 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-06 13:48:41,905 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 13:48:41,909 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 13:48:42,380 - __main__ - INFO - ============================================================
2026-02-06 13:48:42,380 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 13:48:42,381 - __main__ - INFO - ============================================================
2026-02-06 13:48:42,413 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 13:48:42,423 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-06 13:50:03,506 - werkzeug - INFO -  * Detected change in 'C:\\Projects\\cov-demo\\New folder\\project\\python-service\\app.py', reloading
2026-02-06 13:50:03,772 - werkzeug - INFO -  * Restarting with stat
2026-02-06 13:50:05,589 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 13:50:05,590 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-06 13:50:05,590 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-06 13:50:05,591 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 13:50:05,594 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 13:50:06,153 - __main__ - INFO - ============================================================
2026-02-06 13:50:06,154 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 13:50:06,154 - __main__ - INFO - ============================================================
2026-02-06 13:50:06,192 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 13:50:06,202 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-06 14:48:43,351 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 14:48:43,361 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 14:48:43,371 - __main__ - INFO - Document info: {'title': 'admin', 'version': '1.0'}
2026-02-06 14:48:43,371 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 14:48:43,371 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 14:48:43,371 - __main__ - INFO - Base64 validation passed
2026-02-06 14:48:43,371 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 14:48:43,371 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 14:48:43,371 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 14:48:43,371 - __main__ - INFO - Calling Claude API...
2026-02-06 14:48:43,371 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 14:48:43,396 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 14:48:43,706 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 14:48:43,710 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 14:48:43,760 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001DBAC4F5160>
2026-02-06 14:48:43,762 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001DBAC3F9A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 14:48:43,794 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001DBAC4F4D70>
2026-02-06 14:48:43,794 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 14:48:43,794 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 14:48:43,794 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 14:48:43,794 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 14:48:43,794 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 14:49:01,952 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 22:49:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T22:49:07Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T22:49:09Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T22:48:45Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'27000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T22:49:07Z'), (b'request-id', b'req_011CXsdYsUCWtjJHUzVXhF38'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'17996'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9e325eb816ef12-YVR')])
2026-02-06 14:49:01,965 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 14:49:01,969 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 14:49:01,970 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 14:49:01,973 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 14:49:01,973 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 14:49:01,973 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 22:49:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T22:49:07Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T22:49:09Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T22:48:45Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '27000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T22:49:07Z', 'request-id': 'req_011CXsdYsUCWtjJHUzVXhF38', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '17996', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9e325eb816ef12-YVR'})
2026-02-06 14:49:01,973 - anthropic._base_client - DEBUG - request_id: req_011CXsdYsUCWtjJHUzVXhF38
2026-02-06 14:49:02,010 - __main__ - INFO - Claude API call successful
2026-02-06 14:49:02,010 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1495
2026-02-06 14:49:02,011 - __main__ - DEBUG - Claude response length: 5341 characters
2026-02-06 14:49:02,011 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Maximum height and floor area limits for single-storey residential buildings, meas...
2026-02-06 14:49:02,012 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 14:49:02,013 - __main__ - DEBUG - Extracted JSON string length: 5329 characters
2026-02-06 14:49:02,013 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 14:49:02,014 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 14:49:02,017 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-06 14:49:02,021 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 14:49:02,021 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-06 14:49:02,021 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 14:49:02,022 - __main__ - DEBUG - Processing rule 3: BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 14:49:02,022 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 14:49:02,022 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 14:49:02,032 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 14:49:02] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 14:49:59,520 - __main__ - INFO - === Save Rules Request Received ===
2026-02-06 14:49:59,521 - __main__ - DEBUG - Request data keys: ['rules', 'mode', 'updated_by']
2026-02-06 14:49:59,521 - __main__ - INFO - Save mode: append, Updated by: admin
2026-02-06 14:49:59,521 - __main__ - INFO - Number of rules to save: 3
2026-02-06 14:49:59,524 - __main__ - DEBUG - Rules file path: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 14:49:59,525 - __main__ - INFO - Loading existing rules file
2026-02-06 14:49:59,525 - __main__ - DEBUG - Existing rules count: 3
2026-02-06 14:49:59,526 - __main__ - INFO - Appending/updating rules
2026-02-06 14:49:59,526 - __main__ - DEBUG - Existing rule IDs: {'RULE-000002', 'RULE-000001', 'RULE-000003'}
2026-02-06 14:49:59,526 - __main__ - DEBUG - Updating existing rule: RULE-000001
2026-02-06 14:49:59,526 - __main__ - DEBUG - Updating existing rule: RULE-000002
2026-02-06 14:49:59,526 - __main__ - DEBUG - Updating existing rule: RULE-000003
2026-02-06 14:49:59,526 - __main__ - INFO - Updated metadata - Total: 3, Active: 3
2026-02-06 14:49:59,527 - __main__ - DEBUG - Source documents: ['DOC-20260206-001', 'DOC-20260206-002', 'DOC-20260206-003']
2026-02-06 14:49:59,527 - __main__ - INFO - Writing rules to file: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 14:49:59,530 - __main__ - INFO - Rules saved successfully
2026-02-06 14:49:59,530 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 14:49:59] "POST /save-rules HTTP/1.1" 200 -
2026-02-06 14:49:59,886 - __main__ - INFO - === Save Rules Request Received ===
2026-02-06 14:49:59,887 - __main__ - DEBUG - Request data keys: ['rules', 'mode', 'updated_by']
2026-02-06 14:49:59,887 - __main__ - INFO - Save mode: append, Updated by: admin
2026-02-06 14:49:59,887 - __main__ - INFO - Number of rules to save: 3
2026-02-06 14:49:59,887 - __main__ - DEBUG - Rules file path: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 14:49:59,888 - __main__ - INFO - Loading existing rules file
2026-02-06 14:49:59,888 - __main__ - DEBUG - Existing rules count: 3
2026-02-06 14:49:59,888 - __main__ - INFO - Appending/updating rules
2026-02-06 14:49:59,889 - __main__ - DEBUG - Existing rule IDs: {'RULE-000002', 'RULE-000001', 'RULE-000003'}
2026-02-06 14:49:59,889 - __main__ - DEBUG - Updating existing rule: RULE-000001
2026-02-06 14:49:59,889 - __main__ - DEBUG - Updating existing rule: RULE-000002
2026-02-06 14:49:59,889 - __main__ - DEBUG - Updating existing rule: RULE-000003
2026-02-06 14:49:59,889 - __main__ - INFO - Updated metadata - Total: 3, Active: 3
2026-02-06 14:49:59,889 - __main__ - DEBUG - Source documents: ['DOC-20260206-001', 'DOC-20260206-002', 'DOC-20260206-003']
2026-02-06 14:49:59,889 - __main__ - INFO - Writing rules to file: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 14:49:59,891 - __main__ - INFO - Rules saved successfully
2026-02-06 14:49:59,891 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 14:49:59] "POST /save-rules HTTP/1.1" 200 -
2026-02-06 14:50:00,207 - __main__ - INFO - === Save Rules Request Received ===
2026-02-06 14:50:00,208 - __main__ - DEBUG - Request data keys: ['rules', 'mode', 'updated_by']
2026-02-06 14:50:00,208 - __main__ - INFO - Save mode: append, Updated by: admin
2026-02-06 14:50:00,208 - __main__ - INFO - Number of rules to save: 3
2026-02-06 14:50:00,208 - __main__ - DEBUG - Rules file path: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 14:50:00,208 - __main__ - INFO - Loading existing rules file
2026-02-06 14:50:00,224 - __main__ - DEBUG - Existing rules count: 3
2026-02-06 14:50:00,224 - __main__ - INFO - Appending/updating rules
2026-02-06 14:50:00,224 - __main__ - DEBUG - Existing rule IDs: {'RULE-000002', 'RULE-000001', 'RULE-000003'}
2026-02-06 14:50:00,226 - __main__ - DEBUG - Updating existing rule: RULE-000001
2026-02-06 14:50:00,226 - __main__ - DEBUG - Updating existing rule: RULE-000002
2026-02-06 14:50:00,226 - __main__ - DEBUG - Updating existing rule: RULE-000003
2026-02-06 14:50:00,227 - __main__ - INFO - Updated metadata - Total: 3, Active: 3
2026-02-06 14:50:00,227 - __main__ - DEBUG - Source documents: ['DOC-20260206-001', 'DOC-20260206-002', 'DOC-20260206-003']
2026-02-06 14:50:00,227 - __main__ - INFO - Writing rules to file: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 14:50:00,227 - __main__ - INFO - Rules saved successfully
2026-02-06 14:50:00,227 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 14:50:00] "POST /save-rules HTTP/1.1" 200 -
2026-02-06 14:50:50,798 - __main__ - INFO - === Extract Permit Request Received ===
2026-02-06 14:50:50,799 - __main__ - DEBUG - Request data keys: ['pdf_base64']
2026-02-06 14:50:50,799 - __main__ - DEBUG - PDF base64 length: 14684
2026-02-06 14:50:50,799 - __main__ - INFO - Starting permit extraction with Claude...
2026-02-06 14:50:50,800 - __main__ - INFO - Starting PDF extraction - Type: permit
2026-02-06 14:50:50,800 - __main__ - DEBUG - PDF base64 length: 14684 characters
2026-02-06 14:50:50,800 - __main__ - INFO - Calling Claude API...
2026-02-06 14:50:50,800 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 14:50:50,802 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDYgMCBSIC9GNSAxMSAwIFIKPj4KZW5kb2JqCjIgMCBvYmoKPDwKL0Jhc2VGb250IC9IZWx2ZXRpY2EgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YxIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKMyAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL0NvbnRlbnRzIDE2IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjUgMCBvYmoKPDwKL0Jhc2VGb250IC9aYXBmRGluZ2JhdHMgL05hbWUgL0YzIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE3IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9Db250ZW50cyAyMCAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE1IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkT2JsaXF1ZSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjUgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagoxMiAwIG9iago8PAovQ29udGVudHMgMjEgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNSAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTMgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNSAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE0IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTUgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA3IDAgUiA4IDAgUiA5IDAgUiAxMCAwIFIgMTIgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNiAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxMjIwCj4+CnN0cmVhbQpHYXUxLTswMUdOJkJFXSgnYDFFXmZUZyIjaS1UM2hqPGRxcEMjSUYtJVBOXGtXKT9oSFo6VGRoSWstLVgiUUVhOUVzI3AyL2FgT1xwInUjXyZIJ29HKVBtSDQpMTkpbzVULmNdNWU1J0gyTS51NGxgITxzLDZKIVFDJ1djVCFcT1FwQSFTXjo4R0JQNFM9Wkd1IylsYlJOKi5yJmYrISolRnIhSFc1Q2lgOi0qYmxrUXEzRkAhXFJRVDZxKmhIUkQrNCksS3I/JUYiZGJAXj5lO10saj1zMSs+KyQuJTBMa1BxXTZTRD1HInA1TixmPzZiQkBQdE9mZj1CTF1kOEI6bzUrWGRFLSFMWiVrRTBGciQsRD48RSpDcSMlPUReQCh1OmwjS2w1NEw+OypSKGV0MCcoRCQnKWRRIk8qb1olM1NDMCNaKE51NG02UTtSUjZTU3I5MGEsPzQsQFUtJGMsLytlVF8oKkpBM0ohQC9uWD4jWydVPzIqaj0jdEMmWSZfYEA3VCY/V2oxSSg0Qk1XbHFcVGo9UHNgV0gyI0Q0RFpMJmtCbDFHMTg2KTZjXjdjcmNGMVJwVUNcX0FoX0pJJFJKQWw9N2tdS09OW3FpKWlbMVw8RzJVMUswYFdnKVpaM0IkYVc1c28xYzA8Ki9qZGc2aHJ1bGVwSFhsalFLMXRIXj1cJTQlQDRacGpSQidIVDZBYWQ9cl9vZUckQktzIjVkO2ppIU4yY0ltQENBNUk8QmQ3Rl07L1hfM2pXRWotYTdNYjdJPWovTSQpUUYuXXU/XDw2MFAqOGMzbl9TQFs7QzBGQV1ZTVRMYF07KjJYXTUoP1NDKkw2Pk8iY2dFMTxFU0ZebDtaMi05Xlg5a0xwL1JdXSkkRGBpVjEnRzM3NCNZcywybDcrbCw4OSc/X0M3Q2xeX0VeQGxHRD41SUwhYHIrU0ZVKy9qQGNdOW5AXmQsLTFrYTgxTF5NbnNvMVllOWdrZllJVEBeJXIqTE8/PEg8Q1g3b2JwK2laPFonblQ9VVhlWFlLdGxQPERPNl1HNFUkVjVabGgpQm1sQ1EuV2U8MTYuQDxvMj85b09EWHFtayZENU1sWF84XFFraTA2VTllYj0qUGRbK15AciloPERaPzFSakk+aVZVJnBmaElccz4/XCVWQiVcWiRsbGFgRXNZPlMnQFdGcGtTRS47JjpJIVMqOzdUUiInSSEtYDNiS3JxYFFzKSJBLEFhTWtVYHVmMDFZTHQmU0FDT0hESk0oTlw7cy5BM1leLixmNkozR3Mnc3FwWHFgY08pVmRPVUFaSzVyQlY6WXNlXCVzSTtUXShaJGQ+S3BuakxLLWkxRi1tUTlFK2AyVihETzc9cmM5TyxSODUwRGVVSWknLGAubyYiPWlTQHU1RTp1UkZoSiQ6KEI2R3JjSGA1XmNmRWQhcUptcS1mOjdPVz8pUkleZWg7ODVcMzBeOzpVYE1xSV5BKHNmWWpNSVgxWi5vRkRDbzI3aFloLkBsPVVNPjVgVjMmOSw8VzpHOm9CQVdWdF5tI2hxJyZQYWxgKEhuSShSLiFabkcmNi91IjkxJlFJJmYnYyY8SCI2IiVTOzRmdENvXE9acnJCXUApOGx+PmVuZHN0cmVhbQplbmRvYmoKMTcgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTQzOQo+PgpzdHJlYW0KR2F0bTs+QmYnYiY6V2VEYlktOCpIUFdgK25MXFtLPjslQG4tR2NWSTZYR0VYaTcsMmtDcjU+bEdAVlpJVW1QXUlfdVtlaTdjM3JTRjtaSmRwc0E6aGMyYy02cGk4ZlMxNUhdMiJWRDtPX2R0Wk4pVVpSUkYyNF4pKS9UaXAjM14uLjFObVwsM0Q8XVRtbENrOiIvQjZiXSdIbnBqVHJvKS9ZaVZLTDJbUiJCQWpdNj90MnNpZicnTG9lL1piVj9CZiU4UVxqI0g2QnM7dE1cQ21mK281X1BoLFZBZVIhRjddUkkvcj1NYUshRCdxL1hbU0VfaCUoYUliME1HJmIzZic5VVxdcGFQcUNDRS46XTIuSTwwYjotUV4uZCdmPiYnZz1pKkkvPz5pZk5AO24xSlsxclw9SDFkLys1Xm1gMUJeKWJba0d0W2BxJ3NVP11RSFNNaSY9aDhxK0lKZi9MJGtXR2lWNkFrTHBmIm87bHBpWStpaCxBQz83bWRoIjZpVylzKzp1YXFgIidQam8qJWZFQi5AXmV1KV08IThxXEpzRlVxSERXLEJQVW5hX21CZWhnUy5cPjJyMllXRUtPOmQtJydoWVxsT3FZLGZ0cDpUakNdbEI3T2FfKFxePEdnbkc/OCg5VlNyby5lPlk1TzdmaDdhQ1NlJT9HXW04R1heT19EdDpIP2U8UURJODtdUDtAZ2NwS1dMdWZEQ25nT0NkYEF1IWVSQEBBUSojKkFePUBObj1XISFJaXI1SWkpOF9QSDNIQEtSPCo9TmFwRGB1PzA5TFM8UzhGRjJEV2c0YT4kQGFYYFVJJTszRlp1cEdEUFgwYy1fKyQzWUcsSiElKENsOXRnPVRUdTxrYUI1W1RMM0hPSlopdGleXm0oOyNNZW1NKCkna2MqZi9ObU1gMFNgaEdqLUZxTkcwYzlYN1gsSmZtUTlOW2FFNDBlYSJaSGE/TmI2Y0ZLUj9oZjFEOW1MQkcmKiNuJzJKNT9rJUJgJ3I+TW4pcWFaVkJhZm5tb1NRKUNwS0hhRyJeQks3a3BbYWs5TD1jMk4vLWgmdSJLM0lkZiR0QkVTIU5FcVhILStIOy8ibG8rKE4oJTNxI29DYTBqPk4sTVNEbiI/NUlfQ1JKTyw9UVU/PydXcGklSFFfWHA0JFRIN2tvLkZrXDxxOS8lO11rbSFOZjReV0VTZkIsZyZAZCFTa1J0IlBwal43MjtRUFwrOkFMc3AlLEAwO3BeSWdCL241aGAnIyxKZWciOUVHOWtcJmRxVFFoWmIuKjdUNm1ZKGVoKV4vSyZsXi80K1U+bzhnWScjU0YrIS10dEMoSS9mLVRuYk1CZ1Q/LGRzc1IsK15zOCwzITViQ1duUic+PCFEcUleOGdVT1dARE85cnFoXC9mbj1VZkNRNWs3QEE7ckw1UihBU15FS18mcyFWR3JeJShQK2hRY01fZWpLWSxtVnVacFZmL0trKlEkU0I0XGc3OGY7RF9cbSJGP1ZGdCY+aWtbODBAMlBDZzxVYzAhclQnb1YhJWohNSM8RkwsQ2kxSzlUIWxMJmtFSUhkVmFucmdYTTYvOldfcS9DPjFaRTxUNyxHQUs3K04lY1tbbENnS1k2bTA9ZS5eRmUrOztkKyxacz5DW0pSZGc5RDkpbUZaPUQ2P0lCZVtzJD5eRHFkQCNmWzEwajw1L1AuNCYiJGZNQFBia0o4QyFyTEduIjUoOXFiIk1BWUFVSyVaYSxlYi5FLFFMMVlVXTpRV2FmOVZyOTInYzNXJVJvTmA1UE0zTidcazZWWidYU2w/KWxBVlVnLW5ZM2lNTVA7WSdyRnEpdWhYKTljRiYrVl1ick4yclMrJWpxS11bIjtxKVdmZFpdXzVAYUZDSWlLUWYqL0pTXGk+R2w1RWc+ODomfj5lbmRzdHJlYW0KZW5kb2JqCjE4IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDE0OTUKPj4Kc3RyZWFtCkdhdTBDPj5zOTknUm5CMzMzdEVRUEJPMiNyUERjMyc7MzVGS1hBPyVHdThCKDsoRzs9QS8hQnVeSUxtX1wyclE9U050MWM2S15HZnE5SHJDR2tnZ3JHPlNCZypsSU5wIz0hYi8lL2UyK0AhaTk1RVVRdVRoayFNKDg6Pk9yZjAiIVNeYl9gQWdnOVhWMzNpOjldYD5uTCdTVyU1b24tYWhoU102aEhdbmJwLmw4Jm1ULDtXOEAjWGInKE4rITwnUXAvVkxDNWkjV1pqPGFpV0ctaF8iYVtVRilDQW8hJUgkYSVBWkp1LCVKRXQ1JDBWNDEjcHJKUlI7UVEpYz49aUBEI3BwJzVQQ3BEXClSIzwvTyNpUlknWzRsOkJtWCdlKFQ1PU05NTI8Tk8mIyJoTFFHWDllIWshMF0jOCdyZFJmXlEuYEokM01BcT4iTWpYMUhcSEFkTFlhWVRRYzNPOFMrJUthYk5vOTskViViLjssaCxdNCxvZlRIdSItYDNNaShFXj1wWkhAYyc3V1kmY2hKaCM1UzAnTkNVNW1NQF1TYkslUFBVNSUyJVddWGYocWJIJGE8PjUvJVcvSDg9cGJVLS9dRS05J1koPk4hST5hZD8zb0ErWDFkXTs3TGw7SSVHTUlZOCFuK1dFPEMuLVZmcjxAVjFxPTIlVCsxSEM4dUlSaVwkWWgyXFcjbWwwJEYtYUNgU28xWyFnWC9XXGdmWSszPD9nYlEuc0ArQW02cW90T2tVLjRdOjJ0UlRROTB0UWxwbiJWbnJhdSxSN0hTbCxnIWw0NklHJ3Ixa2Y1OmEiQkclTiR0XzpyMElocjtxdW8jaTdkRG8/LkRiOjo+R0U4JG5LLVlEW2hnSUxQSWkhTXMzMGIiWC0qJGs3Zjo6ci1AVkNlczM7TzszWjRYOjBFWV1WZT0+Kk8iVjY5bmVJWjZyIVlyXTFPZHJjUl9QKT1KImtoRSEzUktOclBUWVovPiddWmRIbEBHUSo1RTBjIzk0Ul0nTUtaZ1dFT3FWU1g+Iy1kbjBSZW9SNjkyWWdvRChXUSc4JzwlQTxqNCxWNHQoWjxBak0kX1o+LShGXXMyS2JNIm47VVV1YWtXL1VjQUYnUGBuJWNBI1RMLzM3KT4jbGIoMGspQSQlY0RAYCgkRFpQUUxzTjQ4LUFsdHFPYjFbXkZOa1ZoZzMxRWQxcVhoOi1UJFw/UXFPQCU8ZzdOUVh0SW83RTE1YylrVEksWmlWLHJSOk9SdHFdXTt0MVQqXCMrWj1HSzRic2UuY1BVOGRdaVZvIT83aF9VX0BiVW5oKW1WbWokVVJMJktQZWRfLzAsKTFxNzsuUF0lVE0nWzpFdEdlQWo2UjwyZiY3XSFlXzdDKHA1QkYubVRASzlfRSNhXWlDKUYuL0JEYig5JWRuOVpFVF8nKTc9OnVDSUpoWjdyXkZMXW11ckItNDVKMUtebU1kMF1FQThgMiJlMmoyYWpRSV1DOERqZzlGZyNaLmhTJE9Qa1ZNJlpEUyIqRVA+R0c1b2Q9QjdyYT0kcStHRVVjdEcmKk4/KE4+SXNMYjleZCkmWjJSMzQuJjcwVUVEZTEzcztHRzlIMiI9SSdvV0VuRFEzOzFmInQvYUE0N09YNEw5NzpYU2hcZ0VINCpjLW1lcUVjQT8xOD5GaDEnbU1LMFlVSERPLG9xQSJpYXM4U0gxUls+I01XPUsjPHEtQmpyI2lMcFZjRyhnQzoxPU1wXmo3S0szNW4/THJJKm5APF06a3JmOVVgJj1jSCcwQi4mNDJCTSomQGpNcDptIWlnaW5rJURvazFHOztLPTQvLVA1I08sKCtkQW5hKDZMNSNxQlQ8ZCtrKl11UDJCVWdfXVxZSDtjJkpuPihqcXNkPUFkRk1Dc3JSI11YLy45PDNnYmQoc11cRSxNYlI9I2pQJDU3bj5KOHU/YSMiT15tVl5GIVstJGBkbUMmWWJwVTByYm1wR3E2Zlklfj5lbmRzdHJlYW0KZW5kb2JqCjE5IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDU4Mgo+PgpzdHJlYW0KR2FzMkY2I1lMMyUjKzBMKCUzbiNoOC1HUVxrQEEoSkYsJlc7U15wNihLRnBSKDpOOXBaQGkvUjswTE02IUIobE4sYWomSyw6Uz09P0Y+MSohLjhZUmwrO1BJZDJuciVhcDU6PG5aPUI8S3Q5Wjk8cW9xI1pCayI+cTwjPyRTPWJbUjM9WCJxIlAoLD5XIiNKLjZXTDE5PG88aEJAY0BKL1NfLSJESSklQlU9P0FsR0dBKEAySWBxckBbci43TG83Jl1VPW1YWSdTTFNoWGg0UW9AZHJrazIvU0FHSGs5dCVxNUcwNWJGcFQtI2tWUjklTXJeUmtuXGE6ZTo0c21cRT9sZF1uaFlNXilFRjJxcWI/W1hsTVZhSypRclU3SVYpN0M6RTxJLzxGck1NUVkwYXJBKV1ldUQ6JVlBOzFQMGpWQzJxMiU/LExuQGo1UkJFOT5aZEFbV0M+ImE3cDs1PmskR1lzXjM2U0c7PCRadCNPUjZOPjsrMltGMG1OXi5uO29eJDc2ZC5VSFk4TzJIb1g8Ql5laVk6dDs4akBAcDNiPmcoVTo9Uk4oLlVyIi5IXGhHRVdaUGk5NnBELz8uTCsjKHM5RyhoZW1YUihNNCMrMFE8MytBXUhWJDRlLmleJG1NMlFRXGY3byNlOykqcEglQWw6bE5TV3EuRXBHK0VsSzgxTGNnPilgZiMwNktHOj8ySWlDV2s6cFViVGs3czZhaV40MjNwTEUhXWEwTShvayMsPG1UQT8kOWJiPkNVNzIuR34+ZW5kc3RyZWFtCmVuZG9iagoyMCAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxNjk0Cj4+CnN0cmVhbQpHYXUxLzk5XCdoJkJGODIuSmc5Vjc4aCgvS2AmdEVSN0FhPTNRcW9dbVVcIWg+Q1tBT0xiNk5NVDcxIi1EODlPZUIlUyIrNnNKKz5WY0hIKjYsOkspVT5OaiZpNik2ZWhAVWtFLTt1JjJAUElUZlwhKmsiPS88ImBnPkVRQykvVjk2J1g1bUM9KyVabGIyQG9JP0IuYGc3JWsvR14zXEczPG03X05KJ3BzIzBNLC0lIWNhSkZWK1BSXj1ZUXVvTW5HLWsyTTdKXVhBWTImJyFDQ0FyMGJMIkhqPmlXMFI5aysqZCVFVk8yVWFDK28yWmZNSXVYSnFDW14uKEh0WSkyTFVYZ2U2aGgiQVkka0I/akZFal5eOm8lU3I5M15GXWQhS0AuXCxeZTooUE0say1sZlZjcGE3NUdwVDloPlRsTHIpPFFWbVhUS1dvPU9XQlxvV3FYIygsVEZvWmkvTkIqczIiQjNHUTM8WTJpLTRmWkE8Y2lpJydGRF1SJ1klJVckaTNfJVRlVDJYJS5BRmBROCdKQScySlQ7TW85aCM5V25QJGoiJVxGUjNqcW5FVjFBR3JCQ0lgI1Q7WlRvKT1nMFheJD9qOFJIPC9QQyJlJ0wpZjtWYTdfMl9tSFtkI3FCLydoPiMoZGcxNlY/WTAkP28oNShFMFgwU0JmZlRWTHBnOmVlR0otZSgxIzZpKEZlNE9rTy9bJz0kVVJjOEA0TSZoKWQyUGMmNTRwQiVdWjlKOCFmZmUyWW9LVVZROj8vPXBjRkgoUDZQUztaZXAwRCE5T25QSz9wSlluKmVKbTFWbCRiTyZpcTUlUFZmNWAsPC1kcFAzZC0obmRZUllIJkpNJE89XUQpciRELCVNMk4nQDckSDtmaGVFTTE3UFslVjAxYSU1aEJqYC5XWDJxK0NrPzNhOnEpbD1KOiRbR2pCJXIzLGhZI2lxI2VlSk4wakRQPFNoPzFuQjslOXFkQ1sxPFc8bFpLVGk3UiFFdXNFbihzPUM0aiQjOTwvVFNyQGMkRkUyRUEiSiVDNWMiM2svW1xsLGFKYGBEMVdTXyozS0hXP3JOUzguOENHNzAhSnImSyYzSzAoSklnW2BWS2FPKEtfcF1oSEVxdGs5J0whVUhaW1ByTyFXOXMtYyYrZV8sYS4tKCJeR1xyTyZLM3UzMUROZDg0bjtDLzNKJ2hiWURaZDc/X1Y6SjhuKnA/J2JBWDo/OTkhLVdaMyl1cmMzZlRSWFtGUzNNVkZtdFUxaHMmPz1UKF81aGU5UVtQZTBlJU49YWhfPEJJLUtLanJzaSglby0hLyc8Z1NuP11BYEZSQjQ1OGxvbFJzNyVra1s1Nl5tY2JAM11oY2U2MEFUTihLZ2JzKy1bR1xkP0opRjA1Sis5PEluMm9FXlNhOjg6US1va043bmA7J0tYRyFsZDUmNldETEE6PjtkOUc7bVg4NjslaGonbUNYbDN0T0lLOFFwbDUqcGQpTmBncVhfcy8pI0k7ZXBTLEhePTpIIWgzJzhTKi5UJ2tUbWdiRzxMOyYvI0tETWUyXC5NQXJqOXE2clVLXj88UytDKjRhPC0nRlNeWyMibV0vJV1pQjVGQDEwKXApM1cpbXJBWlI4V1Q0VVg/Sjc1WDVSSCt0a0RBQGtFY2UmKFQzPStPUFNNT2wzMFp1XGJXZWEwKXJJPVpIK0wnZXEhbWdWJmoxTzYpMF1AYDIzS0xFWF1TNjBaXUxEUCxva2F1Qkc4YTZlKnIuUkc1SEMiYj8sJGkiUVFZR21HVTtOdSZjW2NpWW4yZ1tQU2VwQVwuakhCQlhiYWtLYVElb1FZSidnXVUmJW03YjU7aj5TUTFDJT9WXj41VygvWSo/QChdMmZsNzdCUWJCIk9ZRXBUJi45Z0VPPnQvVSxXLG8sVTwmW0crYz1YJlo+ZzMrYl5rNUFeNG1mLlk4SDddTV1idCpSKHRAMWYsZjM8Sz5iVShDXFg9WlgkZj8zQDMrSTw/Yz5fa3BdYmZSJ1xpNCVmKldiYTVLLGZHXjdOPDYtVzxJM2c+RlkkUXJDKDA/WFlSNFBdOGUvJWo8aUZxKEFGUkhock1VYVU2Sy1LbzkiWjszWHRoOWhoUCY2V2A6bGVPMUc3LiolJTJqViNLciwkaTdvPVddQkksIz0zXTokVD9KalcpYz1bZEYuSUg4P09GYj4vOWtvNDJPczJARiJwPFpHaC1xMGZuQEwtaiw2ayxpTmk/IWtDdElmXF1DT29+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTA2MQo+PgpzdHJlYW0KR2F0PSlnTiklLiUiN2tPaTZnNHQ8KUpybF03JkJpYWowPkpSVjtRR20tSEQ9Q3A9XkhLZCxvbz9YSm8jPyxvWiZqOCgpMSFZLFxtIjtvKUxCJlU0YCEjR2dPXDdXTWguLUE9bi4jJFhpPlNWbUghU187TTBoZzVhUFh1VnFSOTlzPk45dV9KN2VTNk1PNV9tS0Jgcm5mP1BsMjgpTDBgcCdsW2YkRDhcQjc1V1UyYGRJSU02SHFzXWRkczQpVSgoSm43VGYnRE1BKE5FZCMpKThGLz9SOCs+JV8kcEAyR0ojbkhGZTc0UFBxaElfbig6cjxEOjUwSjoqaV1rWGNUJkZaJmwuKC8/QUVQNkdYM1hcUSxXS2E+UiJLLz43IW9cSlJSUydMXiY4YGpJTGxPWmlfczA1MWFfcmxYNF1BNy4xbkVhLmxBOjdrbTlEO2ksSD9qOyxSKDA0WFpNbWgvVkA2Ry9RMUdQSWMoZWA/YywkWTYlcGhoTmJeKEdLK0FHUkheb09HTlkzR0xeNzsjS0E3TzFUR1QsN25sWFVyLFo+JF9bR11UNytKOzpVQ1R0IzRMP2ddcjNwP0Y8VSk1VXNKbkdmY0YrbSpjOkdvZE1dKG5pTG5qNzc6ZSloXTBFJ18mO2lnbDEvWUZKVGMjQmdmdGkhLTpgTjQuM3QqcCk8Q1pqKDhiXCZMO0BaVDE2VVwsRVVNXFtUb3JuKDNzc1ZPVV09bmdUKlFycjNwPjomOjNaOF1AJ2pVRipAZmBHaFpJMzxxUT8nJjVBP1tSUD9lN2hZXTYtXywtOnA2SXVFWlQ1Y11JW3QlPTJNcUtZOl9zOHNPazREMFJmZHJUMS42VDQzKGAidExfcCpibkQ7MGwwTERgRVYlUSpiUyU/M1QiaktgVjY4cVUqcXJsQStnX3BtWEAtNj9qTlg8VnNbajJXWmVrOWRcS0dGYGlpOlo4aGRTKiFqMUk0aEFcLGF0PGZKTCN0aVQ3UkpgNT5qMzVqOUpJVlM8dE1VJUJrV1QsdDJwInBAP2lhKSxqQy5BaGBPIlVlYENEbjtcLFEiVDVAZWdjXFpRQjlsWmkmXW9EJHA/TFZXUzFxR2pSRCJQNDMzPS8uMmldQS9uYlcxU2xMIks/MytjVCIkOzFAVXJAQGB1I2A5UDBAMUUxYGRiYWY0ZDFlSTlSU2o0PkJUZz9dNFtfITVkRzozdCpvcm5UWShXblphVCtoQ05VWWFqUEY3RS1uXXAyMWU5WmdBMW8mbD0kcjQ1TUJCUXV1WilFOycpV2ZLPXBmSl9AaDsybzlIJyVyJDgxLmhRNCFTU2FnSWYpVFU2S2MmVGYjL25UUF5VUEhidTw4VDY/TjwwSktGKTQzcTEtUy9UJ2RyJD06dD5ONFckSkFIR0YjPVhzfj5lbmRzdHJlYW0KZW5kb2JqCnhyZWYKMCAyMgowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwMDAwNzMgMDAwMDAgbiAKMDAwMDAwMDE0NSAwMDAwMCBuIAowMDAwMDAwMjUyIDAwMDAwIG4gCjAwMDAwMDAzNjQgMDAwMDAgbiAKMDAwMDAwMDU1OSAwMDAwMCBuIAowMDAwMDAwNjQyIDAwMDAwIG4gCjAwMDAwMDA3NTcgMDAwMDAgbiAKMDAwMDAwMDk1MiAwMDAwMCBuIAowMDAwMDAxMTQ3IDAwMDAwIG4gCjAwMDAwMDEzNDIgMDAwMDAgbiAKMDAwMDAwMTUzOCAwMDAwMCBuIAowMDAwMDAxNjU4IDAwMDAwIG4gCjAwMDAwMDE4NTQgMDAwMDAgbiAKMDAwMDAwMTkyNCAwMDAwMCBuIAowMDAwMDAyMjA4IDAwMDAwIG4gCjAwMDAwMDIzMDAgMDAwMDAgbiAKMDAwMDAwMzYxMiAwMDAwMCBuIAowMDAwMDA1MTQzIDAwMDAwIG4gCjAwMDAwMDY3MzAgMDAwMDAgbiAKMDAwMDAwNzQwMyAwMDAwMCBuIAowMDAwMDA5MTg5IDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDM0ZjkwNGEwOWQxMDQ5YTkzM2Y0N2Q1MmQ3ZmZiNDcwPjwzNGY5MDRhMDlkMTA0OWE5MzNmNDdkNTJkN2ZmYjQ3MD5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNCAwIFIKL1Jvb3QgMTMgMCBSCi9TaXplIDIyCj4+CnN0YXJ0eHJlZgoxMDM0MgolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this building permit application and extract all relevant information.\n\nExtract:\n- Building details (type, storeys, height, floor area)\n- Property information\n- Construction details\n- Any dimensional specifications\n- Special features (mezzanines, accessory structures, etc.)\n\nReturn a JSON object with this structure:\n{\n  "permit": {\n    "application_id": "extracted or generated ID",\n    "building": {\n      "use": "residential|commercial|industrial|accessory|mixed",\n      "storeys": 1,\n      "height": {\n        "value": 4.2,\n        "unit": "meters"\n      },\n      "floor_area": {\n        "total": 1500,\n        "unit": "sqft"\n      },\n      "occupancy_class": "small|medium|large",\n      "has_mezzanine": false,\n      "attached": false\n    },\n    "property": {\n      "address": "extracted address",\n      "lot_size": "if available"\n    },\n    "applicant": {\n      "name": "extracted name",\n      "contact": "extracted contact"\n    }\n  }\n}\n\nExtract all numeric values precisely with their units.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 14:50:50,804 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 14:50:50,804 - httpcore.connection - DEBUG - close.started
2026-02-06 14:50:50,806 - httpcore.connection - DEBUG - close.complete
2026-02-06 14:50:50,806 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 14:50:50,819 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001DBAC4CE630>
2026-02-06 14:50:50,824 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001DBAC3F9A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 14:50:50,870 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001DBAC4CE7E0>
2026-02-06 14:50:50,870 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 14:50:50,871 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 14:50:50,871 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 14:50:50,871 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 14:50:50,871 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 14:51:19,340 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 22:51:20 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T22:51:14Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T22:51:22Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T22:50:52Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T22:51:14Z'), (b'request-id', b'req_011CXsdiEmNGACfaYUHoi6Ym'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'28373'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9e3578ec3f57bb-YVR')])
2026-02-06 14:51:19,340 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 14:51:19,341 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 14:51:19,341 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 14:51:19,342 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 14:51:19,342 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 14:51:19,342 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 22:51:20 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T22:51:14Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T22:51:22Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T22:50:52Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T22:51:14Z', 'request-id': 'req_011CXsdiEmNGACfaYUHoi6Ym', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '28373', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9e3578ec3f57bb-YVR'})
2026-02-06 14:51:19,342 - anthropic._base_client - DEBUG - request_id: req_011CXsdiEmNGACfaYUHoi6Ym
2026-02-06 14:51:19,343 - __main__ - INFO - Claude API call successful
2026-02-06 14:51:19,344 - __main__ - DEBUG - Response usage - Input tokens: 11234, Output tokens: 1738
2026-02-06 14:51:19,344 - __main__ - DEBUG - Claude response length: 5261 characters
2026-02-06 14:51:19,344 - __main__ - DEBUG - Claude response preview: ```json
{
  "permit": {
    "application_id": "BP-2026-00147",
    "submission_date": "2026-02-03",
    "municipality": "City of Victoria",
    "application_type": "New Construction  Residential",
  ...
2026-02-06 14:51:19,344 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 14:51:19,344 - __main__ - DEBUG - Extracted JSON string length: 5249 characters
2026-02-06 14:51:19,345 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 14:51:19,345 - __main__ - INFO - Successfully extracted permit data
2026-02-06 14:51:19,345 - __main__ - DEBUG - Permit building type: Single-Storey Residential Dwelling with Attached Single-Car Garage
2026-02-06 14:51:19,346 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 14:51:19] "POST /extract-permit HTTP/1.1" 200 -
2026-02-06 14:51:19,529 - __main__ - INFO - === Validate Permit Request Received ===
2026-02-06 14:51:19,530 - __main__ - DEBUG - Request data keys: ['permit']
2026-02-06 14:51:19,530 - __main__ - INFO - Validating permit for building type: Single-Storey Residential Dwelling with Attached Single-Car Garage
2026-02-06 14:51:19,531 - __main__ - DEBUG - Permit data: {
  "applicant": {
    "bc_contractor_license": "BC-CON-2019-45678",
    "company_name": "West Coast Developments Ltd.",
    "contact": {
      "email": "ravi.kumar@westcoastdev.ca",
      "mailing_address": "500 \u2013 1234 Douglas Street, Victoria, BC V8W 2E6",
      "phone": "(250) 555-0184"
    },
    "name": "Ravi Kumar, P.Eng.",
    "position": "Senior Project Manager"
  },
  "application_id": "BP-2026-00147",
  "application_type": "New Construction \u2013 Residential",
  "building": {
    "attached_garage": true,
    "floor_area": {
      "code_limit": 1800,
      "compliance": "COMPLIANT",
      "total": 1750,
      "unit": "sqft"
    },
    "has_mezzanine": false,
    "height": {
      "code_limit": 4.5,
      "compliance": "EXCEEDS",
      "unit": "meters",
      "value": 4.6,
      "variance_amount": {
        "unit": "meters",
        "value": 0.1
      },
      "variance_requested": true
    },
    "lot_coverage": {
      "code_limit": 40,
      "compliance": "COMPLIANT",
      "proposed": 35,
      "unit": "percent"
    },
    "occupancy_class": "small",
    "rooms": {
      "bathrooms": 2,
      "bedrooms": 3,
      "covered_front_porch": true,
      "living_area": "open-concept"
    },
    "setbacks": {
      "front": {
        "compliance": "COMPLIANT",
        "minimum": 6,
        "proposed": 6.5,
        "unit": "meters"
      },
      "rear": {
        "compliance": "COMPLIANT",
        "minimum": 7.5,
        "proposed": 8,
        "unit": "meters"
      },
      "side_east": {
        "compliance": "COMPLIANT",
        "minimum": 1.5,
        "proposed": 1.8,
        "unit": "meters"
      },
      "side_west": {
        "compliance": "COMPLIANT",
        "minimum": 1.5,
        "proposed": 1.5,
        "unit": "meters"
      }
    },
    "storeys": 1,
    "type": "Single-Storey Residential Dwelling with Attached Single-Car Garage",
    "use": "residential"
  },
  "construction_details": {
    "exterior_cladding": "Fiber cement siding with stone veneer accents",
    "foundation_type": "Concrete slab-on-grade with perimeter stem wall",
    "framing_type": "Conventional wood-frame (2x6 exterior walls)",
    "insulation": {
      "ceiling": "R-40",
      "walls": "R-22"
    },
    "roof_pitch": "5:12",
    "roof_type": "Pitched roof with asphalt shingles",
    "windows": {
      "type": "Double-glazed, Low-E, vinyl frames",
      "u_factor": 0.3
    }
  },
  "energy_efficiency": {
    "energuide_minimum": 80,
    "energuide_rating_target": 82,
    "furnace": "High-efficiency natural gas (96% AFUE)",
    "lighting": "LED throughout",
    "solar_ready": true,
    "ventilation": "Heat recovery ventilator (HRV)"
  },
  "fire_life_safety": {
    "co_detectors": "Each level",
    "garage_separation": "5/8\" Type X drywall (fire-rated)",
    "gfci_protection": "Kitchen, bathrooms, and exterior outlets",
    "smoke_alarms": "Interconnected in all bedrooms and hallways",
    "tempered_glass": "Hazardous locations per code"
  },
  "municipality": "City of Victoria",
  "permit_validity": "24 months from date of issue",
  "project_value_and_fees": {
    "currency": "CAD",
    "development_cost_charge": 12500,
    "estimated_construction_value": 485000,
    "permit_fee": 3880,
    "school_site_acquisition_charge": 1200,
    "total_fees_payable": 17580
  },
  "property": {
    "address": "1234 Cedar Lane, Victoria, BC V8N 4K2",
    "current_land_use": "Vacant Lot",
    "legal_description": "Lot 15, Section 42, Victoria District, Plan VIP12345",
    "lot_size": {
      "imperial": "6,500 sq. ft.",
      "metric": "604 m\u00b2"
    },
    "pid": "012-345-678",
    "zoning": "R1-B (Single Family Residential)"
  },
  "submission_date": "2026-02-03",
  "supporting_documents": {
    "building_elevations": {
      "pages": 2,
      "submitted": true
    },
    "building_sections": {
      "pages": 1,
      "submitted": true
    },
    "energy_compliance_report": {
      "pages": 4,
      "submitted": true
    },
    "floor_plans": {
      "pages": 2,
      "submitted": true
    },
    "foundation_plan": {
      "pages": 1,
      "submitted": true
    },
    "geotechnical_report": {
      "pages": 12,
      "submitted": true
    },
    "roof_framing_plan": {
      "pages": 1,
      "submitted": true
    },
    "shadow_study": {
      "pages": 3,
      "submitted": true
    },
    "site_plan": {
      "pages": 1,
      "submitted": true
    },
    "structural_engineering_report": {
      "pages": 8,
      "submitted": true
    },
    "survey_certificate": {
      "pages": 1,
      "submitted": true
    },
    "title_search_certificate": {
      "pages": 2,
      "submitted": true
    }
  },
  "variance_request": {
    "justification": "Additional 10 cm required to accommodate 5:12 roof pitch for optimal drainage, aesthetic consistency with neighbouring properties, consistent eave line, and adequate attic ventilation. Shadow study included demonstrating no impact on sight lines or solar access.",
    "proposed": 4.6,
    "required_maximum": 4.5,
    "type": "Building Height",
    "variance_amount_m": 0.1,
    "variance_percentage": 2.2
  }
}
2026-02-06 14:51:19,532 - __main__ - INFO - Fetching rules from file
2026-02-06 14:51:19,534 - __main__ - INFO - Loaded 3 rules from file
2026-02-06 14:51:19,534 - __main__ - INFO - Starting validation against 3 rules
2026-02-06 14:51:19,534 - __main__ - DEBUG - Checking rule: RULE-000001 - BC-DEMO-001  Single-Storey Residential Building
2026-02-06 14:51:19,534 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 14:51:19,534 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 14:51:19,535 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 14:51:19,535 - __main__ - DEBUG - Condition 1: building.storeys eq 1, Actual: 1
2026-02-06 14:51:19,535 - __main__ - DEBUG - Evaluating: 1 eq 1
2026-02-06 14:51:19,535 - __main__ - DEBUG - Evaluation result: True
2026-02-06 14:51:19,535 - __main__ - DEBUG - Condition 1 passed
2026-02-06 14:51:19,535 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 14:51:19,536 - __main__ - DEBUG - Found value: residential for path: building.use
2026-02-06 14:51:19,536 - __main__ - DEBUG - Condition 2: building.use eq residential, Actual: residential
2026-02-06 14:51:19,536 - __main__ - DEBUG - Evaluating: residential eq residential
2026-02-06 14:51:19,536 - __main__ - DEBUG - Evaluation result: True
2026-02-06 14:51:19,536 - __main__ - DEBUG - Condition 2 passed
2026-02-06 14:51:19,536 - __main__ - DEBUG - All conditions met
2026-02-06 14:51:19,536 - __main__ - INFO - Rule RULE-000001 applies to this permit
2026-02-06 14:51:19,536 - __main__ - DEBUG - Checking 2 requirements for rule RULE-000001
2026-02-06 14:51:19,537 - __main__ - DEBUG - Getting nested value for path: building.height.value
2026-02-06 14:51:19,537 - __main__ - DEBUG - Found value: 4.6 for path: building.height.value
2026-02-06 14:51:19,537 - __main__ - DEBUG - Checking requirement: building.height.value lte 4.5, Actual: 4.6
2026-02-06 14:51:19,537 - __main__ - DEBUG - Evaluating: 4.6 lte 4.5
2026-02-06 14:51:19,537 - __main__ - DEBUG - Evaluation result: False
2026-02-06 14:51:19,538 - __main__ - DEBUG - Requirement result: False
2026-02-06 14:51:19,538 - __main__ - WARNING - Violation found - Rule: RULE-000001, Field: building.height.value, Error: Building height exceeds 4.5 m maximum for single-storey residential
2026-02-06 14:51:19,538 - __main__ - DEBUG - Getting nested value for path: building.floor_area.value
2026-02-06 14:51:19,538 - __main__ - DEBUG - Key 'value' not found in path 'building.floor_area.value'
2026-02-06 14:51:19,538 - __main__ - DEBUG - Checking requirement: building.floor_area.value lte 1800, Actual: None
2026-02-06 14:51:19,538 - __main__ - DEBUG - Requirement failed: field not found
2026-02-06 14:51:19,538 - __main__ - WARNING - Violation found - Rule: RULE-000001, Field: building.floor_area.value, Error: Floor area exceeds 1,800 sq. ft. maximum for single-storey residential
2026-02-06 14:51:19,538 - __main__ - DEBUG - Checking rule: RULE-000002 - BC-DEMO-004  Two-Storey Residential Building
2026-02-06 14:51:19,538 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 14:51:19,538 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 14:51:19,539 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 14:51:19,539 - __main__ - DEBUG - Condition 1: building.storeys eq 2, Actual: 1
2026-02-06 14:51:19,539 - __main__ - DEBUG - Evaluating: 1 eq 2
2026-02-06 14:51:19,539 - __main__ - DEBUG - Evaluation result: False
2026-02-06 14:51:19,539 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 14:51:19,539 - __main__ - DEBUG - Rule RULE-000002 conditions not met, skipping
2026-02-06 14:51:19,539 - __main__ - DEBUG - Checking rule: RULE-000003 - BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 14:51:19,539 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 14:51:19,540 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 14:51:19,540 - __main__ - DEBUG - Found value: residential for path: building.use
2026-02-06 14:51:19,540 - __main__ - DEBUG - Condition 1: building.use eq mixed-use, Actual: residential
2026-02-06 14:51:19,540 - __main__ - DEBUG - Evaluating: residential eq mixed-use
2026-02-06 14:51:19,540 - __main__ - DEBUG - Evaluation result: False
2026-02-06 14:51:19,540 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 14:51:19,541 - __main__ - DEBUG - Rule RULE-000003 conditions not met, skipping
2026-02-06 14:51:19,541 - __main__ - INFO - Validation complete - Valid: False, Violations: 2, Applicable rules: 1
2026-02-06 14:51:19,541 - __main__ - DEBUG - Summary: {'total_rules_checked': 1, 'applicable_rules': ['RULE-000001'], 'violation_count': 2, 'mandatory_violations': 2, 'advisory_violations': 0}
2026-02-06 14:51:19,542 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 14:51:19] "POST /validate-permit HTTP/1.1" 200 -
2026-02-06 14:52:33,167 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 14:52:33,168 - __main__ - INFO - Rules file path: ../demo-rules.json
2026-02-06 14:52:33,168 - __main__ - INFO - Anthropic API key configured: No
2026-02-06 14:52:33,168 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 14:52:33,170 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 14:52:33,482 - __main__ - INFO - ============================================================
2026-02-06 14:52:33,482 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 14:52:33,483 - __main__ - INFO - ============================================================
2026-02-06 14:52:33,519 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5005
 * Running on http://192.168.1.65:5005
2026-02-06 14:52:33,520 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2026-02-06 14:52:33,521 - werkzeug - INFO -  * Restarting with stat
2026-02-06 14:52:34,067 - __main__ - INFO - Starting BC Building Code Rule Engine API
2026-02-06 14:52:34,067 - __main__ - INFO - Rules file path: ../../demo-rules.json
2026-02-06 14:52:34,067 - __main__ - INFO - Anthropic API key configured: Yes
2026-02-06 14:52:34,069 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2026-02-06 14:52:34,070 - httpx - DEBUG - load_verify_locations cafile='C:\\Projects\\cov-demo\\New folder\\project\\python-service\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2026-02-06 14:52:34,393 - __main__ - INFO - ============================================================
2026-02-06 14:52:34,393 - __main__ - INFO - Starting Flask application on port 5005
2026-02-06 14:52:34,393 - __main__ - INFO - ============================================================
2026-02-06 14:52:34,409 - werkzeug - WARNING -  * Debugger is active!
2026-02-06 14:52:34,424 - werkzeug - INFO -  * Debugger PIN: 100-590-559
2026-02-06 15:20:43,355 - __main__ - INFO - === Extract Permit Request Received ===
2026-02-06 15:20:43,363 - __main__ - DEBUG - Request data keys: ['pdf_base64']
2026-02-06 15:20:43,363 - __main__ - DEBUG - PDF base64 length: 12776
2026-02-06 15:20:43,363 - __main__ - INFO - Starting permit extraction with Claude...
2026-02-06 15:20:43,363 - __main__ - INFO - Starting PDF extraction - Type: permit
2026-02-06 15:20:43,363 - __main__ - DEBUG - PDF base64 length: 12776 characters
2026-02-06 15:20:43,363 - __main__ - INFO - Calling Claude API...
2026-02-06 15:20:43,364 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 15:20:43,392 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDkgMCBSCj4+CmVuZG9iagoyIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjMgMCBvYmoKPDwKL0Jhc2VGb250IC9IZWx2ZXRpY2EtQm9sZCAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjIgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iago0IDAgb2JqCjw8Ci9Db250ZW50cyAxNCAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDEzIDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iago1IDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE1IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTMgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE2IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTMgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0NvbnRlbnRzIDE3IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTMgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0Jhc2VGb250IC9IZWx2ZXRpY2EtT2JsaXF1ZSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjQgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagoxMCAwIG9iago8PAovQ29udGVudHMgMTggMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxMyAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTEgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxMyAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDYyMjUyMjkrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDYyMjUyMjkrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTMgMCBvYmoKPDwKL0NvdW50IDUgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA4IDAgUiAxMCAwIFIgXSAvVHlwZSAvUGFnZXMKPj4KZW5kb2JqCjE0IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDExMDUKPj4Kc3RyZWFtCkdhdG4mZ04pIiUmO0taRidSTkQ0aSosW1BdMm9IJzlKXSRBJTVhWD9FMis3OWVDcTJRUnEtZEBZJiYoYFsldCpeKSpBYyVmQjpdUF5PZ3VxIzpWbTQiSkBdLU8mbEdpTCQ4WXBDVWwsPl9XQ0ZWbCY6dWtdKWQjMV4pPStXYCRWMFJpOipoNkIuLTBWZzhMMS0vZDJsJD50Vk0+TSFCUEheSjx0PWxMZ2pbJyhLNUotJmZCLDZpZSosKDVtdGAsKmg9RnI8XnBgZCtLTG48KyMwPzdIVEJUTz8pRDElYVRvQEciJmlmaWZdODFbTTx0NksvUi4wKEB1cW9SJ2QsXDhgPF5pbGUyKExtYVxOZF0kTFg3I1JtNzNlW3JbSSxAZzMpYTBCdVE1L3BmKltlOiJzWDVuaTQ6UmVuN0tPKkhLJkw4XyxNLl5gUEhmR1VEV1Nhc3RpV2FhPXJzQG5TQDtKWT0ldUpBS2JyOSM2WT44ZydZNSFXUTBzcTRgJTJ1UTorOlV1W1MhPVxNYUIxIU5GYVo6cWVqZzxDKE47JSUsI3M2RlZbSk5OR0lsJzxLV2lmQ25KQ0RlMSwlLSxXajdwZys3PUErayQvW1JgSSVHV0FbMz9rUExqcS4/UlA0IUZqK3EscnNaXXQpTHRiPCM5KDZEWEEpXjohXj1KTzVQJGtaXDpTTSw4Niw1XG9ULSU5Wm1bb20lY29cNGlTUiF0QkdJPWxSVWYqcEBEbj1tIVdUMjdFQkoiYTJlSjFTTF42SkwuTlZyQT88IilJPEs+Qj49ZjUzWidYIy1jUG0qJ1FEMzkpblJmRkREI3VnMSZxTiJtaUA7SzVsQVVWUzZLSFNObj9GVTJZN2BqXllLJVVKaTlYNXNHW0doJFVucU4hJ1whVypMPmsncHBeaDxpa2dUS2hBKWhgMGFXdCg9W0VGLSNdW2E1NkZEPjFraitDRXRaWVM2ZjdNPSJlJlMjISRHUkMvdStjZCdBdV1GTkxDWGM2bnRyXEQ8bzJTXygnXF4hVm9fSGQjL2FkMzYyMyosWytaXnNlMldsYXFBJWkxJmUiYkVBJ1xCTEYxRU1NN1BoaTtnVVpvYmVtTnIsLTUzcDlcXis3LktzSTRLT1E0L0VeT1ExZSM/OUU0QE9QakUiY0FQImxDOlFDYWpdVklIQ1NyWmFaQVxYblllbzowJ2piYi5GZGlDRFhZR2tNMnEzJl9MRzRKMVxtIVYhM1FrbTNGRDhWJC40a0MhYGtWKlMjTjpAOVpEOU85XD9dVyp0bGRwVXBqJERfazYkIjlXV1JHaU0/YC5wQ1FkUlV1Om4wQyVXYyI8I15aSjwtLy4pYy9oN2FzdDE4QCVobUNNVjBlck5kPixBOnN1R0dOXFRaM2NFSVQ3ZV9cTGo2VkphX0YoVT41aCxDaCNXOiljSmRNPih0VW8kcEtQLiJJckhxdXFbR2MyOEBcfj5lbmRzdHJlYW0KZW5kb2JqCjE1IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDE1MzUKPj4Kc3RyZWFtCkdhdTBDPV09Pz8mOldlRG9aTDNGVkMhM1NePzpKY2ZWO1E3IVM/YEkwOGNNTUFvMCc+JDdZXSNEYkU6UlFtQkhLJ25WXW8/WEtrR1Y1RTIvTFlEY0IhSD00O1tyVm5ANXImUS0mSigkNHBsUVFQKzQ1ZyFOJCtvOzEqX2NUTFcwQEtpRFwhXjpfRSk6cWlETWpRTjs2MmhUMEBOXEhLKCI+Zm9aNGlEYywuPGldMjRaQGskLUgnVk8oK2g8NmRNX1k1RjU/ZmBDMHJuVTRaR1ZWQWo4MjheYnFbY1RDXTtnJzdWTTlkVWAsRTpWPitwOz1MYVo6IklFVDJtRSRxaSFTaDVJNDtbI3MvWDpSNkNKZVlBOzxqLCdFNC1PLU5jLEdTKUZidS1eKDBEN1RhcmpQY0FPdVlNKDJOWWRXZGdrQF88ajgkcio3VDIybnQ/YVZmJUcmU2tBa1gobDFGTE1ZWmVLNj0lLV5wVz1oIWs1LUA4QGE9ND0qdVYrLFJYVlw9VT0qNG8vNy8/MSE1PHFIb0xWdSIjSWRkOGRYRWhJT1dFWi5hKGRCMjw8R0MwdUs6Nz9VNj8wJjI0XHAtIlRzNG4kUmZUN3ImIWRRVyV1Z1BuLTNUMC9GbkklODNcSyJrZzNJJmROWCooZDQ0ZEVsb3RHTj5pQDEiaWRcWD4hU0FFYV1Pa2hcYC1PYl9vLWEwIy87XUQhYyc2X2otZW5fL0Y8XCc6WEQ6VmlyUmZbQTxsN1QiKGZUNk87PWlPVyptJ1ZvMSliVy9HImdxX3EqNm4qTTotXlo4REpPZ29pSVokRkYnI0s6MWYpKkk2X2Q6L2QrQCdcUT11Um9IQ2RDWGVYKzhhSC5Pa1A0ZD1EWVJaMDFuZj0uPmlyRiM5aXJBcURAQGVIIVooVnQ+akAnZjJrSDtTK2VOMjNIU0IlRFFqQSsrMjxOQiVCJjtIJ00kIyxhNDteNyQhVU1oJW9bK2UtVio8M2NXL2hHRUluIWQlYDNaO2MrJDBGXDJFIXRQQnNaJ1I2K2tsXmdxUi9GIk1lOXNNRlpLJ3BHVFYnOD5EUjFHSmk7ImIkUjg8TTs5cD5wOVcsYEMyXGYkLS5eVTg8Yi1OY0o7PHNbYEVuVj8vczNNWl5wMio4Mkw1cSgnM1tQY1goITk7QmxcQDpZJy06SWJUVDdsRl5mR1cvMiVNMiUzT0FjQWxAOnBeQVpoI19NRFhHQGcuMWAzPGVxLFsvMmEwN3V0Wy5NNSppJ1tyXSJoQz8wUHRdTUY3MTVRQTcpcSFJaTNmYjlpTChoYWFqNUorNiM8RmteP1NpcEpHUDFdQyk6PEsrJWBMXVcxJVc6Yk9ZSjgnUmFvRjg1aEVNIShbSSw+PUBpSVlZLSNWOWcqXFZrPDRjWmQ/XFhhSDUpVzFwLGglUS9pRVpjWzo2bT85MWFEOWc1WCpha2swXDxtXStaM1NEbkVlKSdIWEFbVWtiSGhpN2A4bDFwPmw/I0VNKF4kNS5wdUJYbFM8I2EpdGxQW2hqYDtUZE11JGtGIkFFNypHdEhZNyk2bWJqMDcwOmRDLy5ydVpeVklnR25EbVQ4IUEwNUUzQ2hhZy5mXSYhSiVpPSQxWWdWPSU5ZGZuUj03R1ptVVtLVl8/cVpqPXM8bVRWO0tncTtwTkJKODhMNks+NyRMUy8sNkZuWlNJdT4rMlRiNC1JKElIMTxqc1xUYzJGKT0qcj5pWHM4JlQ8bWRfWVBPKE9RRFBtTV05XV05SElbRSs+a0I2Wl1bYTo2MjwlcWMpIyE+OG8mcD4sb0RFO3BEPjtpZ21ITWlpOGMiWF44QCFXM2w2SFhCS0FnKU4tTV5yNzcrSVosQmc1WEwxRUQ0TU5HIUhGOlQpVTwoZC1GJGspdERhUUQuUU1VNDs+aT0lbCI/UWYlKDp1R1AwXilFXCVfP2xrRilYZjExWHM3N3BKVThzJzBENF9uMzMkUD5ZOTghYiRJPzhyOllCZW5EYClXZipULis4V2tgKERlYzJuaVJlPylyckw7aypzaH4+ZW5kc3RyZWFtCmVuZG9iagoxNiAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxMTcwCj4+CnN0cmVhbQpHYXRVMWQ7bXIlJjpNbCtsdV9DSCthNVdaYGRtO1hEQDE1bW8kQSREW0xeIlZIIzsnUE9zQVgnb110czxHIVxOWWtxbj46IjFFPUZtLWA5UyY7Rzpccm0iL2VJb0NVLCNVLC1MYm9yI04wcjEtaTpKWWsnX0pcSGxKUz50TUBYOXA8TFoqJV5fVnFzUTonYDdxXmBHakgmb0lqMmFRIlRXWzIwQTNXXHQ8aSlvRXErVypHZ1RlTyQ8ODg6TnUmTyxObiNZIixhMEsqXUs9SUluQjE6RS5VPGNUSFUpT2FiNVchb1loUS86JV1bVzZDJEpGQkBGVjgmOXEvbk5DKE4zYStLXSYsKGhCPiZmMFBKc0MtbUJHRDU5QUkpTDtEa0tFQThwWS1jZWxdZVQ4YmpkbVQ0TysrI29IXE08PzAxR0dwJVRwYipAVSpZZ2tjQkVsKD1Lb3FLJilpI1BaMmczRFYjRm8jXzxQO18sbWxoamxFKlJrbSZvKm87PioyS2JxWmRqZlApWE40JCxMS0MhblIyOUdPSz9xSCpsMSRYNmRHLyRFQHRDWzszMyQua1RDW046Im5OLTtAZ1BNI01MTjIyTSw5PFswR2tZai4rdVwydE4qYT9sLXNEZFMnVEdpWjZUKkx1TUdNSTk2XG42b2JQO2ZXVFVHYHQ6Kjg+Z2ssRVdKW3UxTyFvR3JuJTJEYWhWKUhCbXI6UFZBaD5fYyxsPDl1KyJtNEVSLm9RP1cxPSdwSG1iRCU2LWFeTE4/L1MoajliSnVtbXBmWHFWY1pbLCR1TmkzZF90WmdaTExLZk84UUlIVyw9Sjk7KzljXmcqUV5GdGg2YF8kKT0mSz42QiZqXUx0WkpXKSxvbUhfM0s1VEVSK1ViW29tUWZzIkRjdVkmVE5za3E8RW5eW1wtTiVUcFphVTo+O2J1c18sSDEhJk9yOWYkOD06cDIjLiFVLy9pbFFoMUAuV0YjUF1qLTluPCpcJ2wvUmxfKD1aLDsyZFNMUlNFZzZaYzBFTG9CZktgMFpgbz1STjZXWyxKQCJ0PTF1cidzJlEkXyxETmRnUUhWW19LP11iU08hI21jLDdhQ2RrYmQiclZFUyxUYEYsbmJMNWEvXzI2UUxYWzpCSWtWR01rQFtcZFE+KyhTMGo2Xj48YVI2MHU6KDpiUC08YE4kT2BJSEBQZEhDYWZOVC9YR1JfIy4rODNyUmRhJWYrLUdQKzpibTtdNkJuc11ALTtJOlkmYi4rZ0MvY0NqOmBmLDs0clxLZj9SQllKUFNOWSduUz0pNURoLDViT2s5UTU8PVMuQi0qWzlWYE9FY11TQCRCVWcpITlmbmJjbFw2Tj47RV1vNl0iLF5KRV9eR2xnMlExSFhiaWNVPG4pOFE0N0I4N2skRiVLIis8VkFmbkBFdDtqPFRfPStfWWtjYy1xdVNAQypFPG89RyRrLV9VXF8zLDoqbC1JaGwkRSwubk1RMWxiaUFAJG4jK2pCS2dFRUdVJHQ/VSgrISFrakQuLU4nYFhwVDJ0VDVuWSVsIWpGOXBiVC1Pfj5lbmRzdHJlYW0KZW5kb2JqCjE3IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDEyODEKPj4Kc3RyZWFtCkdhdG4mPyNRSyEmO0taRi8qOCRaVjVsL2RgV2ZcTTxuY3EhLmlrMT1Da0wjNUReXVQ9SDNlV2drWV9CWSkmaiE7L2tOWzNucHJbTjFRVGUqcidKMz0mKDFGKSVjQ09rUU88a0o2TFh1Lj1VXW5zaT9qcmlSWk9ERWtDWjhBRyIucmlDYSoqY19lWnVTVEhobl1qcS1uKzAqVT9LXlY5OCJGIkxLbzpKWSwiYHAhXUFCMlEoI0JqJjdFPF8hKjlFRF4lLW4tSGojKCZvWTEzWDAhcCxIYklKSmclPjpJQGlQPy9BW1Q7MHIzSGlxRT9UZ19DKkpLUWdqSlZTWiVVW21CWFFGOT1WRm4xRGpIQyErbT5GTEtPJDk3ZykhOU8xN1JUQSxiLCI2TXBjRyZIQFBOMHE/Ul00KVlDU2AjQ2Y5MExqSDQ+I0dubUhZQVYsXWJHTz1IQihWJ1I3WC9bbWUkP1FjYT5rWUdoW1hIaD0nQC9QakA2JEc8QmJfay1XczJpQzRUclkuIWIyITZJTWwtTC1ELC46Sld0LkdXMWgndCVtLFUraF5SKEYta00+S2l1Ik41JlVXcj9zSGwlaWBIOTRWLUdYVzo0IXNvKHVmYzhiSERcL1dxWy4yLmlPQnEzcylmNTZHTGI1dDxZSFUtIWInaWFmMGthJVtiTV9fVExvRE87XEdgK3JLcVZsZm9mOERDcT1kTHNtXFZkN0Q4WlE+ZlVgZ29TM0pyYCo5X1gjdWBBNiQ0bENUKm0mMHQpRFhNLzVvTUVBaCJgbFlWcU5eYGo7NUNBJEZNOCdlREI5Xm0kX10yJGdUUjkqNmdqXkEzTGtwQjAlYlNCPEM8K2pyPztZcG4iYElOYiE7U1VOKCsjNT9YWnFZJmNiJj4yaDpZSG0jKD5DYCxAOk9EbGNIciVbayptMHNjPzt1VCoyXGpHKV43TWEtPjxiXChuam1rQmI2VmZgOClCcGQyJmwyJEM7ISZiIzA5KEZPJSpqKU02P1RkaTl1P3JbX0Y1SlRjY2JucDZLSlUlVDwlKltfX0FLXTFqOHFaQ2NRSiN1JmxsJTw/TiZtL2tLaDpWJ1dNciFcdGhnSVhjOFwycCFYayhZS145JHEqakI/JzRRRV9vNjxhL1MpW0NWKWtbOT4oOmQ4WzBTO0EyZDROKWM2UVU1Uy0kOmdPcnBSNltpNFgqLkFmJEtec1llWzptXV9tbmZDSGVnSCRJTFtWW2InN00zOThpImJoL1JrRCZfRjNkSScpM2QvTzA0QSEmTXJRQVkpJ0VAMGNnYzhMPDx0L0VFQ09nMU1UREgrQEY6ajMnc2ttMCJROmBzITVCLlU+SyMxPlpJIVlIYTFiS3MmWWI4Q0lRPyNHZythQ0tzMTY/UlFpbTtzKlldTk8lc0psaEAhX0dKXFpLOWpHZ1xqZWw4c1BWJCIlVUZLLilHOEdhIi5ZTkxHQz8nXixiV1U3ci1nRW10V29eUVxaNnBzIkVFTlxJZ1A1T2Q6WS9OKVFMS2shLjNXZDRlRShMQWw7YjQ5MTxhbmZaK2ljQ1dqbWxYX2BzLF1ZQSJZWTknMWRLSmFGSmlISGJSTDAwclh1TTV1ZF1RSmtKXVQ/KyhaUWhPaVZKRC8/aWhjPDsyQVAxYWdsZm1WY2RDa0VxRG8yQC8tJ2lYMVFEZkRubDoraGFALkhPMEs5M2V+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTQ1NQo+PgpzdHJlYW0KR2F0VTI+dTBLTSdSZi5HZ3JIVytZL2JdKkJBYEtjT0twRUNkUm1OPVdlbC5mYmNYKT1qIlZfVW90PlJoI3U2QT45IzFPRW1bU0BkW2ZxSFcvX25bYiFrPVc2OkgmPkMiTEE4ZixZMjwkTCRSRjZkdSE5PmB1MGgpNkg4WEsmPj5KZSFmaGMialR0c0U0bl0ubigjX1YpQFleRi1sNiRKbUkoXy40MCIkQmBiWSlaRzxPRyNFZmxyZzNAYlAyUXFnYSFXRmpwWms2QTNSdVdpJzBRYT8yYzw/Ik9DcWdFQVpqXyRWZXJXLnVLN1lVXWswZy9XIj5oY1BFRltEPCdULG5cSC9vYEZQbVhxaUxCXUB0b2YicmRwZFhYWF04JUdeNTIocj9VaGNGNlYwbTc7Y1VJV2shWjUoPGJcSi9RYF9dcjRaZV1TIVZrVDJlMTE5JSsqc0pGbC1IczVfb3NEXmM2bjljJm9DZVtlL1taKmklQkIsKVxvZzs0QStEYjtSSCkhaVtWOyNuKTBQMF9kKWM+TkgiLSVGamZxPDQ6LThzVGhoallOXU1OSjxKQylpYHRwM2xqXT8sImdvIyJ1M0hrUktIdSQsbD5pYmpIcUpdY2svdUxAZnM8TkoxayQsbT5nRW1qcVxgMFkuVUIhbDVYNi1sakA5K21gSFlvUy9wPXI2cyhRZGJBdWVrV0g2JS5aXTsnOS5UXkU2P3VYZWJOazRJRC1Ya2hPQyFfUXQuLWFPQSErKGA8JFZFTHMySmJrdUpgXFhFUFlCNStaUjVLI1VUSVxOJUpIYmpOW2lyTGFOI1xWNGtAIj48N09rcjNAPGc2TCRYKWNYWFxhZlxeJEZHIXFCOjVFYG8/PEJzSGtKLFlDRnJOcUJHcTM1LDQsUFNbPVpmaGhmTlhtTi5ZRUcpVjBNaUclKShqbUlmUUhGZlJXLFkxVUMiS09fbCpGZ2ZXTU4ycWhKTGU/KVJzREg1OFFsbThYXWRvIUtxdUpyNTxQIV9SNk9iQVYwPUJHbWBSPFwsInJKL1tfc2ZfOVk6RGNyb2FUYCZmcjFgYElyZmY2XmpmbkdmRy5QV0pHYFVNLXNoYW0rP11tQGE8TmxUVmkwYk1fRkdpbi1QJzs7Kzc7V3Jvb0tcUzdubjY5S29MTjcqY2ZuZnJPJDhWOTpuL05mW1c1SF8ta3FyP1ozSS83SWRqaU5lUDs1Iz0uJ1AsNzxiMFQrcDVHcFA6Xy1iNlAvYiw7XkphP0IzLChhZyVFMk9DKFIuMlRrKVkmKCEiJjBaSVRvIkNUT3A9LzIidDsuPDw9Pm5gXVQ8QGNMLjY/cyU7NytsQj0mVVhjby9EO002anBMW3NCaEJEdEdBPk8qPGBbL2s7KlZOJG1cLlE6Qm1IIkwzZCdaaUlpPTlGIUknXydCblBQNzMkTDRcV3E1MSpYVyciL09uN2ltNDYtUzNmXEo2YilwUFciLlxsNyI4b0AwUUIwWTBJcSMtQUFbZEpGP2A+YTtUOjZiMmtGSkIpV1gqIWo1Plk5RSgrMl00Uz8sIVEvUS0rJkFGNThLc0s5SWF1L1JWRWtucSsjV1s5Um9sXzFDUGVrVkplKjY9P3E9VnIwb18vMyNHL3VBaTAuUTJRVlojR3VsTjI6cEU4c2g2VWFeNCRzJEZOJVVoNGItWjZnW1dtNlFtc0BbTjBCQlYjOS1mXGw6YSxyKDgpXWxEPT1QYCFZQDdeYS5HaVZuQDdLKVBBSShVLTY2PlprT29hXWomTzNWKi9abzFIYHFXaV5STVNOU1xRXyRETjo7J1MiPVp1XURiZC5gOVs2VUxsaig1Zk82al5sZDYvPCpsdGhQTkE2WWtwcUFZN01TTS8uW20hN1k+VjI3SjVbMm0tPUdqZjxbLkZjOj5rSUE2JkRcKmMzJltxJC5FSCgtO34+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMTkKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxMzQgMDAwMDAgbiAKMDAwMDAwMDI0MSAwMDAwMCBuIAowMDAwMDAwMzUzIDAwMDAwIG4gCjAwMDAwMDA1NDggMDAwMDAgbiAKMDAwMDAwMDYzMSAwMDAwMCBuIAowMDAwMDAwODI2IDAwMDAwIG4gCjAwMDAwMDEwMjEgMDAwMDAgbiAKMDAwMDAwMTIxNiAwMDAwMCBuIAowMDAwMDAxMzMxIDAwMDAwIG4gCjAwMDAwMDE1MjcgMDAwMDAgbiAKMDAwMDAwMTU5NyAwMDAwMCBuIAowMDAwMDAxODgxIDAwMDAwIG4gCjAwMDAwMDE5NjYgMDAwMDAgbiAKMDAwMDAwMzE2MyAwMDAwMCBuIAowMDAwMDA0NzkwIDAwMDAwIG4gCjAwMDAwMDYwNTIgMDAwMDAgbiAKMDAwMDAwNzQyNSAwMDAwMCBuIAp0cmFpbGVyCjw8Ci9JRCAKWzw0ZGE3YjUzYzk4ODQ4NWQ5NWQ1OWYwZmRjMDk1YTM1MT48NGRhN2I1M2M5ODg0ODVkOTVkNTlmMGZkYzA5NWEzNTE+XQolIFJlcG9ydExhYiBnZW5lcmF0ZWQgUERGIGRvY3VtZW50IC0tIGRpZ2VzdCAoaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tKQoKL0luZm8gMTIgMCBSCi9Sb290IDExIDAgUgovU2l6ZSAxOQo+PgpzdGFydHhyZWYKODk3MgolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this building permit application and extract all relevant information.\n\nExtract:\n- Building details (type, storeys, height, floor area)\n- Property information\n- Construction details\n- Any dimensional specifications\n- Special features (mezzanines, accessory structures, etc.)\n\nReturn a JSON object with this structure:\n{\n  "permit": {\n    "application_id": "extracted or generated ID",\n    "building": {\n      "use": "residential|commercial|industrial|accessory|mixed",\n      "storeys": 1,\n      "height": {\n        "value": 4.2,\n        "unit": "meters"\n      },\n      "floor_area": {\n        "total": 1500,\n        "unit": "sqft"\n      },\n      "occupancy_class": "small|medium|large",\n      "has_mezzanine": false,\n      "attached": false\n    },\n    "property": {\n      "address": "extracted address",\n      "lot_size": "if available"\n    },\n    "applicant": {\n      "name": "extracted name",\n      "contact": "extracted contact"\n    }\n  }\n}\n\nExtract all numeric values precisely with their units.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 15:20:43,723 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 15:20:43,728 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 15:20:43,754 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000012E9D7A1760>
2026-02-06 15:20:43,758 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000012E9DED9A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 15:20:43,803 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000012E9A736A80>
2026-02-06 15:20:43,804 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 15:20:43,804 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 15:20:43,804 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 15:20:43,804 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 15:20:43,804 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 15:21:08,547 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 23:21:09 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'22000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T23:21:03Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T23:21:14Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T23:20:46Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'29000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T23:21:03Z'), (b'request-id', b'req_011CXsfzQQyRLKfyt9FKNs1k'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'24649'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9e613eea262724-YVR')])
2026-02-06 15:21:08,562 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 15:21:08,562 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 15:21:08,568 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 15:21:08,568 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 15:21:08,568 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 15:21:08,568 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 23:21:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '22000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T23:21:03Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T23:21:14Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T23:20:46Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '29000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T23:21:03Z', 'request-id': 'req_011CXsfzQQyRLKfyt9FKNs1k', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '24649', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9e613eea262724-YVR'})
2026-02-06 15:21:08,568 - anthropic._base_client - DEBUG - request_id: req_011CXsfzQQyRLKfyt9FKNs1k
2026-02-06 15:21:08,599 - __main__ - INFO - Claude API call successful
2026-02-06 15:21:08,599 - __main__ - DEBUG - Response usage - Input tokens: 9558, Output tokens: 1585
2026-02-06 15:21:08,599 - __main__ - DEBUG - Claude response length: 4744 characters
2026-02-06 15:21:08,599 - __main__ - DEBUG - Claude response preview: ```json
{
  "permit": {
    "application_id": "BP-2026-00148",
    "submission_date": "2026-02-03",
    "municipality": "City of Victoria",
    "application_type": "New Construction  Residential",
  ...
2026-02-06 15:21:08,609 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 15:21:08,609 - __main__ - DEBUG - Extracted JSON string length: 4732 characters
2026-02-06 15:21:08,609 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 15:21:08,611 - __main__ - INFO - Successfully extracted permit data
2026-02-06 15:21:08,611 - __main__ - DEBUG - Permit building type: Single-Storey Residential Dwelling
2026-02-06 15:21:08,628 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 15:21:08] "POST /extract-permit HTTP/1.1" 200 -
2026-02-06 15:21:08,802 - __main__ - INFO - === Validate Permit Request Received ===
2026-02-06 15:21:08,804 - __main__ - DEBUG - Request data keys: ['permit']
2026-02-06 15:21:08,804 - __main__ - INFO - Validating permit for building type: Single-Storey Residential Dwelling
2026-02-06 15:21:08,804 - __main__ - DEBUG - Permit data: {
  "applicant": {
    "bc_contractor_license": "BC-CON-2020-78934",
    "company": "Pacific Northwest Builders Inc.",
    "contact": {
      "email": "sarah.chen@pnwbuilders.ca",
      "mailing_address": "300 \u2013 789 Fort Street, Victoria, BC V8W 1H6",
      "phone": "(250) 555-0192"
    },
    "name": "Sarah Chen, P.Eng.",
    "position": "Development Manager"
  },
  "application_id": "BP-2026-00148",
  "application_type": "New Construction \u2013 Residential",
  "building": {
    "attached": false,
    "description": "New single-storey residential dwelling with attached single-car garage, open-concept living area, three bedrooms, two bathrooms, and covered front porch",
    "floor_area": {
      "code_limit": 1800,
      "total": 1650,
      "unit": "sqft"
    },
    "has_mezzanine": false,
    "height": {
      "code_limit": 4.5,
      "unit": "meters",
      "value": 4.4
    },
    "lot_coverage": {
      "code_limit": 40,
      "unit": "percent",
      "value": 32
    },
    "occupancy_class": "small",
    "setbacks": {
      "front": {
        "code_minimum": 6,
        "unit": "meters",
        "value": 6.8
      },
      "rear": {
        "code_minimum": 7.5,
        "unit": "meters",
        "value": 8.5
      },
      "side_east": {
        "code_minimum": 1.5,
        "unit": "meters",
        "value": 2
      },
      "side_west": {
        "code_minimum": 1.5,
        "unit": "meters",
        "value": 1.8
      }
    },
    "storeys": 1,
    "type": "Single-Storey Residential Dwelling",
    "use": "residential",
    "variances_required": false,
    "zoning_compliance": "FULLY COMPLIANT"
  },
  "energy_efficiency": {
    "appliances": "Energy Star certified",
    "energuide_minimum": 80,
    "energuide_rating_target": 84,
    "furnace": "High-efficiency natural gas (97% AFUE)",
    "lighting": "LED throughout",
    "solar_ready": true,
    "ventilation": "Heat recovery ventilator (HRV)"
  },
  "fire_life_safety": {
    "afci_protection": "All bedroom circuits",
    "co_detectors": "On each level",
    "garage_separation": "5/8 inch Type X drywall",
    "gfci_protection": "Kitchen, bathrooms, and exterior outlets",
    "smoke_alarms": "Interconnected in all bedrooms and hallways",
    "tempered_glass": "In hazardous locations per code"
  },
  "municipality": "City of Victoria",
  "permit_validity": "24 months from date of issue",
  "project_value_and_fees": {
    "development_cost_charge": {
      "amount": 11800,
      "currency": "CAD"
    },
    "estimated_construction_value": {
      "amount": 465000,
      "currency": "CAD"
    },
    "permit_fee": {
      "amount": 3720,
      "currency": "CAD"
    },
    "school_site_acquisition_charge": {
      "amount": 1150,
      "currency": "CAD"
    },
    "total_fees_payable": {
      "amount": 16670,
      "currency": "CAD"
    }
  },
  "property": {
    "address": "5678 Oak Bay Avenue, Victoria, BC V8R 3P5",
    "current_land_use": "Vacant Lot",
    "legal_description": "Lot 22, Section 38, Victoria District, Plan VIP98765",
    "lot_size": {
      "value_sqft": 7200,
      "value_sqm": 669
    },
    "pid": "023-456-789",
    "zoning": "R1-B (Single Family Residential)"
  },
  "structural": {
    "exterior_cladding": "Fiber cement siding with brick veneer accents",
    "foundation_type": "Concrete slab-on-grade with perimeter stem wall",
    "framing_type": "Conventional wood-frame (2x6 exterior walls)",
    "insulation": {
      "ceiling": "R-42",
      "walls": "R-24"
    },
    "roof_slope": "4.5:12",
    "roof_type": "Pitched roof with asphalt shingles",
    "windows": {
      "type": "Double-glazed, Low-E, vinyl frames",
      "u_factor": 0.28
    }
  },
  "submission_date": "2026-02-03",
  "supporting_documents": {
    "building_elevations": {
      "pages": 2,
      "submitted": true
    },
    "building_sections": {
      "pages": 1,
      "submitted": true
    },
    "energy_compliance_report": {
      "pages": 5,
      "submitted": true
    },
    "floor_plans": {
      "pages": 2,
      "submitted": true
    },
    "foundation_plan": {
      "pages": 1,
      "submitted": true
    },
    "geotechnical_report": {
      "pages": 14,
      "submitted": true
    },
    "roof_framing_plan": {
      "pages": 1,
      "submitted": true
    },
    "site_plan": {
      "pages": 1,
      "submitted": true
    },
    "structural_engineering_report": {
      "pages": 9,
      "submitted": true
    },
    "survey_certificate": {
      "pages": 1,
      "submitted": true
    },
    "title_search_certificate": {
      "pages": 2,
      "submitted": true
    }
  }
}
2026-02-06 15:21:08,805 - __main__ - INFO - Fetching rules from file
2026-02-06 15:21:08,808 - __main__ - INFO - Loaded 3 rules from file
2026-02-06 15:21:08,808 - __main__ - INFO - Starting validation against 3 rules
2026-02-06 15:21:08,808 - __main__ - DEBUG - Checking rule: RULE-000001 - BC-DEMO-001  Single-Storey Residential Building
2026-02-06 15:21:08,808 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 15:21:08,808 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 15:21:08,809 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 15:21:08,809 - __main__ - DEBUG - Condition 1: building.storeys eq 1, Actual: 1
2026-02-06 15:21:08,809 - __main__ - DEBUG - Evaluating: 1 eq 1
2026-02-06 15:21:08,809 - __main__ - DEBUG - Evaluation result: True
2026-02-06 15:21:08,809 - __main__ - DEBUG - Condition 1 passed
2026-02-06 15:21:08,810 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 15:21:08,810 - __main__ - DEBUG - Found value: residential for path: building.use
2026-02-06 15:21:08,810 - __main__ - DEBUG - Condition 2: building.use eq residential, Actual: residential
2026-02-06 15:21:08,810 - __main__ - DEBUG - Evaluating: residential eq residential
2026-02-06 15:21:08,810 - __main__ - DEBUG - Evaluation result: True
2026-02-06 15:21:08,810 - __main__ - DEBUG - Condition 2 passed
2026-02-06 15:21:08,810 - __main__ - DEBUG - All conditions met
2026-02-06 15:21:08,810 - __main__ - INFO - Rule RULE-000001 applies to this permit
2026-02-06 15:21:08,811 - __main__ - DEBUG - Checking 2 requirements for rule RULE-000001
2026-02-06 15:21:08,811 - __main__ - DEBUG - Getting nested value for path: building.height.value
2026-02-06 15:21:08,811 - __main__ - DEBUG - Found value: 4.4 for path: building.height.value
2026-02-06 15:21:08,811 - __main__ - DEBUG - Checking requirement: building.height.value lte 4.5, Actual: 4.4
2026-02-06 15:21:08,811 - __main__ - DEBUG - Evaluating: 4.4 lte 4.5
2026-02-06 15:21:08,811 - __main__ - DEBUG - Evaluation result: True
2026-02-06 15:21:08,811 - __main__ - DEBUG - Requirement result: True
2026-02-06 15:21:08,812 - __main__ - DEBUG - Requirement 1 met for rule RULE-000001
2026-02-06 15:21:08,812 - __main__ - DEBUG - Getting nested value for path: building.floor_area.total
2026-02-06 15:21:08,812 - __main__ - DEBUG - Found value: 1650 for path: building.floor_area.total
2026-02-06 15:21:08,812 - __main__ - DEBUG - Checking requirement: building.floor_area.total lte 1800, Actual: 1650
2026-02-06 15:21:08,812 - __main__ - DEBUG - Evaluating: 1650 lte 1800
2026-02-06 15:21:08,812 - __main__ - DEBUG - Evaluation result: True
2026-02-06 15:21:08,812 - __main__ - DEBUG - Requirement result: True
2026-02-06 15:21:08,812 - __main__ - DEBUG - Requirement 2 met for rule RULE-000001
2026-02-06 15:21:08,812 - __main__ - DEBUG - Checking rule: RULE-000002 - BC-DEMO-004  Two-Storey Residential Building
2026-02-06 15:21:08,812 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 15:21:08,812 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 15:21:08,812 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 15:21:08,812 - __main__ - DEBUG - Condition 1: building.storeys eq 2, Actual: 1
2026-02-06 15:21:08,812 - __main__ - DEBUG - Evaluating: 1 eq 2
2026-02-06 15:21:08,812 - __main__ - DEBUG - Evaluation result: False
2026-02-06 15:21:08,812 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 15:21:08,812 - __main__ - DEBUG - Rule RULE-000002 conditions not met, skipping
2026-02-06 15:21:08,812 - __main__ - DEBUG - Checking rule: RULE-000003 - BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 15:21:08,812 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 15:21:08,812 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 15:21:08,812 - __main__ - DEBUG - Found value: residential for path: building.use
2026-02-06 15:21:08,812 - __main__ - DEBUG - Condition 1: building.use eq mixed-use, Actual: residential
2026-02-06 15:21:08,812 - __main__ - DEBUG - Evaluating: residential eq mixed-use
2026-02-06 15:21:08,812 - __main__ - DEBUG - Evaluation result: False
2026-02-06 15:21:08,815 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 15:21:08,815 - __main__ - DEBUG - Rule RULE-000003 conditions not met, skipping
2026-02-06 15:21:08,815 - __main__ - INFO - Validation complete - Valid: True, Violations: 0, Applicable rules: 1
2026-02-06 15:21:08,815 - __main__ - DEBUG - Summary: {'total_rules_checked': 1, 'applicable_rules': ['RULE-000001'], 'violation_count': 0, 'mandatory_violations': 0, 'advisory_violations': 0}
2026-02-06 15:21:08,815 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 15:21:08] "POST /validate-permit HTTP/1.1" 200 -
2026-02-06 15:22:24,465 - __main__ - INFO - === Extract Permit Request Received ===
2026-02-06 15:22:24,466 - __main__ - DEBUG - Request data keys: ['pdf_base64']
2026-02-06 15:22:24,466 - __main__ - DEBUG - PDF base64 length: 14684
2026-02-06 15:22:24,466 - __main__ - INFO - Starting permit extraction with Claude...
2026-02-06 15:22:24,467 - __main__ - INFO - Starting PDF extraction - Type: permit
2026-02-06 15:22:24,467 - __main__ - DEBUG - PDF base64 length: 14684 characters
2026-02-06 15:22:24,467 - __main__ - INFO - Calling Claude API...
2026-02-06 15:22:24,467 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 15:22:24,492 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDYgMCBSIC9GNSAxMSAwIFIKPj4KZW5kb2JqCjIgMCBvYmoKPDwKL0Jhc2VGb250IC9IZWx2ZXRpY2EgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YxIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKMyAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL0NvbnRlbnRzIDE2IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjUgMCBvYmoKPDwKL0Jhc2VGb250IC9aYXBmRGluZ2JhdHMgL05hbWUgL0YzIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE3IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9Db250ZW50cyAyMCAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE1IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkT2JsaXF1ZSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjUgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagoxMiAwIG9iago8PAovQ29udGVudHMgMjEgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNSAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTMgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNSAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE0IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTUgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA3IDAgUiA4IDAgUiA5IDAgUiAxMCAwIFIgMTIgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNiAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxMjIwCj4+CnN0cmVhbQpHYXUxLTswMUdOJkJFXSgnYDFFXmZUZyIjaS1UM2hqPGRxcEMjSUYtJVBOXGtXKT9oSFo6VGRoSWstLVgiUUVhOUVzI3AyL2FgT1xwInUjXyZIJ29HKVBtSDQpMTkpbzVULmNdNWU1J0gyTS51NGxgITxzLDZKIVFDJ1djVCFcT1FwQSFTXjo4R0JQNFM9Wkd1IylsYlJOKi5yJmYrISolRnIhSFc1Q2lgOi0qYmxrUXEzRkAhXFJRVDZxKmhIUkQrNCksS3I/JUYiZGJAXj5lO10saj1zMSs+KyQuJTBMa1BxXTZTRD1HInA1TixmPzZiQkBQdE9mZj1CTF1kOEI6bzUrWGRFLSFMWiVrRTBGciQsRD48RSpDcSMlPUReQCh1OmwjS2w1NEw+OypSKGV0MCcoRCQnKWRRIk8qb1olM1NDMCNaKE51NG02UTtSUjZTU3I5MGEsPzQsQFUtJGMsLytlVF8oKkpBM0ohQC9uWD4jWydVPzIqaj0jdEMmWSZfYEA3VCY/V2oxSSg0Qk1XbHFcVGo9UHNgV0gyI0Q0RFpMJmtCbDFHMTg2KTZjXjdjcmNGMVJwVUNcX0FoX0pJJFJKQWw9N2tdS09OW3FpKWlbMVw8RzJVMUswYFdnKVpaM0IkYVc1c28xYzA8Ki9qZGc2aHJ1bGVwSFhsalFLMXRIXj1cJTQlQDRacGpSQidIVDZBYWQ9cl9vZUckQktzIjVkO2ppIU4yY0ltQENBNUk8QmQ3Rl07L1hfM2pXRWotYTdNYjdJPWovTSQpUUYuXXU/XDw2MFAqOGMzbl9TQFs7QzBGQV1ZTVRMYF07KjJYXTUoP1NDKkw2Pk8iY2dFMTxFU0ZebDtaMi05Xlg5a0xwL1JdXSkkRGBpVjEnRzM3NCNZcywybDcrbCw4OSc/X0M3Q2xeX0VeQGxHRD41SUwhYHIrU0ZVKy9qQGNdOW5AXmQsLTFrYTgxTF5NbnNvMVllOWdrZllJVEBeJXIqTE8/PEg8Q1g3b2JwK2laPFonblQ9VVhlWFlLdGxQPERPNl1HNFUkVjVabGgpQm1sQ1EuV2U8MTYuQDxvMj85b09EWHFtayZENU1sWF84XFFraTA2VTllYj0qUGRbK15AciloPERaPzFSakk+aVZVJnBmaElccz4/XCVWQiVcWiRsbGFgRXNZPlMnQFdGcGtTRS47JjpJIVMqOzdUUiInSSEtYDNiS3JxYFFzKSJBLEFhTWtVYHVmMDFZTHQmU0FDT0hESk0oTlw7cy5BM1leLixmNkozR3Mnc3FwWHFgY08pVmRPVUFaSzVyQlY6WXNlXCVzSTtUXShaJGQ+S3BuakxLLWkxRi1tUTlFK2AyVihETzc9cmM5TyxSODUwRGVVSWknLGAubyYiPWlTQHU1RTp1UkZoSiQ6KEI2R3JjSGA1XmNmRWQhcUptcS1mOjdPVz8pUkleZWg7ODVcMzBeOzpVYE1xSV5BKHNmWWpNSVgxWi5vRkRDbzI3aFloLkBsPVVNPjVgVjMmOSw8VzpHOm9CQVdWdF5tI2hxJyZQYWxgKEhuSShSLiFabkcmNi91IjkxJlFJJmYnYyY8SCI2IiVTOzRmdENvXE9acnJCXUApOGx+PmVuZHN0cmVhbQplbmRvYmoKMTcgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTQzOQo+PgpzdHJlYW0KR2F0bTs+QmYnYiY6V2VEYlktOCpIUFdgK25MXFtLPjslQG4tR2NWSTZYR0VYaTcsMmtDcjU+bEdAVlpJVW1QXUlfdVtlaTdjM3JTRjtaSmRwc0E6aGMyYy02cGk4ZlMxNUhdMiJWRDtPX2R0Wk4pVVpSUkYyNF4pKS9UaXAjM14uLjFObVwsM0Q8XVRtbENrOiIvQjZiXSdIbnBqVHJvKS9ZaVZLTDJbUiJCQWpdNj90MnNpZicnTG9lL1piVj9CZiU4UVxqI0g2QnM7dE1cQ21mK281X1BoLFZBZVIhRjddUkkvcj1NYUshRCdxL1hbU0VfaCUoYUliME1HJmIzZic5VVxdcGFQcUNDRS46XTIuSTwwYjotUV4uZCdmPiYnZz1pKkkvPz5pZk5AO24xSlsxclw9SDFkLys1Xm1gMUJeKWJba0d0W2BxJ3NVP11RSFNNaSY9aDhxK0lKZi9MJGtXR2lWNkFrTHBmIm87bHBpWStpaCxBQz83bWRoIjZpVylzKzp1YXFgIidQam8qJWZFQi5AXmV1KV08IThxXEpzRlVxSERXLEJQVW5hX21CZWhnUy5cPjJyMllXRUtPOmQtJydoWVxsT3FZLGZ0cDpUakNdbEI3T2FfKFxePEdnbkc/OCg5VlNyby5lPlk1TzdmaDdhQ1NlJT9HXW04R1heT19EdDpIP2U8UURJODtdUDtAZ2NwS1dMdWZEQ25nT0NkYEF1IWVSQEBBUSojKkFePUBObj1XISFJaXI1SWkpOF9QSDNIQEtSPCo9TmFwRGB1PzA5TFM8UzhGRjJEV2c0YT4kQGFYYFVJJTszRlp1cEdEUFgwYy1fKyQzWUcsSiElKENsOXRnPVRUdTxrYUI1W1RMM0hPSlopdGleXm0oOyNNZW1NKCkna2MqZi9ObU1gMFNgaEdqLUZxTkcwYzlYN1gsSmZtUTlOW2FFNDBlYSJaSGE/TmI2Y0ZLUj9oZjFEOW1MQkcmKiNuJzJKNT9rJUJgJ3I+TW4pcWFaVkJhZm5tb1NRKUNwS0hhRyJeQks3a3BbYWs5TD1jMk4vLWgmdSJLM0lkZiR0QkVTIU5FcVhILStIOy8ibG8rKE4oJTNxI29DYTBqPk4sTVNEbiI/NUlfQ1JKTyw9UVU/PydXcGklSFFfWHA0JFRIN2tvLkZrXDxxOS8lO11rbSFOZjReV0VTZkIsZyZAZCFTa1J0IlBwal43MjtRUFwrOkFMc3AlLEAwO3BeSWdCL241aGAnIyxKZWciOUVHOWtcJmRxVFFoWmIuKjdUNm1ZKGVoKV4vSyZsXi80K1U+bzhnWScjU0YrIS10dEMoSS9mLVRuYk1CZ1Q/LGRzc1IsK15zOCwzITViQ1duUic+PCFEcUleOGdVT1dARE85cnFoXC9mbj1VZkNRNWs3QEE7ckw1UihBU15FS18mcyFWR3JeJShQK2hRY01fZWpLWSxtVnVacFZmL0trKlEkU0I0XGc3OGY7RF9cbSJGP1ZGdCY+aWtbODBAMlBDZzxVYzAhclQnb1YhJWohNSM8RkwsQ2kxSzlUIWxMJmtFSUhkVmFucmdYTTYvOldfcS9DPjFaRTxUNyxHQUs3K04lY1tbbENnS1k2bTA9ZS5eRmUrOztkKyxacz5DW0pSZGc5RDkpbUZaPUQ2P0lCZVtzJD5eRHFkQCNmWzEwajw1L1AuNCYiJGZNQFBia0o4QyFyTEduIjUoOXFiIk1BWUFVSyVaYSxlYi5FLFFMMVlVXTpRV2FmOVZyOTInYzNXJVJvTmA1UE0zTidcazZWWidYU2w/KWxBVlVnLW5ZM2lNTVA7WSdyRnEpdWhYKTljRiYrVl1ick4yclMrJWpxS11bIjtxKVdmZFpdXzVAYUZDSWlLUWYqL0pTXGk+R2w1RWc+ODomfj5lbmRzdHJlYW0KZW5kb2JqCjE4IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDE0OTUKPj4Kc3RyZWFtCkdhdTBDPj5zOTknUm5CMzMzdEVRUEJPMiNyUERjMyc7MzVGS1hBPyVHdThCKDsoRzs9QS8hQnVeSUxtX1wyclE9U050MWM2S15HZnE5SHJDR2tnZ3JHPlNCZypsSU5wIz0hYi8lL2UyK0AhaTk1RVVRdVRoayFNKDg6Pk9yZjAiIVNeYl9gQWdnOVhWMzNpOjldYD5uTCdTVyU1b24tYWhoU102aEhdbmJwLmw4Jm1ULDtXOEAjWGInKE4rITwnUXAvVkxDNWkjV1pqPGFpV0ctaF8iYVtVRilDQW8hJUgkYSVBWkp1LCVKRXQ1JDBWNDEjcHJKUlI7UVEpYz49aUBEI3BwJzVQQ3BEXClSIzwvTyNpUlknWzRsOkJtWCdlKFQ1PU05NTI8Tk8mIyJoTFFHWDllIWshMF0jOCdyZFJmXlEuYEokM01BcT4iTWpYMUhcSEFkTFlhWVRRYzNPOFMrJUthYk5vOTskViViLjssaCxdNCxvZlRIdSItYDNNaShFXj1wWkhAYyc3V1kmY2hKaCM1UzAnTkNVNW1NQF1TYkslUFBVNSUyJVddWGYocWJIJGE8PjUvJVcvSDg9cGJVLS9dRS05J1koPk4hST5hZD8zb0ErWDFkXTs3TGw7SSVHTUlZOCFuK1dFPEMuLVZmcjxAVjFxPTIlVCsxSEM4dUlSaVwkWWgyXFcjbWwwJEYtYUNgU28xWyFnWC9XXGdmWSszPD9nYlEuc0ArQW02cW90T2tVLjRdOjJ0UlRROTB0UWxwbiJWbnJhdSxSN0hTbCxnIWw0NklHJ3Ixa2Y1OmEiQkclTiR0XzpyMElocjtxdW8jaTdkRG8/LkRiOjo+R0U4JG5LLVlEW2hnSUxQSWkhTXMzMGIiWC0qJGs3Zjo6ci1AVkNlczM7TzszWjRYOjBFWV1WZT0+Kk8iVjY5bmVJWjZyIVlyXTFPZHJjUl9QKT1KImtoRSEzUktOclBUWVovPiddWmRIbEBHUSo1RTBjIzk0Ul0nTUtaZ1dFT3FWU1g+Iy1kbjBSZW9SNjkyWWdvRChXUSc4JzwlQTxqNCxWNHQoWjxBak0kX1o+LShGXXMyS2JNIm47VVV1YWtXL1VjQUYnUGBuJWNBI1RMLzM3KT4jbGIoMGspQSQlY0RAYCgkRFpQUUxzTjQ4LUFsdHFPYjFbXkZOa1ZoZzMxRWQxcVhoOi1UJFw/UXFPQCU8ZzdOUVh0SW83RTE1YylrVEksWmlWLHJSOk9SdHFdXTt0MVQqXCMrWj1HSzRic2UuY1BVOGRdaVZvIT83aF9VX0BiVW5oKW1WbWokVVJMJktQZWRfLzAsKTFxNzsuUF0lVE0nWzpFdEdlQWo2UjwyZiY3XSFlXzdDKHA1QkYubVRASzlfRSNhXWlDKUYuL0JEYig5JWRuOVpFVF8nKTc9OnVDSUpoWjdyXkZMXW11ckItNDVKMUtebU1kMF1FQThgMiJlMmoyYWpRSV1DOERqZzlGZyNaLmhTJE9Qa1ZNJlpEUyIqRVA+R0c1b2Q9QjdyYT0kcStHRVVjdEcmKk4/KE4+SXNMYjleZCkmWjJSMzQuJjcwVUVEZTEzcztHRzlIMiI9SSdvV0VuRFEzOzFmInQvYUE0N09YNEw5NzpYU2hcZ0VINCpjLW1lcUVjQT8xOD5GaDEnbU1LMFlVSERPLG9xQSJpYXM4U0gxUls+I01XPUsjPHEtQmpyI2lMcFZjRyhnQzoxPU1wXmo3S0szNW4/THJJKm5APF06a3JmOVVgJj1jSCcwQi4mNDJCTSomQGpNcDptIWlnaW5rJURvazFHOztLPTQvLVA1I08sKCtkQW5hKDZMNSNxQlQ8ZCtrKl11UDJCVWdfXVxZSDtjJkpuPihqcXNkPUFkRk1Dc3JSI11YLy45PDNnYmQoc11cRSxNYlI9I2pQJDU3bj5KOHU/YSMiT15tVl5GIVstJGBkbUMmWWJwVTByYm1wR3E2Zlklfj5lbmRzdHJlYW0KZW5kb2JqCjE5IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDU4Mgo+PgpzdHJlYW0KR2FzMkY2I1lMMyUjKzBMKCUzbiNoOC1HUVxrQEEoSkYsJlc7U15wNihLRnBSKDpOOXBaQGkvUjswTE02IUIobE4sYWomSyw6Uz09P0Y+MSohLjhZUmwrO1BJZDJuciVhcDU6PG5aPUI8S3Q5Wjk8cW9xI1pCayI+cTwjPyRTPWJbUjM9WCJxIlAoLD5XIiNKLjZXTDE5PG88aEJAY0BKL1NfLSJESSklQlU9P0FsR0dBKEAySWBxckBbci43TG83Jl1VPW1YWSdTTFNoWGg0UW9AZHJrazIvU0FHSGs5dCVxNUcwNWJGcFQtI2tWUjklTXJeUmtuXGE6ZTo0c21cRT9sZF1uaFlNXilFRjJxcWI/W1hsTVZhSypRclU3SVYpN0M6RTxJLzxGck1NUVkwYXJBKV1ldUQ6JVlBOzFQMGpWQzJxMiU/LExuQGo1UkJFOT5aZEFbV0M+ImE3cDs1PmskR1lzXjM2U0c7PCRadCNPUjZOPjsrMltGMG1OXi5uO29eJDc2ZC5VSFk4TzJIb1g8Ql5laVk6dDs4akBAcDNiPmcoVTo9Uk4oLlVyIi5IXGhHRVdaUGk5NnBELz8uTCsjKHM5RyhoZW1YUihNNCMrMFE8MytBXUhWJDRlLmleJG1NMlFRXGY3byNlOykqcEglQWw6bE5TV3EuRXBHK0VsSzgxTGNnPilgZiMwNktHOj8ySWlDV2s6cFViVGs3czZhaV40MjNwTEUhXWEwTShvayMsPG1UQT8kOWJiPkNVNzIuR34+ZW5kc3RyZWFtCmVuZG9iagoyMCAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxNjk0Cj4+CnN0cmVhbQpHYXUxLzk5XCdoJkJGODIuSmc5Vjc4aCgvS2AmdEVSN0FhPTNRcW9dbVVcIWg+Q1tBT0xiNk5NVDcxIi1EODlPZUIlUyIrNnNKKz5WY0hIKjYsOkspVT5OaiZpNik2ZWhAVWtFLTt1JjJAUElUZlwhKmsiPS88ImBnPkVRQykvVjk2J1g1bUM9KyVabGIyQG9JP0IuYGc3JWsvR14zXEczPG03X05KJ3BzIzBNLC0lIWNhSkZWK1BSXj1ZUXVvTW5HLWsyTTdKXVhBWTImJyFDQ0FyMGJMIkhqPmlXMFI5aysqZCVFVk8yVWFDK28yWmZNSXVYSnFDW14uKEh0WSkyTFVYZ2U2aGgiQVkka0I/akZFal5eOm8lU3I5M15GXWQhS0AuXCxeZTooUE0say1sZlZjcGE3NUdwVDloPlRsTHIpPFFWbVhUS1dvPU9XQlxvV3FYIygsVEZvWmkvTkIqczIiQjNHUTM8WTJpLTRmWkE8Y2lpJydGRF1SJ1klJVckaTNfJVRlVDJYJS5BRmBROCdKQScySlQ7TW85aCM5V25QJGoiJVxGUjNqcW5FVjFBR3JCQ0lgI1Q7WlRvKT1nMFheJD9qOFJIPC9QQyJlJ0wpZjtWYTdfMl9tSFtkI3FCLydoPiMoZGcxNlY/WTAkP28oNShFMFgwU0JmZlRWTHBnOmVlR0otZSgxIzZpKEZlNE9rTy9bJz0kVVJjOEA0TSZoKWQyUGMmNTRwQiVdWjlKOCFmZmUyWW9LVVZROj8vPXBjRkgoUDZQUztaZXAwRCE5T25QSz9wSlluKmVKbTFWbCRiTyZpcTUlUFZmNWAsPC1kcFAzZC0obmRZUllIJkpNJE89XUQpciRELCVNMk4nQDckSDtmaGVFTTE3UFslVjAxYSU1aEJqYC5XWDJxK0NrPzNhOnEpbD1KOiRbR2pCJXIzLGhZI2lxI2VlSk4wakRQPFNoPzFuQjslOXFkQ1sxPFc8bFpLVGk3UiFFdXNFbihzPUM0aiQjOTwvVFNyQGMkRkUyRUEiSiVDNWMiM2svW1xsLGFKYGBEMVdTXyozS0hXP3JOUzguOENHNzAhSnImSyYzSzAoSklnW2BWS2FPKEtfcF1oSEVxdGs5J0whVUhaW1ByTyFXOXMtYyYrZV8sYS4tKCJeR1xyTyZLM3UzMUROZDg0bjtDLzNKJ2hiWURaZDc/X1Y6SjhuKnA/J2JBWDo/OTkhLVdaMyl1cmMzZlRSWFtGUzNNVkZtdFUxaHMmPz1UKF81aGU5UVtQZTBlJU49YWhfPEJJLUtLanJzaSglby0hLyc8Z1NuP11BYEZSQjQ1OGxvbFJzNyVra1s1Nl5tY2JAM11oY2U2MEFUTihLZ2JzKy1bR1xkP0opRjA1Sis5PEluMm9FXlNhOjg6US1va043bmA7J0tYRyFsZDUmNldETEE6PjtkOUc7bVg4NjslaGonbUNYbDN0T0lLOFFwbDUqcGQpTmBncVhfcy8pI0k7ZXBTLEhePTpIIWgzJzhTKi5UJ2tUbWdiRzxMOyYvI0tETWUyXC5NQXJqOXE2clVLXj88UytDKjRhPC0nRlNeWyMibV0vJV1pQjVGQDEwKXApM1cpbXJBWlI4V1Q0VVg/Sjc1WDVSSCt0a0RBQGtFY2UmKFQzPStPUFNNT2wzMFp1XGJXZWEwKXJJPVpIK0wnZXEhbWdWJmoxTzYpMF1AYDIzS0xFWF1TNjBaXUxEUCxva2F1Qkc4YTZlKnIuUkc1SEMiYj8sJGkiUVFZR21HVTtOdSZjW2NpWW4yZ1tQU2VwQVwuakhCQlhiYWtLYVElb1FZSidnXVUmJW03YjU7aj5TUTFDJT9WXj41VygvWSo/QChdMmZsNzdCUWJCIk9ZRXBUJi45Z0VPPnQvVSxXLG8sVTwmW0crYz1YJlo+ZzMrYl5rNUFeNG1mLlk4SDddTV1idCpSKHRAMWYsZjM8Sz5iVShDXFg9WlgkZj8zQDMrSTw/Yz5fa3BdYmZSJ1xpNCVmKldiYTVLLGZHXjdOPDYtVzxJM2c+RlkkUXJDKDA/WFlSNFBdOGUvJWo8aUZxKEFGUkhock1VYVU2Sy1LbzkiWjszWHRoOWhoUCY2V2A6bGVPMUc3LiolJTJqViNLciwkaTdvPVddQkksIz0zXTokVD9KalcpYz1bZEYuSUg4P09GYj4vOWtvNDJPczJARiJwPFpHaC1xMGZuQEwtaiw2ayxpTmk/IWtDdElmXF1DT29+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTA2MQo+PgpzdHJlYW0KR2F0PSlnTiklLiUiN2tPaTZnNHQ8KUpybF03JkJpYWowPkpSVjtRR20tSEQ9Q3A9XkhLZCxvbz9YSm8jPyxvWiZqOCgpMSFZLFxtIjtvKUxCJlU0YCEjR2dPXDdXTWguLUE9bi4jJFhpPlNWbUghU187TTBoZzVhUFh1VnFSOTlzPk45dV9KN2VTNk1PNV9tS0Jgcm5mP1BsMjgpTDBgcCdsW2YkRDhcQjc1V1UyYGRJSU02SHFzXWRkczQpVSgoSm43VGYnRE1BKE5FZCMpKThGLz9SOCs+JV8kcEAyR0ojbkhGZTc0UFBxaElfbig6cjxEOjUwSjoqaV1rWGNUJkZaJmwuKC8/QUVQNkdYM1hcUSxXS2E+UiJLLz43IW9cSlJSUydMXiY4YGpJTGxPWmlfczA1MWFfcmxYNF1BNy4xbkVhLmxBOjdrbTlEO2ksSD9qOyxSKDA0WFpNbWgvVkA2Ry9RMUdQSWMoZWA/YywkWTYlcGhoTmJeKEdLK0FHUkheb09HTlkzR0xeNzsjS0E3TzFUR1QsN25sWFVyLFo+JF9bR11UNytKOzpVQ1R0IzRMP2ddcjNwP0Y8VSk1VXNKbkdmY0YrbSpjOkdvZE1dKG5pTG5qNzc6ZSloXTBFJ18mO2lnbDEvWUZKVGMjQmdmdGkhLTpgTjQuM3QqcCk8Q1pqKDhiXCZMO0BaVDE2VVwsRVVNXFtUb3JuKDNzc1ZPVV09bmdUKlFycjNwPjomOjNaOF1AJ2pVRipAZmBHaFpJMzxxUT8nJjVBP1tSUD9lN2hZXTYtXywtOnA2SXVFWlQ1Y11JW3QlPTJNcUtZOl9zOHNPazREMFJmZHJUMS42VDQzKGAidExfcCpibkQ7MGwwTERgRVYlUSpiUyU/M1QiaktgVjY4cVUqcXJsQStnX3BtWEAtNj9qTlg8VnNbajJXWmVrOWRcS0dGYGlpOlo4aGRTKiFqMUk0aEFcLGF0PGZKTCN0aVQ3UkpgNT5qMzVqOUpJVlM8dE1VJUJrV1QsdDJwInBAP2lhKSxqQy5BaGBPIlVlYENEbjtcLFEiVDVAZWdjXFpRQjlsWmkmXW9EJHA/TFZXUzFxR2pSRCJQNDMzPS8uMmldQS9uYlcxU2xMIks/MytjVCIkOzFAVXJAQGB1I2A5UDBAMUUxYGRiYWY0ZDFlSTlSU2o0PkJUZz9dNFtfITVkRzozdCpvcm5UWShXblphVCtoQ05VWWFqUEY3RS1uXXAyMWU5WmdBMW8mbD0kcjQ1TUJCUXV1WilFOycpV2ZLPXBmSl9AaDsybzlIJyVyJDgxLmhRNCFTU2FnSWYpVFU2S2MmVGYjL25UUF5VUEhidTw4VDY/TjwwSktGKTQzcTEtUy9UJ2RyJD06dD5ONFckSkFIR0YjPVhzfj5lbmRzdHJlYW0KZW5kb2JqCnhyZWYKMCAyMgowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwMDAwNzMgMDAwMDAgbiAKMDAwMDAwMDE0NSAwMDAwMCBuIAowMDAwMDAwMjUyIDAwMDAwIG4gCjAwMDAwMDAzNjQgMDAwMDAgbiAKMDAwMDAwMDU1OSAwMDAwMCBuIAowMDAwMDAwNjQyIDAwMDAwIG4gCjAwMDAwMDA3NTcgMDAwMDAgbiAKMDAwMDAwMDk1MiAwMDAwMCBuIAowMDAwMDAxMTQ3IDAwMDAwIG4gCjAwMDAwMDEzNDIgMDAwMDAgbiAKMDAwMDAwMTUzOCAwMDAwMCBuIAowMDAwMDAxNjU4IDAwMDAwIG4gCjAwMDAwMDE4NTQgMDAwMDAgbiAKMDAwMDAwMTkyNCAwMDAwMCBuIAowMDAwMDAyMjA4IDAwMDAwIG4gCjAwMDAwMDIzMDAgMDAwMDAgbiAKMDAwMDAwMzYxMiAwMDAwMCBuIAowMDAwMDA1MTQzIDAwMDAwIG4gCjAwMDAwMDY3MzAgMDAwMDAgbiAKMDAwMDAwNzQwMyAwMDAwMCBuIAowMDAwMDA5MTg5IDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDM0ZjkwNGEwOWQxMDQ5YTkzM2Y0N2Q1MmQ3ZmZiNDcwPjwzNGY5MDRhMDlkMTA0OWE5MzNmNDdkNTJkN2ZmYjQ3MD5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNCAwIFIKL1Jvb3QgMTMgMCBSCi9TaXplIDIyCj4+CnN0YXJ0eHJlZgoxMDM0MgolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this building permit application and extract all relevant information.\n\nExtract:\n- Building details (type, storeys, height, floor area)\n- Property information\n- Construction details\n- Any dimensional specifications\n- Special features (mezzanines, accessory structures, etc.)\n\nReturn a JSON object with this structure:\n{\n  "permit": {\n    "application_id": "extracted or generated ID",\n    "building": {\n      "use": "residential|commercial|industrial|accessory|mixed",\n      "storeys": 1,\n      "height": {\n        "value": 4.2,\n        "unit": "meters"\n      },\n      "floor_area": {\n        "total": 1500,\n        "unit": "sqft"\n      },\n      "occupancy_class": "small|medium|large",\n      "has_mezzanine": false,\n      "attached": false\n    },\n    "property": {\n      "address": "extracted address",\n      "lot_size": "if available"\n    },\n    "applicant": {\n      "name": "extracted name",\n      "contact": "extracted contact"\n    }\n  }\n}\n\nExtract all numeric values precisely with their units.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 15:22:24,494 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 15:22:24,494 - httpcore.connection - DEBUG - close.started
2026-02-06 15:22:24,497 - httpcore.connection - DEBUG - close.complete
2026-02-06 15:22:24,497 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 15:22:24,506 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000012E9DFD5430>
2026-02-06 15:22:24,506 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000012E9DED9A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 15:22:24,520 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000012E9DFD60F0>
2026-02-06 15:22:24,520 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 15:22:24,520 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 15:22:24,520 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 15:22:24,520 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 15:22:24,520 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 15:22:46,857 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 23:22:47 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T23:22:48Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T23:22:51Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T23:22:26Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'27000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T23:22:48Z'), (b'request-id', b'req_011CXsg7q4F39QXTLQAnHbR2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'22252'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9e63b46d8eb3af-YVR')])
2026-02-06 15:22:46,857 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 15:22:46,857 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 15:22:46,867 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 15:22:46,868 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 15:22:46,868 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 15:22:46,868 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 23:22:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T23:22:48Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T23:22:51Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T23:22:26Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '27000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T23:22:48Z', 'request-id': 'req_011CXsg7q4F39QXTLQAnHbR2', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '22252', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9e63b46d8eb3af-YVR'})
2026-02-06 15:22:46,868 - anthropic._base_client - DEBUG - request_id: req_011CXsg7q4F39QXTLQAnHbR2
2026-02-06 15:22:46,868 - __main__ - INFO - Claude API call successful
2026-02-06 15:22:46,868 - __main__ - DEBUG - Response usage - Input tokens: 11234, Output tokens: 1255
2026-02-06 15:22:46,868 - __main__ - DEBUG - Claude response length: 3774 characters
2026-02-06 15:22:46,868 - __main__ - DEBUG - Claude response preview: ```json
{
  "permit": {
    "application_id": "BP-2026-00147",
    "building": {
      "use": "residential",
      "storeys": 1,
      "height": {
        "value": 4.6,
        "unit": "meters"
      ...
2026-02-06 15:22:46,868 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 15:22:46,868 - __main__ - DEBUG - Extracted JSON string length: 3762 characters
2026-02-06 15:22:46,868 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 15:22:46,868 - __main__ - INFO - Successfully extracted permit data
2026-02-06 15:22:46,868 - __main__ - DEBUG - Permit building type: Unknown
2026-02-06 15:22:46,868 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 15:22:46] "POST /extract-permit HTTP/1.1" 200 -
2026-02-06 15:22:46,971 - __main__ - INFO - === Validate Permit Request Received ===
2026-02-06 15:22:46,971 - __main__ - DEBUG - Request data keys: ['permit']
2026-02-06 15:22:46,971 - __main__ - INFO - Validating permit for building type: Unknown
2026-02-06 15:22:46,972 - __main__ - DEBUG - Permit data: {
  "applicant": {
    "bc_contractor_license": "BC-CON-2019-45678",
    "company": "West Coast Developments Ltd.",
    "contact": {
      "email": "ravi.kumar@westcoastdev.ca",
      "mailing_address": "500 \u2013 1234 Douglas Street, Victoria, BC V8W 2E6",
      "phone": "(250) 555-0184"
    },
    "name": "Ravi Kumar, P.Eng.",
    "position": "Senior Project Manager"
  },
  "application_id": "BP-2026-00147",
  "application_type": "New Construction \u2013 Residential",
  "building": {
    "attached": false,
    "construction_type": "conventional wood-frame",
    "description": "New single-storey residential dwelling with attached single-car garage, open-concept living area, three bedrooms, two bathrooms, and covered front porch",
    "exterior_cladding": "fiber cement siding with stone veneer accents",
    "floor_area": {
      "total": 1750,
      "unit": "sqft"
    },
    "foundation_type": "concrete slab-on-grade with perimeter stem wall",
    "framing": "2x6 exterior walls",
    "has_mezzanine": false,
    "height": {
      "unit": "meters",
      "value": 4.6
    },
    "height_compliance": {
      "code_limit": 4.5,
      "compliant": false,
      "proposed": 4.6,
      "unit": "meters",
      "variance_amount_m": 0.1,
      "variance_requested": true
    },
    "insulation": {
      "ceiling": "R-40",
      "walls": "R-22"
    },
    "lot_coverage": {
      "code_limit": 40,
      "unit": "percent",
      "value": 35
    },
    "occupancy_class": "small",
    "roof": {
      "slope": "5:12",
      "type": "pitched roof with asphalt shingles"
    },
    "setbacks": {
      "front": {
        "compliant": true,
        "minimum": 6,
        "proposed": 6.5,
        "unit": "meters"
      },
      "rear": {
        "compliant": true,
        "minimum": 7.5,
        "proposed": 8,
        "unit": "meters"
      },
      "side_east": {
        "compliant": true,
        "minimum": 1.5,
        "proposed": 1.8,
        "unit": "meters"
      },
      "side_west": {
        "compliant": true,
        "minimum": 1.5,
        "proposed": 1.5,
        "unit": "meters"
      }
    },
    "storeys": 1,
    "use": "residential",
    "windows": {
      "type": "double-glazed, Low-E, vinyl frames",
      "u_factor": 0.3
    }
  },
  "energy_efficiency": {
    "energuide_rating_target": 82,
    "furnace": "high-efficiency natural gas, 96% AFUE",
    "lighting": "LED throughout",
    "solar_ready": true,
    "ventilation": "heat recovery ventilator (HRV)"
  },
  "fire_life_safety": {
    "co_detectors": "on each level",
    "garage_separation": "5/8 inch Type X drywall, fire-rated",
    "gfci_protection": "kitchen, bathrooms, and exterior outlets",
    "smoke_alarms": "interconnected in all bedrooms and hallways",
    "tempered_glass": "in hazardous locations per code"
  },
  "permit_validity_months": 24,
  "project_value_and_fees": {
    "currency": "CAD",
    "development_cost_charge": 12500,
    "estimated_construction_value": 485000,
    "permit_fee": 3880,
    "school_site_acquisition_charge": 1200,
    "total_fees_payable": 17580
  },
  "property": {
    "address": "1234 Cedar Lane, Victoria, BC V8N 4K2",
    "current_land_use": "Vacant Lot",
    "legal_description": "Lot 15, Section 42, Victoria District, Plan VIP12345",
    "lot_size": {
      "value_sqft": 6500,
      "value_sqm": 604
    },
    "municipality": "City of Victoria",
    "pid": "012-345-678",
    "zoning": "R1-B (Single Family Residential)"
  },
  "submission_date": "2026-02-03"
}
2026-02-06 15:22:46,973 - __main__ - INFO - Fetching rules from file
2026-02-06 15:22:46,974 - __main__ - INFO - Loaded 3 rules from file
2026-02-06 15:22:46,974 - __main__ - INFO - Starting validation against 3 rules
2026-02-06 15:22:46,974 - __main__ - DEBUG - Checking rule: RULE-000001 - BC-DEMO-001  Single-Storey Residential Building
2026-02-06 15:22:46,974 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 15:22:46,974 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 15:22:46,974 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 15:22:46,974 - __main__ - DEBUG - Condition 1: building.storeys eq 1, Actual: 1
2026-02-06 15:22:46,974 - __main__ - DEBUG - Evaluating: 1 eq 1
2026-02-06 15:22:46,974 - __main__ - DEBUG - Evaluation result: True
2026-02-06 15:22:46,975 - __main__ - DEBUG - Condition 1 passed
2026-02-06 15:22:46,975 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 15:22:46,975 - __main__ - DEBUG - Found value: residential for path: building.use
2026-02-06 15:22:46,975 - __main__ - DEBUG - Condition 2: building.use eq residential, Actual: residential
2026-02-06 15:22:46,975 - __main__ - DEBUG - Evaluating: residential eq residential
2026-02-06 15:22:46,975 - __main__ - DEBUG - Evaluation result: True
2026-02-06 15:22:46,975 - __main__ - DEBUG - Condition 2 passed
2026-02-06 15:22:46,975 - __main__ - DEBUG - All conditions met
2026-02-06 15:22:46,976 - __main__ - INFO - Rule RULE-000001 applies to this permit
2026-02-06 15:22:46,976 - __main__ - DEBUG - Checking 2 requirements for rule RULE-000001
2026-02-06 15:22:46,976 - __main__ - DEBUG - Getting nested value for path: building.height.value
2026-02-06 15:22:46,976 - __main__ - DEBUG - Found value: 4.6 for path: building.height.value
2026-02-06 15:22:46,977 - __main__ - DEBUG - Checking requirement: building.height.value lte 4.5, Actual: 4.6
2026-02-06 15:22:46,977 - __main__ - DEBUG - Evaluating: 4.6 lte 4.5
2026-02-06 15:22:46,977 - __main__ - DEBUG - Evaluation result: False
2026-02-06 15:22:46,977 - __main__ - DEBUG - Requirement result: False
2026-02-06 15:22:46,977 - __main__ - WARNING - Violation found - Rule: RULE-000001, Field: building.height.value, Error: Building height exceeds 4.5 m maximum for single-storey residential
2026-02-06 15:22:46,977 - __main__ - DEBUG - Getting nested value for path: building.floor_area.total
2026-02-06 15:22:46,977 - __main__ - DEBUG - Found value: 1750 for path: building.floor_area.total
2026-02-06 15:22:46,977 - __main__ - DEBUG - Checking requirement: building.floor_area.total lte 1800, Actual: 1750
2026-02-06 15:22:46,977 - __main__ - DEBUG - Evaluating: 1750 lte 1800
2026-02-06 15:22:46,978 - __main__ - DEBUG - Evaluation result: True
2026-02-06 15:22:46,978 - __main__ - DEBUG - Requirement result: True
2026-02-06 15:22:46,978 - __main__ - DEBUG - Requirement 2 met for rule RULE-000001
2026-02-06 15:22:46,978 - __main__ - DEBUG - Checking rule: RULE-000002 - BC-DEMO-004  Two-Storey Residential Building
2026-02-06 15:22:46,978 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 15:22:46,978 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 15:22:46,978 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 15:22:46,978 - __main__ - DEBUG - Condition 1: building.storeys eq 2, Actual: 1
2026-02-06 15:22:46,978 - __main__ - DEBUG - Evaluating: 1 eq 2
2026-02-06 15:22:46,978 - __main__ - DEBUG - Evaluation result: False
2026-02-06 15:22:46,979 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 15:22:46,979 - __main__ - DEBUG - Rule RULE-000002 conditions not met, skipping
2026-02-06 15:22:46,979 - __main__ - DEBUG - Checking rule: RULE-000003 - BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 15:22:46,979 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 15:22:46,979 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 15:22:46,979 - __main__ - DEBUG - Found value: residential for path: building.use
2026-02-06 15:22:46,979 - __main__ - DEBUG - Condition 1: building.use eq mixed-use, Actual: residential
2026-02-06 15:22:46,979 - __main__ - DEBUG - Evaluating: residential eq mixed-use
2026-02-06 15:22:46,980 - __main__ - DEBUG - Evaluation result: False
2026-02-06 15:22:46,980 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 15:22:46,980 - __main__ - DEBUG - Rule RULE-000003 conditions not met, skipping
2026-02-06 15:22:46,980 - __main__ - INFO - Validation complete - Valid: False, Violations: 1, Applicable rules: 1
2026-02-06 15:22:46,980 - __main__ - DEBUG - Summary: {'total_rules_checked': 1, 'applicable_rules': ['RULE-000001'], 'violation_count': 1, 'mandatory_violations': 1, 'advisory_violations': 0}
2026-02-06 15:22:46,981 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 15:22:46] "POST /validate-permit HTTP/1.1" 200 -
2026-02-06 15:39:57,541 - __main__ - INFO - === Extract Rules Request Received ===
2026-02-06 15:39:57,550 - __main__ - DEBUG - Request data keys: ['pdf_base64', 'document_info']
2026-02-06 15:39:57,550 - __main__ - INFO - Document info: {'title': 'bc code', 'version': '1.0'}
2026-02-06 15:39:57,551 - __main__ - DEBUG - PDF base64 length: 14256
2026-02-06 15:39:57,551 - __main__ - DEBUG - PDF base64 first 200 chars: JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+Pgpl
2026-02-06 15:39:57,553 - __main__ - INFO - Base64 validation passed
2026-02-06 15:39:57,553 - __main__ - INFO - Starting rule extraction with Claude...
2026-02-06 15:39:57,553 - __main__ - INFO - Starting PDF extraction - Type: rules
2026-02-06 15:39:57,553 - __main__ - DEBUG - PDF base64 length: 14256 characters
2026-02-06 15:39:57,554 - __main__ - INFO - Calling Claude API...
2026-02-06 15:39:57,554 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 15:39:57,584 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDggMCBSIC9GNSAxMCAwIFIgL0Y2IDExIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjEgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagozIDAgb2JqCjw8Ci9CYXNlRm9udCAvSGVsdmV0aWNhLUJvbGQgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YyIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNCAwIG9iago8PAovQ29udGVudHMgMTcgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKNSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMyAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjYgMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0Jhc2VGb250IC9Db3VyaWVyIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDIwIDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTYgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9CYXNlRm9udCAvWmFwZkRpbmdiYXRzIC9OYW1lIC9GNSAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjExIDAgb2JqCjw8Ci9CYXNlRm9udCAvU3ltYm9sIC9OYW1lIC9GNiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjEyIDAgb2JqCjw8Ci9Db250ZW50cyAyMSAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE2IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMyAwIG9iago8PAovQ29udGVudHMgMjIgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNiAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTQgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNiAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE1IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTYgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA2IDAgUiA3IDAgUiA5IDAgUiAxMiAwIFIgMTMgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNyAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCA4MjIKPj4Kc3RyZWFtCkdhdD0pPnUwMy8nUmU8Mlw7dDJOUkkpOHNmYy1jKCcxKlVTVUhTLVYmc21wZTdyKDJqbWFsT0lVYFdEdT4qVUxxbS1BX1JjVCtgTCZBNHJranFZWmtLPE8vXTpeNVNTQkg1JFJoODQ6TVg5NzBYRVdWY0NpYURVcDFgRXBQRlsuJ1tKMUw7Jko4ZlZeaT5iLTZLUC8pMCNMQWI+VmZAWjo9VE8wRidvWj9zKDkyaDpYLzp0a09Tc2FzJF82WlhPTkAnbS9gQyFpT0pSVy0qOF5bRDZqJVl0QyFfa0VqJ2Q4TUg3RXU1WFwmbytbWmd0QzojOHBWW1ciSHVhSnNldUZoLCVJZ1RydEhxJltGITUqQ2hlJ0smS2JZOERuKVNAW0ImMnU9MzpeOVc+PU5DJllELS1WRjRpdDZibTNBLitgPFBzK0FtWSE5TShoaS5NSipbVSQpRk8+V1IpLD8/KC9oWVRONU51PTI5bSI4KEdOJFw9bWlASD45VmtYSENSQnFCNEJjLzlBSVU0VCQsb2hWTTZxJ1YhR2MnYGEmSitUI0Yqay1PLVY+I3JCLDBRJ1Rea2NmcVk+Mz8xT0opUHU5IixPMkdAMWBgYmAxU2QpTU5bRzJwbnBjQltbVCFIZ0Qrc010W1IvTEs5VURLLy9iXjVQJUdHSDBkOmFwXjlYVi0vcHE8aDZda1dLX0BAb1QzWS0jJmZMYVdYLW9sYV1cR0hCTkguTDF1IVEqOkgjbyE3cG9YRV9QUjZcSUQvPFwoNUIsWnNsbyVLUXMoJmcmU25idHAxUShiOy9JS2JCR008JHFOOl5GNmZVZWg4PmJQJTpjUlUhX18iWjlNbitIQ3VkRE1xJHVQZlVdOCg7RUlPZCpLVzY7ak02OmlpK1BIY0o7Z11sViM+bCNUMmNFcjVQdS5kY2JdOWBpPV51Njo1Im4xWmc2UmY3LDgzYCFCTD9Sb09OLEJqUGIhMVojR1FyJ3NdZmk+N15GcilhQmFbUm1YXi9laC5vRG0saUQhNGpvbT1TaFQ0PFJLXFdeOzQvYTA5OWE7ZFRFSDFoSUJkLV5eJU1KdSJxXEVJbzxQUVp+PmVuZHN0cmVhbQplbmRvYmoKMTggMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTM1MQo+PgpzdHJlYW0KR2F0VTNhYGNFIiUsTGUyWV1PcXFMNkYlVW1GJlQ1bF1BUGhbKjIiSS43Wk4+PXEsSjdZOmxqLU5iLC1XKlFPOVAjUkQ1SlFRWE0maWVRKGE8c2NaWCsibEQpP2xdKFVRbTw9QmNnXU1YckxVOkY7Yy5NJUZbZDtSXz8jKSFeVzVJJy87OGRmcnVCMElFNiZMRGJjWEhScS4+Qi1CNzNBVUlZLWZEMFAvXlFETmk9JkA/YEhKN1lzXXAtcWYxMDUiQTFEKDMlSS1KdCI1XUspPzVZaSglVGlKYz9EXTFRMWI2OixQQTtnYEU8amxtSEZQUDkjUlg5c0hWUiFgS0snUFJJSStrNUxwJjBUNHQtKWw0SyVEKzVyPXI2Xl1XVFojcTtHX2hNNEpiOTpkZ3FYQioqOkQzM1dzXFchN0lkczxhUSJxND5cM1hWMmYjQT9bRTdCM09JKVdQPiVqSGYkaDxhYSFINTlPK1wwXz9ST0REKGZaa2xrKl89U0ZWNENcTFUnS2trTURSdC5pI1RQMW44KFFOZUswdUBadC5CXEddZ1BBRldXcWEoRiYrZTY1XWFnJkdcRz9mbTxXLiQ/Yj9ycnJLIUBpZlY6KFc0KlRLPyZPYFBxZUlIT05jRWNxSjI6ZFAzcmBOW2w5NmFoKUFrSk06Nlxfa24qPF9cNTBFNTIiRVJsLkJYXE1fJDZKLDQnNWQwW191PG1IaWI/LWVzIjtTbmdSI0dXJWBcaS1MYCM3S0EwK1Voa3JMOzZLK3QpSm5eYidPRUtWI2tcNUc9JkhySzN0YFVgRUhmKi8hZUplcGtDajs/ZzMzb0MzNk05VmJDWmVSWjwmNDc8Ti5WdDdQRmAqKE1EOjEwSGllW3E4TTMtIV85K2hKbSNvWSwtY0dCZm5HNCkmaU1yK1pTUCs1ODlhOm81WGxEcUVNNXVIPUwmYSEzdF8+VCpebmFAIzg3XHRjOClBUkg1XEItUG4zSlhAak5sPTMmcjMzclZPWT8naiVDWEkxYXFSOiFTW2cwP0MvbEonTSx0cSwtSi5Cb1loZFNgNW9zamRLYHVfdWw0aGMjM2NVKm5MIjM2XGVUSDIwVnMlJHMpalJdY0FbJmFdQnE+W1o9P0lWKDg6aThXXURQTlRvZmcoS0tTOFRKLTEiM3QqIXMzLVsqIlFNaj0/SEpnczFnJ0x1WF1jW2IpOmZlKV1MbTdsZSNMaWdlR1xtKDFpRWtZVD9lJGtpMSgnVm5TZStWPmw2ODcwRmtQTi4zdFJjQ3UlcDNEcCVxXSpxLE0jcFdjKi5PSGtYPWxQX2dEM3NcbVAxXCFDY1dUK3Ilc25nJWYxKWpEcF5MUmEkM0xdW1lcLEBJKzUsYElFMS9SZVg6JEs1KUl1ZydnN3JXVSsuS3JZVWFMJWVvY0tUVlxhdSUtZnNYKGAwNm8jTEY7SVxdc2IpaCRoUG5jMkNSQl1vIk9PWiZEQUBJcVIjayRqbShPNWJMMVg6LlFhO09gOiklR2k1PClDW0JdKmhaRD0kMG0hWGkxRic8cDU8aztlOSxIbCJgOnFUZS1EbDpLL2xyX2NqbTxycDksPEkiNmhJLSRdV3VTNEhaYiFmKEpzUUtDRjdELTtrMnBQYGlNKzZIZ15QY2Nub2drP2xXMTBcJiZGRWREVUtoOTtsNFBEZ1VsbiFzJmJZJWsnbyosM3AoJ29NMCZVKzQoPEYtJCgqRCdYInE3Rm4xZEhhcV1nY2JqLS90JiQyLkcxUlNgcEpjdSMsbVgvMkBhRyhhXEpfc0BvVEpmaGN+PmVuZHN0cmVhbQplbmRvYmoKMTkgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTU5Nwo+PgpzdHJlYW0KR2F1MENnTVolMCY6TzpTYlpnVVM7KzliWl01UGV0JDVEO0oyRE5SRl1bNSpaayNOOU84X1w3IV4tYk11L1IpKiNAJS45LywjWHJpM0c2VzIpIzNhSmdoMmNQZ3MrZC9jTzpZR2ZgRzo+S2VXQjs1MFg5ciMtP1ohcV8yVyoxSGs/R2okN3RaSiNERGFUUmBOUXJeOHIqSjpnMTUoam5FdVZOcTxGVCxnODwwWnRtYiM4Wic1U0QuR2hXUTBEP3J0MTZQKTVfQWZhY1FNTU0zO1ghYjxmUlJsb1dGP1oiXFcta0ZcT2M6Wj9QNGs6dFg1LT9FN2lAXypEIyspWDhrcVhXNnRta100TDRHRilELzJPcWEwVnVXTGduVS9hKC5PL2ltUFpnbkJzZm1iTGZeUl9qJWpJbT81MnVSJD1MOmVPRFAxUyxOIStvXTVQKjFpVCQiXz9GcEsnJyI5b1Q+TDZBUlxrNVZkVWMjQCkha2Y0TCMiPDUrVCtXQ1xgR29hS0VrKnIlL3RiRD9NKikzWyNrRW4oMz08R3NGTi1ZNDNMQ1A1ZlYwIU9DYkcyMkNDRCNiT0VzQE1RRSZeUy46ZnMtJHIjcEI9QV9XPSMxZlYlPlxPIjJRMCNtSzc/RzwyJl0naXFqKUZvN0siTTMlKTkiTTEraFNGY1A+UmdmZlw5dEtXQl9qRzJGJF5hUGc5QUFVUFxHbHJvKF0xR1NiVzpeW110OkQmQT8vOltHNGlBZj9GJWxzOEwzSUQidTowOklQSVVXM0g1b2JyLUIjQzwhSy0tUC5rVVhsODI/KlBoOS4mcnNRPmguaGE6LURpYjImM10jT2NqPUFVUUxDW2ZWZWpjVU10P046WU9JUmptdXRSUkw+ODk7NU0sMEJhaU5tQTFmZjY6Sk1uWGk9bVIsSSluVGEtLjFtbkpQJmZNVzEqMmJcYydsRTI3K0VzcUo3KGZxPHRjWEU7R0E/aFsqXDpAUVJwaUs+MEUwU3U9PCtcTVVOKClGVFRTZyhZU0lgQ0RONVxuWycwRTNbM3NhPVk3TlU9XWFaVmZgP2pqLHIwMDxvb1k+Z1k/S2tkU3NELzheL1w1SFdhL0hwYSMjWFBAaV4lb2NXYW9gTF08Z1ZyI2IoPz0kZSdEM0NSQy0hZlFJJ2R1cjZsaGZYI0M7UDI6aDRNPkttVGshT2dKREFQLTRVcFg2VW1sY0EtS3AkPiJLPllfR1hNJ1BPOSxlajAzWjZgQ18oQE9PYzBUTy0/cmloSUEnJVZiYkwxWiQmdUxeLChmR04kdDlEQSwmak5BJkQ6bkhCYDxORTVJXzAwUWM/JU4pTlo2aElHY1k3MkokTlNuJjslZCdnWi1RLkFXOF8vPXIxOmxXa1dva0xbQTZLJD1OXDBncG5CcWxuVk1hWF5EUkA8VSExXlY3Rk9uKTNWV1JPQk9BNDdOMFB1MSFCRk9pSUAqRSNXakFxOildW2JSJnM4T0BTamckKWdWSzUmWz0vXjdbKHIiQyxHLU4kIzVzN19ERCw8PEY/WTp0Kj1lODtvNTAwPU0vYCtSa15dZSwyPWdjQGRjP044QkkmTV9bYmU7TDNfZlQuJmE8SlIuKi4/VGpUYEo0QEUlbyZmRFldLmlxcmdkPCE4TTtCakdIXUNYa0hhc0RyQU0zQV9pZF0sL0prMnNsXkljX04hIyxiKGg9MVE0b1EqJzE4bmo3Z2BrND06ZDoxaU5bZCUwOmpZbm1AJDEzU04oVzFNXjBaaz0pLFpULT81SkUkNkZAaUNnalI8amZyVjAvcDkyZUNaMGdVWC05KzVaYnB0OTVXRTNCOmwsYDw2ZGVKKFheUkhJP1lUPi0pQk9RPzBeTURMI0skVmM7T0BAXWFhUGdDYWQ3PUZAY1hiYixrRSlRTExsMCYxK0FHbjhOYW5WTSg7JGNpV1o0ck80J2N0YEdKTC86WnBPJjBCaCFSMSMmMVtGVytNNkBEM0doQmNIMmtOamtWNT1TQDZSMDVtUSQrN2tsIlhUXWdDYF5TL0pjcTs/K2ZLUGMzUS0lMG5faWshVUtXVjElY21iYHRMZDZMYGknW2kuaDNKdEhZLGkrN25kSCNdPFt0X2A2blRKPGd+PmVuZHN0cmVhbQplbmRvYmoKMjAgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTIyMgo+PgpzdHJlYW0KR2F1YFJnTVliKiY6TzpTYmZeJyooS08pbEBPcFhwJkEqKDtAWnRcPSFXMWptPWYtI0RdJUBZRzIjSHFkUCouJT9FZ2o/YCRLJE5xS1FIO0ZiUiNeMEhyOWhfViNcc0VjSzVmaEstMUJgPTpQSzZecTQhWSs0Kid0LDs+dUUpLk5lIyMrMEsvKmdjPSIpMnFobkZwUzg/Niw/dGFcN3FjU1JmVnFRJWphQEU7Q29rPUhFJXJwV24+XC0uJ1tUVUtoNTVpVSNeITYub010KCwxIisvRFlfIVoiaWwtRT9VPS9mSyVDQGVOQHJfdGtZN1FPVU8lJlU0L09pWDhrYy5vb1NhU0EnSCp1ViJjSERJLig8V0pea3RNT0o/Q0BqW0szciMmRWNLPjV0cCYnOEFrUUdFQVAtPyh1XlVxck4lQGlIUT87JVRdcSJcV14uVDxEUUFILkY+ZUlCbWNyaGcmLmIoY0gjT0xJJ2tyck1aa0NKYSFNJj5gZ19EI3MjQStSb1BBaE40RVd1V0ErZyJFK0dgYD80LXNBSk5pV0JKSSQ6NiNJJ1BoNVsrT05iNUhoZylvaiNmcChdQ1Bra1xCTTkrJD8vKCVPVTY2a1IiYkxTbnFmUlMlVHBHNGwuRW8yMGxuQEJvcDJTQzpxIW1fYU8vXyQ/UVhFPjJLdFVwQC5kQCdwX1psSm5BTTkrPTtmRUFQaCMmO2pQZUBPSDMhXkppJ1BKZ2FYNEknZmJlK29fYnBEZShaQyotQ0VuQGA/Nzw/aEwhYU5IRG1jY1ByLihEOE8oVjtgT201XjIraSwmPzFlODkoOCEtaTA9WmxQbVMmWyhsajBAXWc9XVROLzlta2g5RU08Xm5pbT5pdUBWTChAaUk+JzxFLSYvbT4jSUtua0QudGBgUiVZOyZyK0pBLV5qMFgxNDhhN2ZlJiFAaExcajViPychMz8wXC9uJ0hZZig7RilwTl8xaSsocV90KT1EVj8qJldMWGhsVUE0JSJJLEp1cSwvSC1XSCt0IlAoV2VmTyRZTkM0OmpbWmpjU0puOSZNLzU/ZTs/OWpUXz90cGU5ViE1U3NWZlY2O2BdJmVgIiNKJ0U6WEIpXU5fLWpDNUhcMFs2cihJJy9yIUZwbDFZck4qOU0mdE0vLU1kOVhzLHVkalJnRCtzKkNZMD5rQi5ddE06Zl9makJTLHVfWUpOXUdwVS9VaSVJMDNKckJjITQ1JVtVZ1ZMcjc+QSVtcUQ+aGRvLVtOSCRoQVJvcD8vR1pRNy9WYiY+NnRtOmMiS2xsUjZccmlJUDBgVWYwUk02Rzs0RVtocylQYW9vcmxRcWwtajE3Ul89MV1jO2VaQTo8NzkoUixwIz1jaDw0T25QRHR0NS9qcHEycUFddG4wJFFubWsscEM+OVo0KWgzLUMnLShGS2g8VkYhcj0nLV0uXkhYSkhqbU0laEQpJzg8TzMsNmRsRCsmN15XMURUTE1GYlQyUmdNUDsjTFpCOGZjbyNrUkxoPyxzT1dsIiQlOSFGIUpmUmxNOSVmLEMyaVk6dS8pSWhQdVc3JFNLMEYtc0NCNywxNiZzOytibjQ+WFZmMTxpMShMTVchJClRRVBULmg/XGFQbT84K0J+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTg0Nwo+PgpzdHJlYW0KR2IhI11oYyY4aCY6VnI0WiZjN0ojWVVJcFgjJ0toWyJOSCVgdD8yMyU1MC5iXy84TzRTWVlvV3FjY1lrJkk1RyU1XT5jdC1tIWRlbUMwLkhtYE9XJmkwVzJKKyopblwwcThZNER1bnVoaTAkWUs/YyhLQG45cikmOEpPTTdOQS1Acl5dXj1Ta1QmUkU1bG8jZ3EyIy5SVG4iblBnVk0taD0/Lj5ZcVJmXClAJTx1USFGLUxiNjVYOShSZGdCMzVAbytEL0AuYyJSRFVIT148WGs4Iz9GTC0oSUI5K1I/YHRgcSR0RE9ASm50WV1XbyUrQlc9Sk8xc0w1S102KWNTZllBQT9bPyRxWEdbL0pVTXMlMS9fNmQpQmZtTE0/WTArajlLYls1QGwiJT5KS15hOVtbJFdJYzxYSVszSXJKLlVdXEZYVEhGXiUtUVlzLmtOTl1qJ2xbMVM2QWszI29iOD5IOzNGLTpoV0Y+ZmVjIjlhJVw4Jy1LJ0sjWTI4ZlMkLCNfJW4kQDNEK2tgNkNEJiYjZWRgSUUubSs2V3M6XjwyJFRgUmpbdEUpPFI0NDllPksxUEYrZUVgX1Y9ZDgnLW5KcDIvVlVuLzpVZlFSaGlIT2BiS3I9PzJVdDxcKGBJaitNQ2pwRD84SytxLD0/OyhfOlNSX2lqIlQvaWFjMSsxYHUzTjt0RTtOL2V0YGE8YiU1UHFdIlRxbXJWJy5ENHI1XzZxLk9TYzpCQT4tMGI0aFoxRjBZNHQ+IV5IcShER1JAQSdKRjVSIl41W2pjcmVJWV9IUDdFIzJcNkBkU1A4MGdIQHBXK0VZSSUndCUpQFkpW2lAOGE7LExEXWkySTZVKD4xNU4xMiJQXDBRaC1JLWdYJyFzbWJdXXBWOVdfP3IiUiVbO2FhP0Nyclwyc2lgK1c4OWgibltKZnJlPT1QTjFncXQlJkdYNzFhNF0rMUdnPCgna1FVdW8obVwpJE9pazYpKyxqcyhlUzRNVyRJTmsncCJNS0NUaVJiOHNOZ1xAPjZxISthWktwWyMyTz5kYVcnYjtsVTdRJDhfI3RiUUpmR1Q3bEdtJWRROSxzIlMiO2JfZzY0UFlVMk0+Y2BpND5jJ2E2XE5gZ0FCXixvJFNsal1zOVhqXiNyZEs6S01uQGd0XCkhTyFSVVw5X2ZPYGk/Y2whLUpBL3M8b0gxUz1TUShfWnFfcWxIdEsjdEtHWmJnamtcKjwyJGpQYT4rJWFgaElNUFNZVkQuSVc8Zj51cyheUUkmVyssZXNSMS4+OXErZV8nYDZaa2pbMi9FcVZAQ2EwaDZZNGpTOmI5XD0+IWIoYWJHVlZPME4hRUomUyRDVyFUU2g7LG4jblJxJ2BGIlc2YT1aaDdBJ1AsX2dbcTlRMWI4PT5sPlZYa1ZQUXM1c2hxXzZtYFwoZG8ndCI4cm88UiVXR3A+XS47RkUzYnMvM1hsVms1dSwkNE8zWiVqXldMNmxYXDk0OUVJKWhLcTw/bmJvL0dsTV1SLDA8OkNbbnRJKnNYUURnJlk4VldlP0RmXSFOZF9lZmpLTSNUaCknL1gjN2NOZFM2TkZ0MkJiWlZmVF5ZYlFmNnIvc2wwci5ITjxQQHA4ZkU4MiEuJVFUPlomLWBVa3MpNCw0ZlElQEYwISJPKTZEVW49K1g0MHFqQnBOZSdEIWdTcGovLUowZ2U5N1ltRVhyVl1GZS1JXVhmOiMqQSFhZDtoc2JJSy5pJkcoJG4/cz06ImdhaGMjaVM5I0pRXVIiRUBtSVRVVlVQQkxDIyReciVXaT1TP3M3UmwvLFU+ciJSMTUlL0dgRzRhZTo1Wio0X2VcXkJFQUFAQG5FLm8pXk1KWG1hWnBNXiVnQTgnVmU/W1YvKkhZPTZOSTlYN2owWktAcW8zQilpPkQ1SiUqOEsuI1gvckVZNEFySDZaKlZIXjgxVEJGJUJjZS4mT2BpKnA+PmE4K01GdE9NODRbdG9IJjUwMFgpJ1EzRltxckdAZi1pVyIwLVkxOmEjJDJmME1uQDFCby1UbjFOIUY2b2NoO2lkRU47Ji5Oc2wzIilNNkI7KnNsQDVVai8+VCp1I2QybHBXKDA3LkwmKUpvSC5vQz9xVGE1JTVAdEhQRShLMWB0NEFYLSpCQWxALCYrTlxYOCQmLGVITnUoOyphYWgtWiIwSWFfXGRJST9IVFAmInVecC1sNzJbZkdOJDAxJDJVXjdTUWkiOUwuNiRKaFIxREtgcCgvXWRrQTc3T05cTmEmUD4vRU0pVldkUlgrPSMsV2trLi1Jaj11bVtMQ1sxVF09bExIMm1kYFEqOigtSSZLKm4rYDhbbFZXJU9VVUdzcUwlXzRqYSZRKD5tXHJXQyhmdU4/QzY6MiwtYyRxbldDQiFNPEpCOyhXXTRlbl1CUyNGUW1EaC5KXSUxZ29RXUNxPydmaTMicFkpL203JytYfj5lbmRzdHJlYW0KZW5kb2JqCjIyIDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDIzNwo+PgpzdHJlYW0KR2FyJyM5YiliLyY7QmtLaVtyXEtVXV86PCY3KWgka2xoPkU9OUJSW2JKTiFxJj5QKU1BOkVFYFA3XkA8YDlRKGhXJERpaCFLZl1sJjZZTWg/Pyk6WTFEMWRAVCY+aGNAZF8zTFI+PFc9SXJwK1crUnMjIUFSKWRiTUc0b04wb0hEXDhWTi86KVw1Qyk0REdoTkd0Lz86Tyg8Wlg5ZV4qNGMjK2AvNGllKmQxZmdsUS5uXW48OkpVZHVQSWYmSFZBVzRcVytJaDZAc2NfJDFnNzI5KCVFKDEhUC0sSUdGYkE8WXAiRHEhPXFdQH4+ZW5kc3RyZWFtCmVuZG9iagp4cmVmCjAgMjMKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDczIDAwMDAwIG4gCjAwMDAwMDAxNTYgMDAwMDAgbiAKMDAwMDAwMDI2MyAwMDAwMCBuIAowMDAwMDAwMzc1IDAwMDAwIG4gCjAwMDAwMDA1NzAgMDAwMDAgbiAKMDAwMDAwMDY4NSAwMDAwMCBuIAowMDAwMDAwODgwIDAwMDAwIG4gCjAwMDAwMDEwNzUgMDAwMDAgbiAKMDAwMDAwMTE4MCAwMDAwMCBuIAowMDAwMDAxMzc1IDAwMDAwIG4gCjAwMDAwMDE0NTkgMDAwMDAgbiAKMDAwMDAwMTUzNyAwMDAwMCBuIAowMDAwMDAxNzMzIDAwMDAwIG4gCjAwMDAwMDE5MjkgMDAwMDAgbiAKMDAwMDAwMTk5OSAwMDAwMCBuIAowMDAwMDAyMjgzIDAwMDAwIG4gCjAwMDAwMDIzNzUgMDAwMDAgbiAKMDAwMDAwMzI4OCAwMDAwMCBuIAowMDAwMDA0NzMxIDAwMDAwIG4gCjAwMDAwMDY0MjAgMDAwMDAgbiAKMDAwMDAwNzczNCAwMDAwMCBuIAowMDAwMDA5NjczIDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDZkNWQ3Mzk3NmY4ZjRiNmQ4YjFhZWM0MTQzNTljNDdhPjw2ZDVkNzM5NzZmOGY0YjZkOGIxYWVjNDE0MzU5YzQ3YT5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNSAwIFIKL1Jvb3QgMTQgMCBSCi9TaXplIDIzCj4+CnN0YXJ0eHJlZgoxMDAwMQolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this BC Building Code document and extract the TOP 3 MOST IMPORTANT building rules only.\n\nFor each rule, extract:\n- Rule title and description (be concise)\n- Building types it applies to\n- Conditions when the rule applies\n- Requirements that must be met\n- Dimensional limits (height, area, etc.)\n\nReturn a JSON object with this structure:\n{\n  "rules": [\n    {\n      "title": "Rule title",\n      "description": "Concise description",\n      "category": "dimensional",\n      "building_types": ["residential"],\n      "conditions": [\n        {\n          "field": "building.storeys",\n          "operator": "eq",\n          "value": 1,\n          "description": "Building must be single-storey"\n        }\n      ],\n      "requirements": [\n        {\n          "field": "building.height.value",\n          "operator": "lte",\n          "value": 4.5,\n          "unit": "meters",\n          "description": "Maximum building height",\n          "error_message": "Height exceeds maximum"\n        }\n      ],\n      "tags": ["residential", "height"]\n    }\n  ]\n}\n\nIMPORTANT: Return ONLY the 3 most important rules. Be concise. Ensure valid JSON.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 15:39:57,594 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 15:39:57,598 - httpcore.connection - DEBUG - close.started
2026-02-06 15:39:57,615 - httpcore.connection - DEBUG - close.complete
2026-02-06 15:39:57,616 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 15:39:57,635 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000012E9DFFB560>
2026-02-06 15:39:57,637 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000012E9DED9A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 15:39:57,685 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000012E9DFFB470>
2026-02-06 15:39:57,686 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 15:39:57,688 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 15:39:57,688 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 15:39:57,689 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 15:39:57,690 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 15:40:12,329 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 23:40:13 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T23:40:21Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T23:40:19Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T23:39:59Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T23:40:19Z'), (b'request-id', b'req_011CXshTTpyM5VXRRRXRFxzE'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'14545'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9e7d6ac99bf4ab-YVR')])
2026-02-06 15:40:12,332 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 15:40:12,335 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 15:40:12,336 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 15:40:12,337 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 15:40:12,338 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 15:40:12,338 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 23:40:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T23:40:21Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T23:40:19Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T23:39:59Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T23:40:19Z', 'request-id': 'req_011CXshTTpyM5VXRRRXRFxzE', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '14545', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9e7d6ac99bf4ab-YVR'})
2026-02-06 15:40:12,339 - anthropic._base_client - DEBUG - request_id: req_011CXshTTpyM5VXRRRXRFxzE
2026-02-06 15:40:12,351 - __main__ - INFO - Claude API call successful
2026-02-06 15:40:12,351 - __main__ - DEBUG - Response usage - Input tokens: 11365, Output tokens: 1314
2026-02-06 15:40:12,351 - __main__ - DEBUG - Claude response length: 4750 characters
2026-02-06 15:40:12,351 - __main__ - DEBUG - Claude response preview: ```json
{
  "rules": [
    {
      "title": "BC-DEMO-001  Single-Storey Residential Building",
      "description": "Sets maximum height and floor area limits for single-storey residential buildings,...
2026-02-06 15:40:12,352 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 15:40:12,352 - __main__ - DEBUG - Extracted JSON string length: 4738 characters
2026-02-06 15:40:12,353 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 15:40:12,353 - __main__ - INFO - Extracted 3 rules from PDF
2026-02-06 15:40:12,357 - __main__ - DEBUG - Processing rule 1: BC-DEMO-001  Single-Storey Residential Building
2026-02-06 15:40:12,357 - __main__ - DEBUG - Generated rule_id: RULE-000001
2026-02-06 15:40:12,358 - __main__ - DEBUG - Processing rule 2: BC-DEMO-004  Two-Storey Residential Building
2026-02-06 15:40:12,358 - __main__ - DEBUG - Generated rule_id: RULE-000002
2026-02-06 15:40:12,358 - __main__ - DEBUG - Processing rule 3: BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 15:40:12,358 - __main__ - DEBUG - Generated rule_id: RULE-000003
2026-02-06 15:40:12,358 - __main__ - INFO - Successfully extracted and enriched 3 rules
2026-02-06 15:40:12,364 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 15:40:12] "POST /extract-rules HTTP/1.1" 200 -
2026-02-06 15:41:46,156 - __main__ - INFO - === Save Rules Request Received ===
2026-02-06 15:41:46,160 - __main__ - DEBUG - Request data keys: ['rules', 'mode', 'updated_by']
2026-02-06 15:41:46,161 - __main__ - INFO - Save mode: append, Updated by: admin
2026-02-06 15:41:46,161 - __main__ - INFO - Number of rules to save: 3
2026-02-06 15:41:46,172 - __main__ - DEBUG - Rules file path: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 15:41:46,173 - __main__ - INFO - Loading existing rules file
2026-02-06 15:41:46,178 - __main__ - DEBUG - Existing rules count: 3
2026-02-06 15:41:46,178 - __main__ - INFO - Appending/updating rules
2026-02-06 15:41:46,179 - __main__ - DEBUG - Existing rule IDs: {'RULE-000003', 'RULE-000002', 'RULE-000001'}
2026-02-06 15:41:46,179 - __main__ - DEBUG - Updating existing rule: RULE-000001
2026-02-06 15:41:46,180 - __main__ - DEBUG - Updating existing rule: RULE-000002
2026-02-06 15:41:46,180 - __main__ - DEBUG - Updating existing rule: RULE-000003
2026-02-06 15:41:46,181 - __main__ - INFO - Updated metadata - Total: 3, Active: 3
2026-02-06 15:41:46,181 - __main__ - DEBUG - Source documents: ['DOC-20260206-001', 'DOC-20260206-002', 'DOC-20260206-003']
2026-02-06 15:41:46,181 - __main__ - INFO - Writing rules to file: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 15:41:46,190 - __main__ - INFO - Rules saved successfully
2026-02-06 15:41:46,194 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 15:41:46] "POST /save-rules HTTP/1.1" 200 -
2026-02-06 15:41:47,505 - __main__ - INFO - === Save Rules Request Received ===
2026-02-06 15:41:47,506 - __main__ - DEBUG - Request data keys: ['rules', 'mode', 'updated_by']
2026-02-06 15:41:47,507 - __main__ - INFO - Save mode: append, Updated by: admin
2026-02-06 15:41:47,508 - __main__ - INFO - Number of rules to save: 3
2026-02-06 15:41:47,508 - __main__ - DEBUG - Rules file path: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 15:41:47,508 - __main__ - INFO - Loading existing rules file
2026-02-06 15:41:47,510 - __main__ - DEBUG - Existing rules count: 3
2026-02-06 15:41:47,511 - __main__ - INFO - Appending/updating rules
2026-02-06 15:41:47,511 - __main__ - DEBUG - Existing rule IDs: {'RULE-000003', 'RULE-000002', 'RULE-000001'}
2026-02-06 15:41:47,512 - __main__ - DEBUG - Updating existing rule: RULE-000001
2026-02-06 15:41:47,513 - __main__ - DEBUG - Updating existing rule: RULE-000002
2026-02-06 15:41:47,513 - __main__ - DEBUG - Updating existing rule: RULE-000003
2026-02-06 15:41:47,513 - __main__ - INFO - Updated metadata - Total: 3, Active: 3
2026-02-06 15:41:47,514 - __main__ - DEBUG - Source documents: ['DOC-20260206-001', 'DOC-20260206-002', 'DOC-20260206-003']
2026-02-06 15:41:47,514 - __main__ - INFO - Writing rules to file: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 15:41:47,517 - __main__ - INFO - Rules saved successfully
2026-02-06 15:41:47,523 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 15:41:47] "POST /save-rules HTTP/1.1" 200 -
2026-02-06 15:41:48,258 - __main__ - INFO - === Save Rules Request Received ===
2026-02-06 15:41:48,264 - __main__ - DEBUG - Request data keys: ['rules', 'mode', 'updated_by']
2026-02-06 15:41:48,265 - __main__ - INFO - Save mode: append, Updated by: admin
2026-02-06 15:41:48,266 - __main__ - INFO - Number of rules to save: 3
2026-02-06 15:41:48,269 - __main__ - DEBUG - Rules file path: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 15:41:48,270 - __main__ - INFO - Loading existing rules file
2026-02-06 15:41:48,272 - __main__ - DEBUG - Existing rules count: 3
2026-02-06 15:41:48,272 - __main__ - INFO - Appending/updating rules
2026-02-06 15:41:48,274 - __main__ - DEBUG - Existing rule IDs: {'RULE-000003', 'RULE-000002', 'RULE-000001'}
2026-02-06 15:41:48,274 - __main__ - DEBUG - Updating existing rule: RULE-000001
2026-02-06 15:41:48,274 - __main__ - DEBUG - Updating existing rule: RULE-000002
2026-02-06 15:41:48,275 - __main__ - DEBUG - Updating existing rule: RULE-000003
2026-02-06 15:41:48,275 - __main__ - INFO - Updated metadata - Total: 3, Active: 3
2026-02-06 15:41:48,275 - __main__ - DEBUG - Source documents: ['DOC-20260206-001', 'DOC-20260206-002', 'DOC-20260206-003']
2026-02-06 15:41:48,276 - __main__ - INFO - Writing rules to file: C:\Projects\cov-demo\New folder\project\python-service\..\..\demo-rules.json
2026-02-06 15:41:48,279 - __main__ - INFO - Rules saved successfully
2026-02-06 15:41:48,281 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 15:41:48] "POST /save-rules HTTP/1.1" 200 -
2026-02-06 15:44:15,806 - __main__ - INFO - === Extract Permit Request Received ===
2026-02-06 15:44:15,810 - __main__ - DEBUG - Request data keys: ['pdf_base64']
2026-02-06 15:44:15,811 - __main__ - DEBUG - PDF base64 length: 14684
2026-02-06 15:44:15,811 - __main__ - INFO - Starting permit extraction with Claude...
2026-02-06 15:44:15,813 - __main__ - INFO - Starting PDF extraction - Type: permit
2026-02-06 15:44:15,813 - __main__ - DEBUG - PDF base64 length: 14684 characters
2026-02-06 15:44:15,814 - __main__ - INFO - Calling Claude API...
2026-02-06 15:44:15,815 - __main__ - DEBUG - Model: claude-opus-4-6, Max tokens: 8000
2026-02-06 15:44:15,849 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': 600, 'files': None, 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': [{'type': 'document', 'source': {'type': 'base64', 'media_type': 'application/pdf', 'data': 'JVBERi0xLjQKJZOMi54gUmVwb3J0TGFiIEdlbmVyYXRlZCBQREYgZG9jdW1lbnQgaHR0cDovL3d3dy5yZXBvcnRsYWIuY29tCjEgMCBvYmoKPDwKL0YxIDIgMCBSIC9GMiAzIDAgUiAvRjMgNSAwIFIgL0Y0IDYgMCBSIC9GNSAxMSAwIFIKPj4KZW5kb2JqCjIgMCBvYmoKPDwKL0Jhc2VGb250IC9IZWx2ZXRpY2EgL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcgL05hbWUgL0YxIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKMyAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GMiAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL0NvbnRlbnRzIDE2IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjUgMCBvYmoKPDwKL0Jhc2VGb250IC9aYXBmRGluZ2JhdHMgL05hbWUgL0YzIC9TdWJ0eXBlIC9UeXBlMSAvVHlwZSAvRm9udAo+PgplbmRvYmoKNiAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1PYmxpcXVlIC9FbmNvZGluZyAvV2luQW5zaUVuY29kaW5nIC9OYW1lIC9GNCAvU3VidHlwZSAvVHlwZTEgL1R5cGUgL0ZvbnQKPj4KZW5kb2JqCjcgMCBvYmoKPDwKL0NvbnRlbnRzIDE3IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0NvbnRlbnRzIDE4IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjkgMCBvYmoKPDwKL0NvbnRlbnRzIDE5IDAgUiAvTWVkaWFCb3ggWyAwIDAgNjEyIDc5MiBdIC9QYXJlbnQgMTUgMCBSIC9SZXNvdXJjZXMgPDwKL0ZvbnQgMSAwIFIgL1Byb2NTZXQgWyAvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJIF0KPj4gL1JvdGF0ZSAwIC9UcmFucyA8PAoKPj4gCiAgL1R5cGUgL1BhZ2UKPj4KZW5kb2JqCjEwIDAgb2JqCjw8Ci9Db250ZW50cyAyMCAwIFIgL01lZGlhQm94IFsgMCAwIDYxMiA3OTIgXSAvUGFyZW50IDE1IDAgUiAvUmVzb3VyY2VzIDw8Ci9Gb250IDEgMCBSIC9Qcm9jU2V0IFsgL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSSBdCj4+IC9Sb3RhdGUgMCAvVHJhbnMgPDwKCj4+IAogIC9UeXBlIC9QYWdlCj4+CmVuZG9iagoxMSAwIG9iago8PAovQmFzZUZvbnQgL0hlbHZldGljYS1Cb2xkT2JsaXF1ZSAvRW5jb2RpbmcgL1dpbkFuc2lFbmNvZGluZyAvTmFtZSAvRjUgL1N1YnR5cGUgL1R5cGUxIC9UeXBlIC9Gb250Cj4+CmVuZG9iagoxMiAwIG9iago8PAovQ29udGVudHMgMjEgMCBSIC9NZWRpYUJveCBbIDAgMCA2MTIgNzkyIF0gL1BhcmVudCAxNSAwIFIgL1Jlc291cmNlcyA8PAovRm9udCAxIDAgUiAvUHJvY1NldCBbIC9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUkgXQo+PiAvUm90YXRlIDAgL1RyYW5zIDw8Cgo+PiAKICAvVHlwZSAvUGFnZQo+PgplbmRvYmoKMTMgMCBvYmoKPDwKL1BhZ2VNb2RlIC9Vc2VOb25lIC9QYWdlcyAxNSAwIFIgL1R5cGUgL0NhdGFsb2cKPj4KZW5kb2JqCjE0IDAgb2JqCjw8Ci9BdXRob3IgKFwoYW5vbnltb3VzXCkpIC9DcmVhdGlvbkRhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvQ3JlYXRvciAoXCh1bnNwZWNpZmllZFwpKSAvS2V5d29yZHMgKCkgL01vZERhdGUgKEQ6MjAyNjAyMDUwMjE4MDUrMDAnMDAnKSAvUHJvZHVjZXIgKFJlcG9ydExhYiBQREYgTGlicmFyeSAtIHd3dy5yZXBvcnRsYWIuY29tKSAKICAvU3ViamVjdCAoXCh1bnNwZWNpZmllZFwpKSAvVGl0bGUgKFwoYW5vbnltb3VzXCkpIC9UcmFwcGVkIC9GYWxzZQo+PgplbmRvYmoKMTUgMCBvYmoKPDwKL0NvdW50IDYgL0tpZHMgWyA0IDAgUiA3IDAgUiA4IDAgUiA5IDAgUiAxMCAwIFIgMTIgMCBSIF0gL1R5cGUgL1BhZ2VzCj4+CmVuZG9iagoxNiAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxMjIwCj4+CnN0cmVhbQpHYXUxLTswMUdOJkJFXSgnYDFFXmZUZyIjaS1UM2hqPGRxcEMjSUYtJVBOXGtXKT9oSFo6VGRoSWstLVgiUUVhOUVzI3AyL2FgT1xwInUjXyZIJ29HKVBtSDQpMTkpbzVULmNdNWU1J0gyTS51NGxgITxzLDZKIVFDJ1djVCFcT1FwQSFTXjo4R0JQNFM9Wkd1IylsYlJOKi5yJmYrISolRnIhSFc1Q2lgOi0qYmxrUXEzRkAhXFJRVDZxKmhIUkQrNCksS3I/JUYiZGJAXj5lO10saj1zMSs+KyQuJTBMa1BxXTZTRD1HInA1TixmPzZiQkBQdE9mZj1CTF1kOEI6bzUrWGRFLSFMWiVrRTBGciQsRD48RSpDcSMlPUReQCh1OmwjS2w1NEw+OypSKGV0MCcoRCQnKWRRIk8qb1olM1NDMCNaKE51NG02UTtSUjZTU3I5MGEsPzQsQFUtJGMsLytlVF8oKkpBM0ohQC9uWD4jWydVPzIqaj0jdEMmWSZfYEA3VCY/V2oxSSg0Qk1XbHFcVGo9UHNgV0gyI0Q0RFpMJmtCbDFHMTg2KTZjXjdjcmNGMVJwVUNcX0FoX0pJJFJKQWw9N2tdS09OW3FpKWlbMVw8RzJVMUswYFdnKVpaM0IkYVc1c28xYzA8Ki9qZGc2aHJ1bGVwSFhsalFLMXRIXj1cJTQlQDRacGpSQidIVDZBYWQ9cl9vZUckQktzIjVkO2ppIU4yY0ltQENBNUk8QmQ3Rl07L1hfM2pXRWotYTdNYjdJPWovTSQpUUYuXXU/XDw2MFAqOGMzbl9TQFs7QzBGQV1ZTVRMYF07KjJYXTUoP1NDKkw2Pk8iY2dFMTxFU0ZebDtaMi05Xlg5a0xwL1JdXSkkRGBpVjEnRzM3NCNZcywybDcrbCw4OSc/X0M3Q2xeX0VeQGxHRD41SUwhYHIrU0ZVKy9qQGNdOW5AXmQsLTFrYTgxTF5NbnNvMVllOWdrZllJVEBeJXIqTE8/PEg8Q1g3b2JwK2laPFonblQ9VVhlWFlLdGxQPERPNl1HNFUkVjVabGgpQm1sQ1EuV2U8MTYuQDxvMj85b09EWHFtayZENU1sWF84XFFraTA2VTllYj0qUGRbK15AciloPERaPzFSakk+aVZVJnBmaElccz4/XCVWQiVcWiRsbGFgRXNZPlMnQFdGcGtTRS47JjpJIVMqOzdUUiInSSEtYDNiS3JxYFFzKSJBLEFhTWtVYHVmMDFZTHQmU0FDT0hESk0oTlw7cy5BM1leLixmNkozR3Mnc3FwWHFgY08pVmRPVUFaSzVyQlY6WXNlXCVzSTtUXShaJGQ+S3BuakxLLWkxRi1tUTlFK2AyVihETzc9cmM5TyxSODUwRGVVSWknLGAubyYiPWlTQHU1RTp1UkZoSiQ6KEI2R3JjSGA1XmNmRWQhcUptcS1mOjdPVz8pUkleZWg7ODVcMzBeOzpVYE1xSV5BKHNmWWpNSVgxWi5vRkRDbzI3aFloLkBsPVVNPjVgVjMmOSw8VzpHOm9CQVdWdF5tI2hxJyZQYWxgKEhuSShSLiFabkcmNi91IjkxJlFJJmYnYyY8SCI2IiVTOzRmdENvXE9acnJCXUApOGx+PmVuZHN0cmVhbQplbmRvYmoKMTcgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTQzOQo+PgpzdHJlYW0KR2F0bTs+QmYnYiY6V2VEYlktOCpIUFdgK25MXFtLPjslQG4tR2NWSTZYR0VYaTcsMmtDcjU+bEdAVlpJVW1QXUlfdVtlaTdjM3JTRjtaSmRwc0E6aGMyYy02cGk4ZlMxNUhdMiJWRDtPX2R0Wk4pVVpSUkYyNF4pKS9UaXAjM14uLjFObVwsM0Q8XVRtbENrOiIvQjZiXSdIbnBqVHJvKS9ZaVZLTDJbUiJCQWpdNj90MnNpZicnTG9lL1piVj9CZiU4UVxqI0g2QnM7dE1cQ21mK281X1BoLFZBZVIhRjddUkkvcj1NYUshRCdxL1hbU0VfaCUoYUliME1HJmIzZic5VVxdcGFQcUNDRS46XTIuSTwwYjotUV4uZCdmPiYnZz1pKkkvPz5pZk5AO24xSlsxclw9SDFkLys1Xm1gMUJeKWJba0d0W2BxJ3NVP11RSFNNaSY9aDhxK0lKZi9MJGtXR2lWNkFrTHBmIm87bHBpWStpaCxBQz83bWRoIjZpVylzKzp1YXFgIidQam8qJWZFQi5AXmV1KV08IThxXEpzRlVxSERXLEJQVW5hX21CZWhnUy5cPjJyMllXRUtPOmQtJydoWVxsT3FZLGZ0cDpUakNdbEI3T2FfKFxePEdnbkc/OCg5VlNyby5lPlk1TzdmaDdhQ1NlJT9HXW04R1heT19EdDpIP2U8UURJODtdUDtAZ2NwS1dMdWZEQ25nT0NkYEF1IWVSQEBBUSojKkFePUBObj1XISFJaXI1SWkpOF9QSDNIQEtSPCo9TmFwRGB1PzA5TFM8UzhGRjJEV2c0YT4kQGFYYFVJJTszRlp1cEdEUFgwYy1fKyQzWUcsSiElKENsOXRnPVRUdTxrYUI1W1RMM0hPSlopdGleXm0oOyNNZW1NKCkna2MqZi9ObU1gMFNgaEdqLUZxTkcwYzlYN1gsSmZtUTlOW2FFNDBlYSJaSGE/TmI2Y0ZLUj9oZjFEOW1MQkcmKiNuJzJKNT9rJUJgJ3I+TW4pcWFaVkJhZm5tb1NRKUNwS0hhRyJeQks3a3BbYWs5TD1jMk4vLWgmdSJLM0lkZiR0QkVTIU5FcVhILStIOy8ibG8rKE4oJTNxI29DYTBqPk4sTVNEbiI/NUlfQ1JKTyw9UVU/PydXcGklSFFfWHA0JFRIN2tvLkZrXDxxOS8lO11rbSFOZjReV0VTZkIsZyZAZCFTa1J0IlBwal43MjtRUFwrOkFMc3AlLEAwO3BeSWdCL241aGAnIyxKZWciOUVHOWtcJmRxVFFoWmIuKjdUNm1ZKGVoKV4vSyZsXi80K1U+bzhnWScjU0YrIS10dEMoSS9mLVRuYk1CZ1Q/LGRzc1IsK15zOCwzITViQ1duUic+PCFEcUleOGdVT1dARE85cnFoXC9mbj1VZkNRNWs3QEE7ckw1UihBU15FS18mcyFWR3JeJShQK2hRY01fZWpLWSxtVnVacFZmL0trKlEkU0I0XGc3OGY7RF9cbSJGP1ZGdCY+aWtbODBAMlBDZzxVYzAhclQnb1YhJWohNSM8RkwsQ2kxSzlUIWxMJmtFSUhkVmFucmdYTTYvOldfcS9DPjFaRTxUNyxHQUs3K04lY1tbbENnS1k2bTA9ZS5eRmUrOztkKyxacz5DW0pSZGc5RDkpbUZaPUQ2P0lCZVtzJD5eRHFkQCNmWzEwajw1L1AuNCYiJGZNQFBia0o4QyFyTEduIjUoOXFiIk1BWUFVSyVaYSxlYi5FLFFMMVlVXTpRV2FmOVZyOTInYzNXJVJvTmA1UE0zTidcazZWWidYU2w/KWxBVlVnLW5ZM2lNTVA7WSdyRnEpdWhYKTljRiYrVl1ick4yclMrJWpxS11bIjtxKVdmZFpdXzVAYUZDSWlLUWYqL0pTXGk+R2w1RWc+ODomfj5lbmRzdHJlYW0KZW5kb2JqCjE4IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDE0OTUKPj4Kc3RyZWFtCkdhdTBDPj5zOTknUm5CMzMzdEVRUEJPMiNyUERjMyc7MzVGS1hBPyVHdThCKDsoRzs9QS8hQnVeSUxtX1wyclE9U050MWM2S15HZnE5SHJDR2tnZ3JHPlNCZypsSU5wIz0hYi8lL2UyK0AhaTk1RVVRdVRoayFNKDg6Pk9yZjAiIVNeYl9gQWdnOVhWMzNpOjldYD5uTCdTVyU1b24tYWhoU102aEhdbmJwLmw4Jm1ULDtXOEAjWGInKE4rITwnUXAvVkxDNWkjV1pqPGFpV0ctaF8iYVtVRilDQW8hJUgkYSVBWkp1LCVKRXQ1JDBWNDEjcHJKUlI7UVEpYz49aUBEI3BwJzVQQ3BEXClSIzwvTyNpUlknWzRsOkJtWCdlKFQ1PU05NTI8Tk8mIyJoTFFHWDllIWshMF0jOCdyZFJmXlEuYEokM01BcT4iTWpYMUhcSEFkTFlhWVRRYzNPOFMrJUthYk5vOTskViViLjssaCxdNCxvZlRIdSItYDNNaShFXj1wWkhAYyc3V1kmY2hKaCM1UzAnTkNVNW1NQF1TYkslUFBVNSUyJVddWGYocWJIJGE8PjUvJVcvSDg9cGJVLS9dRS05J1koPk4hST5hZD8zb0ErWDFkXTs3TGw7SSVHTUlZOCFuK1dFPEMuLVZmcjxAVjFxPTIlVCsxSEM4dUlSaVwkWWgyXFcjbWwwJEYtYUNgU28xWyFnWC9XXGdmWSszPD9nYlEuc0ArQW02cW90T2tVLjRdOjJ0UlRROTB0UWxwbiJWbnJhdSxSN0hTbCxnIWw0NklHJ3Ixa2Y1OmEiQkclTiR0XzpyMElocjtxdW8jaTdkRG8/LkRiOjo+R0U4JG5LLVlEW2hnSUxQSWkhTXMzMGIiWC0qJGs3Zjo6ci1AVkNlczM7TzszWjRYOjBFWV1WZT0+Kk8iVjY5bmVJWjZyIVlyXTFPZHJjUl9QKT1KImtoRSEzUktOclBUWVovPiddWmRIbEBHUSo1RTBjIzk0Ul0nTUtaZ1dFT3FWU1g+Iy1kbjBSZW9SNjkyWWdvRChXUSc4JzwlQTxqNCxWNHQoWjxBak0kX1o+LShGXXMyS2JNIm47VVV1YWtXL1VjQUYnUGBuJWNBI1RMLzM3KT4jbGIoMGspQSQlY0RAYCgkRFpQUUxzTjQ4LUFsdHFPYjFbXkZOa1ZoZzMxRWQxcVhoOi1UJFw/UXFPQCU8ZzdOUVh0SW83RTE1YylrVEksWmlWLHJSOk9SdHFdXTt0MVQqXCMrWj1HSzRic2UuY1BVOGRdaVZvIT83aF9VX0BiVW5oKW1WbWokVVJMJktQZWRfLzAsKTFxNzsuUF0lVE0nWzpFdEdlQWo2UjwyZiY3XSFlXzdDKHA1QkYubVRASzlfRSNhXWlDKUYuL0JEYig5JWRuOVpFVF8nKTc9OnVDSUpoWjdyXkZMXW11ckItNDVKMUtebU1kMF1FQThgMiJlMmoyYWpRSV1DOERqZzlGZyNaLmhTJE9Qa1ZNJlpEUyIqRVA+R0c1b2Q9QjdyYT0kcStHRVVjdEcmKk4/KE4+SXNMYjleZCkmWjJSMzQuJjcwVUVEZTEzcztHRzlIMiI9SSdvV0VuRFEzOzFmInQvYUE0N09YNEw5NzpYU2hcZ0VINCpjLW1lcUVjQT8xOD5GaDEnbU1LMFlVSERPLG9xQSJpYXM4U0gxUls+I01XPUsjPHEtQmpyI2lMcFZjRyhnQzoxPU1wXmo3S0szNW4/THJJKm5APF06a3JmOVVgJj1jSCcwQi4mNDJCTSomQGpNcDptIWlnaW5rJURvazFHOztLPTQvLVA1I08sKCtkQW5hKDZMNSNxQlQ8ZCtrKl11UDJCVWdfXVxZSDtjJkpuPihqcXNkPUFkRk1Dc3JSI11YLy45PDNnYmQoc11cRSxNYlI9I2pQJDU3bj5KOHU/YSMiT15tVl5GIVstJGBkbUMmWWJwVTByYm1wR3E2Zlklfj5lbmRzdHJlYW0KZW5kb2JqCjE5IDAgb2JqCjw8Ci9GaWx0ZXIgWyAvQVNDSUk4NURlY29kZSAvRmxhdGVEZWNvZGUgXSAvTGVuZ3RoIDU4Mgo+PgpzdHJlYW0KR2FzMkY2I1lMMyUjKzBMKCUzbiNoOC1HUVxrQEEoSkYsJlc7U15wNihLRnBSKDpOOXBaQGkvUjswTE02IUIobE4sYWomSyw6Uz09P0Y+MSohLjhZUmwrO1BJZDJuciVhcDU6PG5aPUI8S3Q5Wjk8cW9xI1pCayI+cTwjPyRTPWJbUjM9WCJxIlAoLD5XIiNKLjZXTDE5PG88aEJAY0BKL1NfLSJESSklQlU9P0FsR0dBKEAySWBxckBbci43TG83Jl1VPW1YWSdTTFNoWGg0UW9AZHJrazIvU0FHSGs5dCVxNUcwNWJGcFQtI2tWUjklTXJeUmtuXGE6ZTo0c21cRT9sZF1uaFlNXilFRjJxcWI/W1hsTVZhSypRclU3SVYpN0M6RTxJLzxGck1NUVkwYXJBKV1ldUQ6JVlBOzFQMGpWQzJxMiU/LExuQGo1UkJFOT5aZEFbV0M+ImE3cDs1PmskR1lzXjM2U0c7PCRadCNPUjZOPjsrMltGMG1OXi5uO29eJDc2ZC5VSFk4TzJIb1g8Ql5laVk6dDs4akBAcDNiPmcoVTo9Uk4oLlVyIi5IXGhHRVdaUGk5NnBELz8uTCsjKHM5RyhoZW1YUihNNCMrMFE8MytBXUhWJDRlLmleJG1NMlFRXGY3byNlOykqcEglQWw6bE5TV3EuRXBHK0VsSzgxTGNnPilgZiMwNktHOj8ySWlDV2s6cFViVGs3czZhaV40MjNwTEUhXWEwTShvayMsPG1UQT8kOWJiPkNVNzIuR34+ZW5kc3RyZWFtCmVuZG9iagoyMCAwIG9iago8PAovRmlsdGVyIFsgL0FTQ0lJODVEZWNvZGUgL0ZsYXRlRGVjb2RlIF0gL0xlbmd0aCAxNjk0Cj4+CnN0cmVhbQpHYXUxLzk5XCdoJkJGODIuSmc5Vjc4aCgvS2AmdEVSN0FhPTNRcW9dbVVcIWg+Q1tBT0xiNk5NVDcxIi1EODlPZUIlUyIrNnNKKz5WY0hIKjYsOkspVT5OaiZpNik2ZWhAVWtFLTt1JjJAUElUZlwhKmsiPS88ImBnPkVRQykvVjk2J1g1bUM9KyVabGIyQG9JP0IuYGc3JWsvR14zXEczPG03X05KJ3BzIzBNLC0lIWNhSkZWK1BSXj1ZUXVvTW5HLWsyTTdKXVhBWTImJyFDQ0FyMGJMIkhqPmlXMFI5aysqZCVFVk8yVWFDK28yWmZNSXVYSnFDW14uKEh0WSkyTFVYZ2U2aGgiQVkka0I/akZFal5eOm8lU3I5M15GXWQhS0AuXCxeZTooUE0say1sZlZjcGE3NUdwVDloPlRsTHIpPFFWbVhUS1dvPU9XQlxvV3FYIygsVEZvWmkvTkIqczIiQjNHUTM8WTJpLTRmWkE8Y2lpJydGRF1SJ1klJVckaTNfJVRlVDJYJS5BRmBROCdKQScySlQ7TW85aCM5V25QJGoiJVxGUjNqcW5FVjFBR3JCQ0lgI1Q7WlRvKT1nMFheJD9qOFJIPC9QQyJlJ0wpZjtWYTdfMl9tSFtkI3FCLydoPiMoZGcxNlY/WTAkP28oNShFMFgwU0JmZlRWTHBnOmVlR0otZSgxIzZpKEZlNE9rTy9bJz0kVVJjOEA0TSZoKWQyUGMmNTRwQiVdWjlKOCFmZmUyWW9LVVZROj8vPXBjRkgoUDZQUztaZXAwRCE5T25QSz9wSlluKmVKbTFWbCRiTyZpcTUlUFZmNWAsPC1kcFAzZC0obmRZUllIJkpNJE89XUQpciRELCVNMk4nQDckSDtmaGVFTTE3UFslVjAxYSU1aEJqYC5XWDJxK0NrPzNhOnEpbD1KOiRbR2pCJXIzLGhZI2lxI2VlSk4wakRQPFNoPzFuQjslOXFkQ1sxPFc8bFpLVGk3UiFFdXNFbihzPUM0aiQjOTwvVFNyQGMkRkUyRUEiSiVDNWMiM2svW1xsLGFKYGBEMVdTXyozS0hXP3JOUzguOENHNzAhSnImSyYzSzAoSklnW2BWS2FPKEtfcF1oSEVxdGs5J0whVUhaW1ByTyFXOXMtYyYrZV8sYS4tKCJeR1xyTyZLM3UzMUROZDg0bjtDLzNKJ2hiWURaZDc/X1Y6SjhuKnA/J2JBWDo/OTkhLVdaMyl1cmMzZlRSWFtGUzNNVkZtdFUxaHMmPz1UKF81aGU5UVtQZTBlJU49YWhfPEJJLUtLanJzaSglby0hLyc8Z1NuP11BYEZSQjQ1OGxvbFJzNyVra1s1Nl5tY2JAM11oY2U2MEFUTihLZ2JzKy1bR1xkP0opRjA1Sis5PEluMm9FXlNhOjg6US1va043bmA7J0tYRyFsZDUmNldETEE6PjtkOUc7bVg4NjslaGonbUNYbDN0T0lLOFFwbDUqcGQpTmBncVhfcy8pI0k7ZXBTLEhePTpIIWgzJzhTKi5UJ2tUbWdiRzxMOyYvI0tETWUyXC5NQXJqOXE2clVLXj88UytDKjRhPC0nRlNeWyMibV0vJV1pQjVGQDEwKXApM1cpbXJBWlI4V1Q0VVg/Sjc1WDVSSCt0a0RBQGtFY2UmKFQzPStPUFNNT2wzMFp1XGJXZWEwKXJJPVpIK0wnZXEhbWdWJmoxTzYpMF1AYDIzS0xFWF1TNjBaXUxEUCxva2F1Qkc4YTZlKnIuUkc1SEMiYj8sJGkiUVFZR21HVTtOdSZjW2NpWW4yZ1tQU2VwQVwuakhCQlhiYWtLYVElb1FZSidnXVUmJW03YjU7aj5TUTFDJT9WXj41VygvWSo/QChdMmZsNzdCUWJCIk9ZRXBUJi45Z0VPPnQvVSxXLG8sVTwmW0crYz1YJlo+ZzMrYl5rNUFeNG1mLlk4SDddTV1idCpSKHRAMWYsZjM8Sz5iVShDXFg9WlgkZj8zQDMrSTw/Yz5fa3BdYmZSJ1xpNCVmKldiYTVLLGZHXjdOPDYtVzxJM2c+RlkkUXJDKDA/WFlSNFBdOGUvJWo8aUZxKEFGUkhock1VYVU2Sy1LbzkiWjszWHRoOWhoUCY2V2A6bGVPMUc3LiolJTJqViNLciwkaTdvPVddQkksIz0zXTokVD9KalcpYz1bZEYuSUg4P09GYj4vOWtvNDJPczJARiJwPFpHaC1xMGZuQEwtaiw2ayxpTmk/IWtDdElmXF1DT29+PmVuZHN0cmVhbQplbmRvYmoKMjEgMCBvYmoKPDwKL0ZpbHRlciBbIC9BU0NJSTg1RGVjb2RlIC9GbGF0ZURlY29kZSBdIC9MZW5ndGggMTA2MQo+PgpzdHJlYW0KR2F0PSlnTiklLiUiN2tPaTZnNHQ8KUpybF03JkJpYWowPkpSVjtRR20tSEQ9Q3A9XkhLZCxvbz9YSm8jPyxvWiZqOCgpMSFZLFxtIjtvKUxCJlU0YCEjR2dPXDdXTWguLUE9bi4jJFhpPlNWbUghU187TTBoZzVhUFh1VnFSOTlzPk45dV9KN2VTNk1PNV9tS0Jgcm5mP1BsMjgpTDBgcCdsW2YkRDhcQjc1V1UyYGRJSU02SHFzXWRkczQpVSgoSm43VGYnRE1BKE5FZCMpKThGLz9SOCs+JV8kcEAyR0ojbkhGZTc0UFBxaElfbig6cjxEOjUwSjoqaV1rWGNUJkZaJmwuKC8/QUVQNkdYM1hcUSxXS2E+UiJLLz43IW9cSlJSUydMXiY4YGpJTGxPWmlfczA1MWFfcmxYNF1BNy4xbkVhLmxBOjdrbTlEO2ksSD9qOyxSKDA0WFpNbWgvVkA2Ry9RMUdQSWMoZWA/YywkWTYlcGhoTmJeKEdLK0FHUkheb09HTlkzR0xeNzsjS0E3TzFUR1QsN25sWFVyLFo+JF9bR11UNytKOzpVQ1R0IzRMP2ddcjNwP0Y8VSk1VXNKbkdmY0YrbSpjOkdvZE1dKG5pTG5qNzc6ZSloXTBFJ18mO2lnbDEvWUZKVGMjQmdmdGkhLTpgTjQuM3QqcCk8Q1pqKDhiXCZMO0BaVDE2VVwsRVVNXFtUb3JuKDNzc1ZPVV09bmdUKlFycjNwPjomOjNaOF1AJ2pVRipAZmBHaFpJMzxxUT8nJjVBP1tSUD9lN2hZXTYtXywtOnA2SXVFWlQ1Y11JW3QlPTJNcUtZOl9zOHNPazREMFJmZHJUMS42VDQzKGAidExfcCpibkQ7MGwwTERgRVYlUSpiUyU/M1QiaktgVjY4cVUqcXJsQStnX3BtWEAtNj9qTlg8VnNbajJXWmVrOWRcS0dGYGlpOlo4aGRTKiFqMUk0aEFcLGF0PGZKTCN0aVQ3UkpgNT5qMzVqOUpJVlM8dE1VJUJrV1QsdDJwInBAP2lhKSxqQy5BaGBPIlVlYENEbjtcLFEiVDVAZWdjXFpRQjlsWmkmXW9EJHA/TFZXUzFxR2pSRCJQNDMzPS8uMmldQS9uYlcxU2xMIks/MytjVCIkOzFAVXJAQGB1I2A5UDBAMUUxYGRiYWY0ZDFlSTlSU2o0PkJUZz9dNFtfITVkRzozdCpvcm5UWShXblphVCtoQ05VWWFqUEY3RS1uXXAyMWU5WmdBMW8mbD0kcjQ1TUJCUXV1WilFOycpV2ZLPXBmSl9AaDsybzlIJyVyJDgxLmhRNCFTU2FnSWYpVFU2S2MmVGYjL25UUF5VUEhidTw4VDY/TjwwSktGKTQzcTEtUy9UJ2RyJD06dD5ONFckSkFIR0YjPVhzfj5lbmRzdHJlYW0KZW5kb2JqCnhyZWYKMCAyMgowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwMDAwNzMgMDAwMDAgbiAKMDAwMDAwMDE0NSAwMDAwMCBuIAowMDAwMDAwMjUyIDAwMDAwIG4gCjAwMDAwMDAzNjQgMDAwMDAgbiAKMDAwMDAwMDU1OSAwMDAwMCBuIAowMDAwMDAwNjQyIDAwMDAwIG4gCjAwMDAwMDA3NTcgMDAwMDAgbiAKMDAwMDAwMDk1MiAwMDAwMCBuIAowMDAwMDAxMTQ3IDAwMDAwIG4gCjAwMDAwMDEzNDIgMDAwMDAgbiAKMDAwMDAwMTUzOCAwMDAwMCBuIAowMDAwMDAxNjU4IDAwMDAwIG4gCjAwMDAwMDE4NTQgMDAwMDAgbiAKMDAwMDAwMTkyNCAwMDAwMCBuIAowMDAwMDAyMjA4IDAwMDAwIG4gCjAwMDAwMDIzMDAgMDAwMDAgbiAKMDAwMDAwMzYxMiAwMDAwMCBuIAowMDAwMDA1MTQzIDAwMDAwIG4gCjAwMDAwMDY3MzAgMDAwMDAgbiAKMDAwMDAwNzQwMyAwMDAwMCBuIAowMDAwMDA5MTg5IDAwMDAwIG4gCnRyYWlsZXIKPDwKL0lEIApbPDM0ZjkwNGEwOWQxMDQ5YTkzM2Y0N2Q1MmQ3ZmZiNDcwPjwzNGY5MDRhMDlkMTA0OWE5MzNmNDdkNTJkN2ZmYjQ3MD5dCiUgUmVwb3J0TGFiIGdlbmVyYXRlZCBQREYgZG9jdW1lbnQgLS0gZGlnZXN0IChodHRwOi8vd3d3LnJlcG9ydGxhYi5jb20pCgovSW5mbyAxNCAwIFIKL1Jvb3QgMTMgMCBSCi9TaXplIDIyCj4+CnN0YXJ0eHJlZgoxMDM0MgolJUVPRgo='}}, {'type': 'text', 'text': 'Analyze this building permit application and extract all relevant information.\n\nExtract:\n- Building details (type, storeys, height, floor area)\n- Property information\n- Construction details\n- Any dimensional specifications\n- Special features (mezzanines, accessory structures, etc.)\n\nReturn a JSON object with this structure:\n{\n  "permit": {\n    "application_id": "extracted or generated ID",\n    "building": {\n      "use": "residential|commercial|industrial|accessory|mixed",\n      "storeys": 1,\n      "height": {\n        "value": 4.2,\n        "unit": "meters"\n      },\n      "floor_area": {\n        "total": 1500,\n        "unit": "sqft"\n      },\n      "occupancy_class": "small|medium|large",\n      "has_mezzanine": false,\n      "attached": false\n    },\n    "property": {\n      "address": "extracted address",\n      "lot_size": "if available"\n    },\n    "applicant": {\n      "name": "extracted name",\n      "contact": "extracted contact"\n    }\n  }\n}\n\nExtract all numeric values precisely with their units.'}]}], 'model': 'claude-opus-4-6'}}
2026-02-06 15:44:15,860 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2026-02-06 15:44:15,866 - httpcore.connection - DEBUG - close.started
2026-02-06 15:44:15,882 - httpcore.connection - DEBUG - close.complete
2026-02-06 15:44:15,882 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=600 socket_options=None
2026-02-06 15:44:15,920 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000012E9DFD7770>
2026-02-06 15:44:15,922 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000012E9DED9A50> server_hostname='api.anthropic.com' timeout=600
2026-02-06 15:44:15,968 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000012E9DFD71A0>
2026-02-06 15:44:15,970 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 15:44:15,972 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 15:44:15,973 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 15:44:15,974 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 15:44:15,974 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 15:44:44,249 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 23:44:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'22000'), (b'anthropic-ratelimit-input-tokens-reset', b'2026-02-06T23:44:39Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2026-02-06T23:44:49Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2026-02-06T23:44:18Z'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'29000'), (b'anthropic-ratelimit-tokens-reset', b'2026-02-06T23:44:39Z'), (b'request-id', b'req_011CXshnW8ArFpUf5tvQiEcv'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'61cec5b4-786c-4e9f-bbeb-0419cd0a3839'), (b'Server', b'cloudflare'), (b'x-envoy-upstream-service-time', b'28186'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Content-Security-Policy', b"default-src 'none'; frame-ancestors 'none'"), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9c9e83b90ce47631-YVR')])
2026-02-06 15:44:44,250 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2026-02-06 15:44:44,251 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 15:44:44,253 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 15:44:44,253 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 15:44:44,253 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 15:44:44,254 - anthropic._base_client - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 06 Feb 2026 23:44:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '22000', 'anthropic-ratelimit-input-tokens-reset': '2026-02-06T23:44:39Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2026-02-06T23:44:49Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2026-02-06T23:44:18Z', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '29000', 'anthropic-ratelimit-tokens-reset': '2026-02-06T23:44:39Z', 'request-id': 'req_011CXshnW8ArFpUf5tvQiEcv', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '61cec5b4-786c-4e9f-bbeb-0419cd0a3839', 'server': 'cloudflare', 'x-envoy-upstream-service-time': '28186', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'content-security-policy': "default-src 'none'; frame-ancestors 'none'", 'content-encoding': 'gzip', 'cf-ray': '9c9e83b90ce47631-YVR'})
2026-02-06 15:44:44,255 - anthropic._base_client - DEBUG - request_id: req_011CXshnW8ArFpUf5tvQiEcv
2026-02-06 15:44:44,259 - __main__ - INFO - Claude API call successful
2026-02-06 15:44:44,259 - __main__ - DEBUG - Response usage - Input tokens: 11234, Output tokens: 1391
2026-02-06 15:44:44,259 - __main__ - DEBUG - Claude response length: 4030 characters
2026-02-06 15:44:44,259 - __main__ - DEBUG - Claude response preview: ```json
{
  "permit": {
    "application_id": "BP-2026-00147",
    "building": {
      "use": "residential",
      "storeys": 1,
      "height": {
        "value": 4.6,
        "unit": "meters"
      ...
2026-02-06 15:44:44,260 - __main__ - INFO - Removing markdown code blocks from response
2026-02-06 15:44:44,261 - __main__ - DEBUG - Extracted JSON string length: 4018 characters
2026-02-06 15:44:44,261 - __main__ - INFO - Successfully parsed JSON response
2026-02-06 15:44:44,261 - __main__ - INFO - Successfully extracted permit data
2026-02-06 15:44:44,261 - __main__ - DEBUG - Permit building type: Single-Storey Residential Dwelling
2026-02-06 15:44:44,265 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 15:44:44] "POST /extract-permit HTTP/1.1" 200 -
2026-02-06 15:44:44,748 - __main__ - INFO - === Validate Permit Request Received ===
2026-02-06 15:44:44,749 - __main__ - DEBUG - Request data keys: ['permit']
2026-02-06 15:44:44,749 - __main__ - INFO - Validating permit for building type: Single-Storey Residential Dwelling
2026-02-06 15:44:44,751 - __main__ - DEBUG - Permit data: {
  "applicant": {
    "bc_contractor_license": "BC-CON-2019-45678",
    "company": "West Coast Developments Ltd.",
    "contact": {
      "email": "ravi.kumar@westcoastdev.ca",
      "mailing_address": "500 \u2013 1234 Douglas Street, Victoria, BC V8W 2E6",
      "phone": "(250) 555-0184"
    },
    "name": "Ravi Kumar, P.Eng.",
    "position": "Senior Project Manager"
  },
  "application_id": "BP-2026-00147",
  "application_type": "New Construction \u2013 Residential",
  "building": {
    "attached": false,
    "bathrooms": 2,
    "bedrooms": 3,
    "features": [
      "Open-concept living area",
      "Covered front porch"
    ],
    "floor_area": {
      "total": 1750,
      "unit": "sqft"
    },
    "garage": "Attached single-car garage",
    "has_mezzanine": false,
    "height": {
      "unit": "meters",
      "value": 4.6
    },
    "occupancy_class": "small",
    "storeys": 1,
    "type": "Single-Storey Residential Dwelling",
    "use": "residential"
  },
  "construction_details": {
    "exterior_cladding": "Fiber cement siding with stone veneer accents",
    "foundation": "Concrete slab-on-grade with perimeter stem wall",
    "framing": "Conventional wood-frame (2x6 exterior walls)",
    "insulation": {
      "ceiling": "R-40",
      "walls": "R-22"
    },
    "roof": {
      "slope": "5:12",
      "type": "Pitched roof with asphalt shingles"
    },
    "windows": {
      "type": "Double-glazed, Low-E, vinyl frames",
      "u_factor": 0.3
    }
  },
  "dimensional_compliance": {
    "building_height": {
      "compliant": false,
      "exceedance_m": 0.1,
      "maximum_m": 4.5,
      "proposed_m": 4.6
    },
    "front_setback": {
      "compliant": true,
      "minimum_m": 6,
      "proposed_m": 6.5
    },
    "lot_coverage": {
      "compliant": true,
      "limit": "40%",
      "proposed": "35%"
    },
    "rear_setback": {
      "compliant": true,
      "minimum_m": 7.5,
      "proposed_m": 8
    },
    "side_setback_east": {
      "compliant": true,
      "minimum_m": 1.5,
      "proposed_m": 1.8
    },
    "side_setback_west": {
      "compliant": true,
      "minimum_m": 1.5,
      "proposed_m": 1.5
    }
  },
  "energy_efficiency": {
    "energuide_minimum": 80,
    "energuide_rating_target": 82,
    "furnace_afue": "96%",
    "hrv": true,
    "led_lighting": true,
    "solar_prewired": true
  },
  "fees": {
    "currency": "CAD",
    "development_cost_charge": 12500,
    "estimated_construction_value": 485000,
    "permit_fee": 3880,
    "school_site_acquisition_charge": 1200,
    "total_fees_payable": 17580
  },
  "fire_life_safety": {
    "co_detector": "Each level",
    "garage_separation": "5/8\" Type X drywall",
    "gfci_protection": "Kitchen, bathrooms, and exterior outlets",
    "smoke_alarms": "Interconnected in all bedrooms and hallways",
    "tempered_glass": "Hazardous locations per code"
  },
  "municipality": "City of Victoria",
  "permit_validity_months": 24,
  "property": {
    "address": "1234 Cedar Lane, Victoria, BC V8N 4K2",
    "current_land_use": "Vacant Lot",
    "legal_description": "Lot 15, Section 42, Victoria District, Plan VIP12345",
    "lot_size": {
      "metric": {
        "unit": "sqm",
        "value": 604
      },
      "unit": "sqft",
      "value": 6500
    },
    "pid": "012-345-678",
    "zoning": "R1-B (Single Family Residential)"
  },
  "submission_date": "2026-02-03",
  "variance_request": {
    "justification": "Accommodate 5:12 roof pitch for optimal drainage and aesthetic consistency with neighbouring properties; adequate attic ventilation; shadow study prepared",
    "percentage_over": "2.2%",
    "proposed_m": 4.6,
    "required_m": 4.5,
    "type": "Building Height",
    "variance_amount_m": 0.1
  }
}
2026-02-06 15:44:44,753 - __main__ - INFO - Fetching rules from file
2026-02-06 15:44:44,756 - __main__ - INFO - Loaded 3 rules from file
2026-02-06 15:44:44,758 - __main__ - INFO - Starting validation against 3 rules
2026-02-06 15:44:44,758 - __main__ - DEBUG - Checking rule: RULE-000001 - BC-DEMO-001  Single-Storey Residential Building
2026-02-06 15:44:44,759 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 15:44:44,761 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 15:44:44,761 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 15:44:44,761 - __main__ - DEBUG - Condition 1: building.storeys eq 1, Actual: 1
2026-02-06 15:44:44,762 - __main__ - DEBUG - Evaluating: 1 eq 1
2026-02-06 15:44:44,762 - __main__ - DEBUG - Evaluation result: True
2026-02-06 15:44:44,762 - __main__ - DEBUG - Condition 1 passed
2026-02-06 15:44:44,763 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 15:44:44,763 - __main__ - DEBUG - Found value: residential for path: building.use
2026-02-06 15:44:44,763 - __main__ - DEBUG - Condition 2: building.use eq residential, Actual: residential
2026-02-06 15:44:44,764 - __main__ - DEBUG - Evaluating: residential eq residential
2026-02-06 15:44:44,764 - __main__ - DEBUG - Evaluation result: True
2026-02-06 15:44:44,764 - __main__ - DEBUG - Condition 2 passed
2026-02-06 15:44:44,765 - __main__ - DEBUG - All conditions met
2026-02-06 15:44:44,765 - __main__ - INFO - Rule RULE-000001 applies to this permit
2026-02-06 15:44:44,765 - __main__ - DEBUG - Checking 2 requirements for rule RULE-000001
2026-02-06 15:44:44,765 - __main__ - DEBUG - Getting nested value for path: building.height.value
2026-02-06 15:44:44,765 - __main__ - DEBUG - Found value: 4.6 for path: building.height.value
2026-02-06 15:44:44,765 - __main__ - DEBUG - Checking requirement: building.height.value lte 4.5, Actual: 4.6
2026-02-06 15:44:44,766 - __main__ - DEBUG - Evaluating: 4.6 lte 4.5
2026-02-06 15:44:44,766 - __main__ - DEBUG - Evaluation result: False
2026-02-06 15:44:44,766 - __main__ - DEBUG - Requirement result: False
2026-02-06 15:44:44,767 - __main__ - WARNING - Violation found - Rule: RULE-000001, Field: building.height.value, Error: Building height exceeds 4.5 m maximum for single-storey residential
2026-02-06 15:44:44,767 - __main__ - DEBUG - Getting nested value for path: building.floor_area.value
2026-02-06 15:44:44,768 - __main__ - DEBUG - Key 'value' not found in path 'building.floor_area.value'
2026-02-06 15:44:44,768 - __main__ - DEBUG - Checking requirement: building.floor_area.value lte 1800, Actual: None
2026-02-06 15:44:44,768 - __main__ - DEBUG - Requirement failed: field not found
2026-02-06 15:44:44,770 - __main__ - WARNING - Violation found - Rule: RULE-000001, Field: building.floor_area.value, Error: Floor area exceeds 1,800 sq. ft. maximum for single-storey residential
2026-02-06 15:44:44,770 - __main__ - DEBUG - Checking rule: RULE-000002 - BC-DEMO-004  Two-Storey Residential Building
2026-02-06 15:44:44,770 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 15:44:44,771 - __main__ - DEBUG - Getting nested value for path: building.storeys
2026-02-06 15:44:44,771 - __main__ - DEBUG - Found value: 1 for path: building.storeys
2026-02-06 15:44:44,771 - __main__ - DEBUG - Condition 1: building.storeys eq 2, Actual: 1
2026-02-06 15:44:44,771 - __main__ - DEBUG - Evaluating: 1 eq 2
2026-02-06 15:44:44,771 - __main__ - DEBUG - Evaluation result: False
2026-02-06 15:44:44,771 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 15:44:44,771 - __main__ - DEBUG - Rule RULE-000002 conditions not met, skipping
2026-02-06 15:44:44,772 - __main__ - DEBUG - Checking rule: RULE-000003 - BC-DEMO-005  Mixed-Use (Residential/Commercial) Building
2026-02-06 15:44:44,772 - __main__ - DEBUG - Checking 2 conditions
2026-02-06 15:44:44,773 - __main__ - DEBUG - Getting nested value for path: building.use
2026-02-06 15:44:44,773 - __main__ - DEBUG - Found value: residential for path: building.use
2026-02-06 15:44:44,773 - __main__ - DEBUG - Condition 1: building.use eq mixed-use, Actual: residential
2026-02-06 15:44:44,773 - __main__ - DEBUG - Evaluating: residential eq mixed-use
2026-02-06 15:44:44,773 - __main__ - DEBUG - Evaluation result: False
2026-02-06 15:44:44,775 - __main__ - DEBUG - Condition 1 failed: evaluation returned False
2026-02-06 15:44:44,775 - __main__ - DEBUG - Rule RULE-000003 conditions not met, skipping
2026-02-06 15:44:44,775 - __main__ - INFO - Validation complete - Valid: False, Violations: 2, Applicable rules: 1
2026-02-06 15:44:44,775 - __main__ - DEBUG - Summary: {'total_rules_checked': 1, 'applicable_rules': ['RULE-000001'], 'violation_count': 2, 'mandatory_violations': 2, 'advisory_violations': 0}
2026-02-06 15:44:44,777 - werkzeug - INFO - 127.0.0.1 - - [06/Feb/2026 15:44:44] "POST /validate-permit HTTP/1.1" 200 -
